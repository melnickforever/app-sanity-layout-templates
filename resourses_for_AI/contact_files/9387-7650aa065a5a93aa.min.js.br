"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="8bb55d9c-b265-5b75-bdad-39ad652092c0")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([["9387"],{519763(e,t,n){n.d(t,{$S:()=>d,Du:()=>x,F7:()=>o,GI:()=>b,In:()=>k,KK:()=>R,Lo:()=>h,MJ:()=>f,OM:()=>u,Qq:()=>j,SD:()=>N,UR:()=>r,VM:()=>s,WJ:()=>T,WO:()=>C,YD:()=>w,aW:()=>I,eX:()=>a,ex:()=>E,g2:()=>y,k8:()=>p,lo:()=>_,wC:()=>l,wb:()=>c,xH:()=>g,xS:()=>i,xe:()=>m,zl:()=>v});let i="thread_comment--threadHeaderLeft--dNoBl thread_comment--_threadHeader--pP93I",a="thread_comment--threadHeaderRight--Egc7h thread_comment--_threadHeader--pP93I",o="thread_comment--threadHeaderContainer--cKu2K",r="thread_comment--threadHeaderButton--r-u-n",s="thread_comment--threadHeaderButtonInactive--hsgu-",d="thread_comment--addReactionButton--OvgA8",c="thread_comment--threadContainer--wjhnx",l="thread_comment--threadContainerCommunityDetailsPage--9h9ch thread_comment--threadContainer--wjhnx",m="thread_comment--threadContainerAnimated--cWdy8 thread_comment--threadContainer--wjhnx",u="thread_comment--threadContainerInner--AIRF8",h="thread_comment--threadElement--DpA6Q thread_comment--_threadElement--HbreR text--fontPos11--rO47d text--_fontBase--VaHfk text--fontPos13--5OfL8 text--_fontBase--VaHfk",f="thread_comment--threadElementReplyContainer--r4q-0 thread_comment--threadElement--DpA6Q thread_comment--_threadElement--HbreR text--fontPos11--rO47d text--_fontBase--VaHfk text--fontPos13--5OfL8 text--_fontBase--VaHfk",p="thread_comment--threadSubelementNoMargin--GhE1-",_="thread_comment--indentedQuickReplyThreadSubelement--NPbKw thread_comment--threadSubelementNoMargin--GhE1-",g="thread_comment--quickReplyThreadSubelementNoMargin--BeYoJ thread_comment--threadSubelementNoMargin--GhE1-",b="thread_comment--indentedThreadSubelement--t-q5y thread_comment--threadSubelement--zCCIl thread_comment--threadSubelementNoMargin--GhE1-",y="thread_comment--rightJustified--Zksz3",v="thread_comment--leftJustified--baaoJ",k="thread_comment--quickReplyThreadElement--Sq5zx thread_comment--_threadElement--HbreR text--fontPos11--rO47d text--_fontBase--VaHfk text--fontPos11--rO47d text--_fontBase--VaHfk",x="thread_comment--authorAvatar--kbnMD",C="thread_comment--authorHandle--4K3or thread_comment--headerLabel--nlZCi",j="thread_comment--text--RosWu",w="thread_comment--grayLabel--Thn0V thread_comment--headerLabel--nlZCi",E="thread_comment--iconButtonSpace--fUKim",R="thread_comment--attachmentsContainer--PNIju",T="thread_comment--reactionsContainer--mj7uu",I="thread_comment--resolvedIcon--UMDYj",N="thread_comment--loadingAvatar--rOrpL comment_cluster_elements--loadingSpinner--LTwcP"},791118(e,t,n){n.d(t,{a:()=>f});var i=n(239976),a=n(645186),o=n(850159),r=n(985373),s=n(38900),d=n(999682),c=n(751524),l=n(73175),m=n(434793),u=n(519763),h=n(131464);function f(e){let t=(0,a.wA)(),{attachments:n}=e,f=i=>{t((0,s.to)({type:l.q,data:{attachments:n,selectedIdx:n.map(e=>e.thumbnailUrl).indexOf(i),onUpdateAltText:p,canEdit:e.canEdit,triggerRef:e.threadCommentRef},showModalsBeneath:!0}))},p=(t,i)=>{let a=n[i];return c.l.put(e.fileKey,a.id,t)};return(0,i.jsx)("div",{className:u.KK,children:n.slice(0,3).map((e,a)=>(0,i.jsx)("div",{className:h.Kn,children:(0,i.jsx)(m.MH,{thumbnailUrl:e.thumbnailUrl,altText:e.altText||(0,o.t)("comments.attachment_thumbnail_alt_text_default"),ariaLabel:e.altText||(0,o.t)("comments.attachment_thumbnail_label_indexed",{attachmentIndex:a+1,attachmentCount:n.length}),overlayText:n.length>3&&2===a?`+${n.length-3}`:void 0,onClick:f,onRightClick:n=>{n.preventDefault(),n.stopPropagation(),t(r.j7({type:d.DT,data:{id:"comment_attachment_context_menu",clientX:n.clientX,clientY:n.clientY,attachment:e}}))},dimensions:0===a&&1===n.length?e.metadata.dimensions:void 0})},e.id))})}},39193(e,t,n){function i(e){if("loaded"!==e.status)return!1;let t=e.data.file;return!!t&&("comments"in t||"mobileCommentThread"in t)}n.d(t,{I:()=>a,e:()=>i});class a{constructor(e,t,n){this.args=e,this.subscription=t,this.user=n,this.livegraphClient=null}get fileKey(){return this.args.fileKey}get loadedComments(){return i(this.subscription)?"comments"in this.subscription.data.file?this.subscription.data.file.comments:this.subscription.data.file.mobileCommentThread:[]}optimistically(e){if(!this.livegraphClient)return void setTimeout(()=>{throw Error("Unable to perform optimistic mutation to livegraph, no livegraph client")});if(!this.subscription)return void setTimeout(()=>{throw Error(`Unable to perform optimistic mutation to livegraph, no livegraph client ${JSON.stringify(this.args)}`)});if(!i(this.subscription)){let e=this.subscription;console.error("Unable to perform optimistic mutation to livegraph - partial subscription",JSON.stringify(this.args),JSON.stringify({loaded:"loaded"===e.status,status:e.status,file:"loaded"===e.status&&!!e.data.file,currentFileFollower:"loaded"===e.status&&!!e.data.file?.currentUserFileFollower,comments:"loaded"===e.status&&!!(e.data.file&&"comments"in e.data.file?e.data.file.comments:e.data.file?.mobileCommentThread)}));return}e(this.subscription.data,this.livegraphClient,this.user)}}},733921(e,t,n){n.d(t,{xI:()=>s,kJ:()=>r});var i=n(35212);let a=new class{constructor(){this.FileCommentPinImpl=(0,i.vh)()}setPin(e,t){return this.FileCommentPinImpl.validate(({xr:n})=>n.put(`/api/file/${e}/comments/${t}`,{comment_pin_action:"set_pin"}))}removePin(e,t){return this.FileCommentPinImpl.validate(({xr:n})=>n.put(`/api/file/${e}/comments/${t}`,{comment_pin_action:"remove_pin"}))}};var o=n(34183);function r(){var e=(0,o.wq)();if("loaded"!==e.status)return 0;let t=0;for(let n of e.data)n.commentPin&&t++;return t}class s{constructor(e){this.client=e}setPin(e){let t=a.setPin(this.client.fileKey,e);return this.client.optimistically(async(n,i,a)=>{let o=new Date,r=`${e}_${this.client.fileKey}`;await i.optimisticallyCreate({CommentPin:{[r]:{fileKey:n.file.id,fileCommentId:e,updatedAt:o,createdAt:o,userId:a.id}}},t)}),t}removePin(e,t){let n=a.removePin(this.client.fileKey,e);return this.client.optimistically(async(i,a)=>{if("loaded"!==this.client.subscription.status)throw Error("Unable to get pin for unloaded subscription");await a.optimisticallyDelete({CommentPin:{[t||`${e}_${this.client.fileKey}`]:null}},n)}),n}}},926441(e,t,n){n.d(t,{E:()=>l});var i=n(105652),a=n(701328),o=n.n(a),r=n(181645),s=n(429163),d=n(485587);let c=2036!=n.j?{PENDING_COMMENT:"comments.web.pending_comment",PENDING_FROM_LG_COMMENT:"comments.web.pending_from_lg_comment",PENDING_COMMENT_SLOW:"comments.web.pending_comment.slow"}:null;function l(e){let[t,n]=i.useState(new Set),[a,l]=i.useState(new Set),m=i.useRef(new Map),u=i.useRef(new Map),h=i.useRef(new Map),f=i.useCallback(()=>{(0,d.rI)(Array.from(m.current).map(([e,t])=>{let n=performance.now()-t.startTime;return{metric:c.PENDING_COMMENT,value:n/1e3,tags:{pending_comment_aborted:"true",backgrounded:t.backgrounded?"true":"false"}}}))},[]),p=i.useCallback(()=>{m.current&&m.current.forEach(e=>{e.backgrounded=!0})},[]);i.useEffect(()=>{for(let t of e)if(!t.isPendingFromSinatra&&t.uuid){let e=`comment_creation_${t.uuid}`,n=s.sn.get(e);if(n&&n.isRunning&&!n.isUnreliable){let t=s.sn.tryStop(e);t&&(0,r.sx)("comment_creation",{elapsedMs:t},{forwardToDatadog:!0})}}},[e]),i.useEffect(()=>{let t=new Set(e.filter(e=>e.isPendingFromSinatra).map(e=>e.id)),i=new Set(e.filter(e=>e.uuid&&e.isPendingFromLg).map(e=>e.uuid));t.forEach(e=>{if(m.current.has(e))return;m.current.set(e,{startTime:performance.now(),backgrounded:!1});let t=setTimeout(()=>{(0,d.Rh)(c.PENDING_COMMENT_SLOW,{})},3e4);h.current.set(e,t)}),i.forEach(e=>{u.current.has(e)||u.current.set(e,{startTime:performance.now(),backgrounded:!1})}),n(e=>o()(t,e)?e:t),l(e=>o()(i,e)?e:i)},[e]),i.useEffect(()=>{m.current.forEach((e,n)=>{if(!t.has(n)){let t=performance.now()-e.startTime;(0,d.S3)(c.PENDING_COMMENT,t/1e3,{backgrounded:e.backgrounded}),m.current.delete(n),h.current.has(n)&&(clearTimeout(h.current.get(n)),h.current.delete(n))}})},[t]),i.useEffect(()=>{u.current.forEach((e,t)=>{if(!a.has(t)){let n=performance.now()-e.startTime;(0,d.S3)(c.PENDING_FROM_LG_COMMENT,n/1e3,{backgrounded:e.backgrounded}),u.current.delete(t)}})},[a]),i.useEffect(()=>(window.addEventListener("beforeunload",f),()=>window.removeEventListener("beforeunload",f)),[f]),i.useEffect(()=>{let e=()=>{"hidden"===document.visibilityState&&p()};return window.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[p])}},565095(e,t,n){n.d(t,{Kb:()=>x,ny:()=>k});var i=n(239976),a=n(105652),o=n(859978),r=n(610452),s=n(850159),d=n(224542),c=n.n(d),l=n(955721),m=n(608293),u=n(331335);let h=[{id:"heavy_plus_sign",description:"plus sign"},{id:"+1",description:"thumbs up"},{id:"-1",description:"thumbs down"},{id:"eyes",description:"eyes"},{id:"heart_eyes",description:"heart eyes"},{id:"joy",description:"joy"},{id:"star2",description:"glowing star",hideInPicker:!0},{id:"fire",description:"fire"}].map(e=>{let t=u.dN.get(e.id),n=t?t?.skins[0].unified:"";return{...e,skin:null,colons:`:${e.id}:`,unified:n,native:String.fromCodePoint(parseInt(n,16))}});var f=n(328151);let p=(0,n(713802).ex)("emoji_reaction_tooltip",function(e){let{emojiUnicodeList:t,emojiShortcodeToUsers:n}=e;return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"emoji_reaction_tooltip--unicodeContainer--jeo3P",children:t.map(e=>(0,i.jsx)("span",{className:"emoji_reaction_tooltip--unicode--1Andu",children:e},e))}),n.map(([e,t])=>(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)("div",{className:"emoji_reaction_tooltip--users--JKhLy",children:t}),(0,i.jsx)("div",{className:"emoji_reaction_tooltip--shortcode--PC2dD",children:e})]},e))]})},e=>{let t={emojiUnicodeList:[],emojiShortcodeToUsers:[]},n=e.getAttribute("data-tooltip-data");return n&&(t={...t,...JSON.parse(n)}),t}),_="reactions--reaction--tL2ND text--fontPos11--rO47d text--_fontBase--VaHfk";function g(e){return void 0!==e.numUsers}let b={};function y(e,t){let n=e.map(e=>e.handle).slice(0,t),i=e.length-t;return i>0&&n.push((0,m.td)(i,"other")),(0,m.Yx)(n)}h.forEach(e=>{b[`:${e.id}:`]=e});let v=a.forwardRef(function(e,t){let n=g(e.reaction)?e.reaction.numUsers:e.reaction.users.length,a=Object.keys(e.reaction.skinTonesToUsers).length,r=a>0?Object.keys(e.reaction.skinTonesToUsers):[""],d=r.map(t=>(0,l.UF)(`${e.reaction.emoji}${t}`)[0]),m={emojiUnicodeList:[],emojiShortcodeToUsers:[]};if(!g(e.reaction)){let t=[],n=[];if(a>0)r.forEach(i=>{let o=`${e.reaction.emoji}${i}`;t.push((0,l.UF)(o)[0].unicode);let r=y(e.reaction.skinTonesToUsers[i],Math.floor(40/a));n.push([o,r])});else{t.push((0,l.UF)(e.reaction.emoji)[0].unicode);let i=y(e.reaction.users,40);n.push([e.reaction.emoji,i])}m={emojiUnicodeList:t,emojiShortcodeToUsers:n}}return(0,i.jsxs)(o.E,{ref:t,"aria-label":e.reaction.selected?(0,s.t)("comments.reaction_selected_descriptive_aria_label_text",{num_users:n,icon:JSON.stringify(m.emojiUnicodeList)}):(0,s.t)("comments.reaction_unselected_descriptive_aria_label_text",{num_users:n,icon:JSON.stringify(m.emojiUnicodeList)}),"aria-pressed":e.reaction.selected,className:c()({"reactions--selectedReaction--eF--u reactions--reaction--tL2ND text--fontPos11--rO47d text--_fontBase--VaHfk":e.reaction.selected,[_]:!e.reaction.selected,"reactions--hiddenReaction--kxm4-":!e.visible}),"data-testid":`reaction-button-${e.reaction.emoji}`,"data-tooltip":p,"data-tooltip-data":JSON.stringify(m),"data-tooltip-max-width":200,"data-tooltip-type":f.Ib.SPECIAL,onClick:e.onClick,children:[d.map(e=>(0,i.jsx)("span",{className:"reactions--emojiUnicode--FOa5U",children:e.unicode},`${e.meta}`)),(0,i.jsx)("span",{className:"reactions--count--8h7cr",children:n})]})});function k(e){let t=e.styleClassName?e.styleClassName:"reactions--addReaction--5Nxiv";return(0,i.jsx)(o.E,{className:t,"data-tooltip-type":f.Ib.TEXT,"data-tooltip":(0,s.t)("comments.add_reaction"),onClick:e.onClick,"aria-label":(0,s.t)("comments.add_reaction"),"data-testid":"add-reaction-button","data-fullscreen-intercept":e["data-fullscreen-intercept"],children:(0,i.jsx)(r.A,{})})}function x(e){let{reactions:t,collapseOverflow:n,onClickExisting:o,children:r,prependToList:d}=e,l=a.useRef(null),m=a.useRef({}),[u,h]=a.useState(null),[f,p]=a.useState(!n);a.useLayoutEffect(()=>{if(!l.current)return;let{width:e}=l.current.getBoundingClientRect(),n=-parseInt("10px")+parseInt("1px"),i=0;for(let a of t){let o=m.current[a.emoji];if(!o)return;if((n+=parseInt("10px")+o.getBoundingClientRect().width)>e||i===t.length-1&&n+40+parseInt("10px")>e)break;i+=1}h(i)},[t]);let g=null===u?null:t.length-u,b=t.map((t,n)=>{let a=o?e=>o(t,e):void 0;return(0,i.jsx)(v,{reaction:t,onClick:a,ref:e=>m.current[t.emoji]=e,visible:f||e.addedReaction||null===u||n<u},t.emoji)}),y=!(f||e.addedReaction)&&null!==g&&g>0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:c()({"reactions--reactionList--xryKj":!0,"reactions--singleRow--I2wbQ":y,"reactions--maxDoubleRow--vOtiU":!(f||e.addedReaction)&&null===g}),ref:l,children:[...d??[],b,!y&&r]}),y&&(0,i.jsx)("div",{className:"reactions--showMoreBtn--ptxZW",children:(0,i.jsx)("button",{className:_,onClick:()=>{p(!0)},"data-testid":"show-more-reactions-button",children:(0,s.tx)("comments.num_hidden_more",{numHidden:g})})})]})}},273291(e,t,n){n.d(t,{I:()=>S});var i=n(239976),a=n(105652),o=n(645186),r=n(878521),s=n(757253),d=n(850159),c=n(741542),l=n(335127),m=n(181645),u=n(429163),h=n(883652),f=n(870527),p=n(408493),_=n(328151);function g(e){let t=function(e,t=(0,p.Gq)().getPrimaryLocale(!1)){return new Intl.DateTimeFormat(t,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}).format(f.A.utc(e).toDate())}(e.date,e.locale);return(0,i.jsx)("span",{"data-tooltip-type":_.Ib.TEXT,"data-tooltip":t,children:e.children})}var b=n(520435),y=n(791118),v=n(222541),k=n(290133),x=n(34183),C=n(947234),j=n(565095),w=n(928814),E=n(694151),R=n(803126),T=n(236542),I=n(490753),N=n(985373),P=n(389218),A=n(519763);let O=(0,i.jsx)("div",{className:A.SD,"data-testid":"thread-comment-loading-avatar"});function M(e){let t=!e.hideReactions,n=e.comment,o=(0,x.AK)(n.id)>0,l=!!n.isPendingFromSinatra,f=!!n.isSaving,p=(0,c.getFeatureFlags)().comments_faster_saving_ux?f:l;a.useEffect(()=>{let{uuid:e}=n;if(e&&!p){let t=u.sn.get(`comment_reply_creation_${e}`);if(t&&t.isRunning&&!t.isUnreliable){let t=u.sn.tryStop(`comment_reply_creation_${e}`);t&&(0,m.sx)("comment_reply_creation",{elapsedMs:t},{forwardToDatadog:!0})}}},[n,p]);let _=!l&&!e.hideOverflowMenu&&n.user_id===e.user?.id,b=(0,i.jsx)(E.Ro,{entity:n.user,size:24,className:A.Du});return(0,i.jsxs)("div",{className:`${e.isQuickReplyThreadView?A.In:A.Lo}`,children:[(0,i.jsxs)("div",{className:`${e.isQuickReplyThreadView?A.xH:A.k8}`,children:[(0,i.jsxs)("div",{className:A.zl,children:[p?O:e.communityAuthorLink?(0,i.jsx)(r.N,{href:e.communityAuthorLink.href,onClick:e.communityAuthorLink.onClick,children:b}):b,e.communityAuthorLink?(0,i.jsx)(s._,{href:e.communityAuthorLink.href,onClick:e.communityAuthorLink.onClick,style:{cursor:"pointer"},className:A.WO,children:(0,i.jsx)("h3",{dir:"auto",children:n.user.handle})}):(0,i.jsx)("h3",{className:A.WO,dir:"auto",children:n.user.handle}),p?(0,i.jsx)("div",{className:A.YD,children:(0,d.tx)("comments.in_a_moment")}):(0,i.jsx)("div",{className:A.YD,children:(0,i.jsx)(g,{date:n.created_at,children:(0,i.jsx)(h.h1,{capitalize:!0,date:n.created_at})})}),e.metaAddon]}),(0,i.jsx)("div",{className:A.g2,children:_&&(0,i.jsx)(T.V,{label:(0,d.t)("comments.comment_actions"),comment:n,recordingKey:"threadComment.commentActionsButton",possibleActions:e.overflowMenuActions,onDelete:e.onDelete})})]}),(0,i.jsxs)("div",{tabIndex:-1,ref:e.threadCommentRef,onMouseDown:w.dG,className:`${e.isQuickReplyThreadView?A.lo:A.GI}`,"data-testid":"thread-comment-message",children:[(0,i.jsx)(v.HH,{commentId:n.id,messageMeta:n.message_meta,className:A.Qq,showEditedIndicator:e.showEditedIndicator}),t&&!o&&e.user&&(0,i.jsx)(L,{comment:e.comment,currentUser:e.user,isPendingComment:l,threadCommentRef:e.threadCommentRef}),!t&&(0,i.jsx)("div",{className:A.ex})]}),n.attachments&&(0,i.jsx)(y.a,{attachments:n.attachments,fileKey:e.comment.key,canEdit:e.comment.user_id===e.user?.id,threadCommentRef:e.threadCommentRef}),t&&o&&e.user&&(0,i.jsx)("div",{className:A.WJ,children:(0,i.jsx)(D,{comment:e.comment,currentUser:e.user,isPendingComment:l,isQuickReplyThreadView:e.isQuickReplyThreadView,threadCommentRef:e.threadCommentRef})})]})}function S(e){let t,n,{dispatch:r,comment:s,prevAuthor:c}=e,m=a.useRef(null);t=(0,o.d4)(e=>e.comments.editingComment),n=(0,l.ZC)(t),a.useEffect(()=>{t||n?.id!==s.id||m.current?.focus()},[t,n,s.id,m]);let u=a.useCallback(e=>{r(b.Df({id:s.id,key:s.key,messageMeta:e}))},[r,s]),h=a.useCallback(e=>{r(b.uy({id:s.id,key:s.key,attachmentId:e.id,attachment:e}))},[r,s]),f=a.useCallback(e=>{r(b.uy({id:s.id,key:s.key,attachmentId:e,attachment:null}))},[s.id,s.key,r]),p=a.useCallback(()=>{r(b.pD())},[r]),_=function(e){let t=(0,o.wA)(),n=a.useMemo(()=>e?{view:"communityHub",subView:"handle",handle:e}:void 0,[e]),i=(0,o.d4)(e=>n?(0,P.Np)(e,n):void 0),r=a.useMemo(()=>n?(0,I.Gc)(e=>{e.preventDefault(),t(N.sf(n))}):void 0,[n,t]);if(n&&i&&r)return{href:i,onClick:r}}(s.profile_handle),g=c!==s.user_id;if(!e.editingComment||e.editingComment.id!==s.id)return(0,i.jsx)(M,{comment:e.comment,communityAuthorLink:_,hideReactions:e.hideReactions,isQuickReplyThreadView:e.isQuickReplyThreadView,metaAddon:e.metaAddon,onDelete:e.onDelete,overflowMenuActions:e.overflowMenuActions,showEditedIndicator:e.showEditedIndicator,threadCommentRef:m,user:e.user});{let{messageMeta:t,attachmentUpdates:n}=e.editingComment,a=Object.values(n?.attachments??{}),o=[...new Set(e.thread.comments.map(e=>e.user.handle))];return(0,i.jsx)(R.K,{allowAttachments:!0,attachments:a,authorChanged:g,authorNames:o,createdAt:s.created_at,deleteAttachment:f,dispatch:e.dispatch,editingExistingComment:!0,editorOnClear:e.editorOnClear,editorOnInsert:e.editorOnInsert,editorRef:e.editorRef,editorType:e.editorType,fileKey:e.thread.key,hideEmojiPicker:e.hideEmojiPicker,hyperlinkLocation:e.hyperlinkLocation,isDisabled:!1,mentionables:e.mentionables,messageMeta:t,mountInputFocused:e.mountInputFocused,onCancel:p,onSubmit:()=>e.submitEdit(s,t,n),placeholderText:(0,d.t)("comments.comment_n"),recordingKey:C.Dw.edit,setHyperlinkEditorRef:e.setHyperlinkEditorRef,setHyperlinkLocation:e.setHyperlinkLocation,setIsEditorFocused:e.setIsEditorFocused,submitText:(0,d.t)("comments.save"),threadId:e.thread.id,threadPosition:e.threadPosition,typeahead:e.typeahead,updateAttachment:h,updateMessage:u,user:s.user,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition})}}function D(e){let t=(0,o.wA)(),[n,r]=a.useState(!1),{reactionsApi:s}=(0,k.I_)(),d=(0,x.Tv)(e.comment.id,e.currentUser.id),c=s?(n,i)=>{i.stopPropagation(),t(b.z$({reactionsApi:s,id:e.comment.id,emoji:n.emoji,quickReply:!!e.isQuickReplyThreadView})),e.threadCommentRef.current?.focus()}:void 0;return"loaded"!==d.status?null:(0,i.jsx)(j.Kb,{reactions:d.data.typed,collapseOverflow:!0,onClickExisting:c,addedReaction:n,children:(0,i.jsx)(L,{comment:e.comment,currentUser:e.currentUser,isPendingComment:e.isPendingComment,onAddedReaction:()=>{r(!0)},isQuickReplyThreadView:e.isQuickReplyThreadView,threadCommentRef:e.threadCommentRef})})}function L(e){let t=(0,o.wA)(),{reactionsApi:n}=(0,k.I_)(),r=(0,o.d4)(e=>e.comments.emojiPicker),s=a.useMemo(()=>!!r?.visible&&r.commentsId===e.comment.id,[e.comment.id,r]);if(e.isPendingComment||!n)return null;let d=i=>{c(),e.onAddedReaction&&e.onAddedReaction(),t(b.z$({reactionsApi:n,id:e.comment.id,emoji:i.shortcodes,quickReply:!!e.isQuickReplyThreadView})),e.threadCommentRef.current?.focus()},c=()=>{t(b.RI({visible:!1})),e.threadCommentRef.current?.focus()};return(0,i.jsx)("div",{style:s?{opacity:1}:{},className:A.$S,children:(0,i.jsx)(j.ny,{onClick:n=>{n.stopPropagation();let i=n.currentTarget.getBoundingClientRect();t(b.RI({visible:!0,targetRect:i,commentsId:e.comment.id,onPick:d,onCancel:c}))},selected:s,"data-fullscreen-intercept":!0})})}},803126(e,t,n){n.d(t,{K:()=>l});var i=n(239976),a=n(105652),o=n(850159),r=n(608293),s=n(412427),d=n(842285),c=n(682950);function l(e){let t=a.useCallback(()=>{e.replyContainerRef?.current&&e.replyContainerRef.current.scrollIntoView({block:"end",behavior:"smooth"})},[e.replyContainerRef]),n=(0,i.jsx)(d.C,{allowAttachments:e.allowAttachments,ariaLabel:e.authorNames?(0,o.t)("fullscreen.accessibility.reply_to_comment_with_authors",{username:(0,r.Yx)(e.authorNames)}):(0,o.t)("fullscreen.accessibility.reply_to_comment"),attachments:e.attachments,authorChanged:e.authorChanged,className:e.className,createdAt:e.createdAt,deleteAttachment:e.deleteAttachment,dispatch:e.dispatch,editingExistingComment:e.editingExistingComment,editorOnClear:e.editorOnClear,editorOnInsert:e.editorOnInsert,editorRef:e.editorRef,editorType:e.editorType,errorFallback:(0,i.jsx)(d.e,{type:"thread"}),fallback:null,fileKey:e.fileKey,hideEmojiPicker:e.hideEmojiPicker,hyperlinkLocation:e.hyperlinkLocation,isDisabled:e.isDisabled,isEmojiPickerDisabled:e.isEmojiPickerDisabled,maintainSelectionOnFocus:e.maintainSelectionOnFocus,mentionables:e.mentionables,messageMeta:e.messageMeta,mountInputFocused:e.mountInputFocused,onCancel:e.onCancel,onEditStart:e.onEditStart,onSubmit:e.onSubmit,placeholderText:e.placeholderText,recordingKey:e.recordingKey,scrollToBottom:e.replyContainerRef&&t,setHyperlinkEditorRef:e.setHyperlinkEditorRef,setHyperlinkLocation:e.setHyperlinkLocation,setIsEditorFocused:e.setIsEditorFocused,submitText:e.submitText,threadId:e.threadId,threadPosition:e.threadPosition,typeahead:e.typeahead,updateAttachment:e.updateAttachment,updateMessage:e.updateMessage,user:e.user,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition});return(0,i.jsxs)("div",{className:c.MP,ref:e.replyContainerRef,children:[(0,i.jsx)("div",{className:c.i8,children:(0,i.jsx)(s.H8,{user:e.user||{}})}),n]})}},236542(e,t,n){n.d(t,{V:()=>b});var i=n(239976),a=n(105652),o=n(645186);if(2036!=n.j)var r=n(523924);if(2036!=n.j)var s=n(147911);if(2036!=n.j)var d=n(497817);if(2036!=n.j)var c=n(15369);var l=n(850159),m=n(520435),u=n(290133);if(2036!=n.j)var h=n(435626);var f=n(775067),p=n(865955),_=n(508295),g=n(388801);function b(e){let t=(0,u.I_)(),n=(0,o.wA)(),b=(0,_.iZ)(),y=(0,f.v)(),{manager:v,getTriggerProps:k}=s.b();(0,g.VX)(v);let x=a.useCallback(()=>!!v.isOpen&&(v.setOpen(!1),!0),[v]);(0,p.O1)(x,p.KD.MODAL);let C=t=>()=>{switch(t){case"edit":j();break;case"delete":e.onDelete(e.comment);break;case"copy_link":e.onCopyLink?e.onCopyLink(e.comment):y(e.comment);break;case"toggle_unread":w();break;default:(0,r.xb)(t)}},j=()=>{let{id:t,key:i,message_meta:a,attachments:o}=e.comment,r=(o||[]).reduce((e,t)=>(e[t.id]=t,e),{});n(m.Df({id:t,key:i,messageMeta:a,attachmentUpdates:{attachments:r,deleted:[]}}))},w=()=>{let i=t.commentReceipts;if(i){if(e.isUnread&&e.thread)return void n(m.AY({receiptsAPI:i,thread:e.thread}));n(m.QY({receiptsAPI:i,comment:e.comment}))}},E=e.comment.parent_id?(0,l.t)("comments.delete_comment"):(0,l.t)("comments.delete_thread"),R=e.isUnread?(0,l.t)("comments.mark_as_read"):(0,l.t)("comments.mark_as_unread"),T=(!e.possibleActions||e.possibleActions.includes("toggle_unread"))&&(0,i.jsx)(s.q7,{onClick:C("toggle_unread"),children:R},"toggle_unread"),I=(!e.possibleActions||e.possibleActions.includes("copy_link"))&&(0,i.jsx)(s.q7,{onClick:C("copy_link"),children:(0,l.tx)("comments.copy_link")},"copy_link"),N=(!e.possibleActions||e.possibleActions.includes("edit"))&&(0,i.jsx)(s.q7,{onClick:C("edit"),recordingKey:"commentOverflowMenu.editComment",children:(0,l.tx)("comments.edit")},"edit"),P=(!e.possibleActions||e.possibleActions.includes("delete"))&&(0,i.jsx)(s.q7,{onClick:C("delete"),recordingKey:"commentOverflowMenu.deleteComment",children:E},"delete"),A=e.comment.parent_id?[N,P]:[N],O=[];if(e.thread&&e.thread.id===e.comment.id)switch(e.thread.sidebarItemType){case h.kT.FEED_POST:O=[I];break;case h.kT.COMMENT_THREAD:case h.kT.LITMUS_COMMENT_THREAD:O=e.comment.user_id===b?.id?[T,I,P]:[T,I];break;default:(0,r.xb)(e.thread)}else e.comment.user_id===b?.id&&(O=O.concat(A));if(0===O.filter(Boolean).length)return null;let{onMouseDown:M,onPointerDown:S,...D}=k();return(0,i.jsxs)(s.bL,{manager:v,children:[(0,i.jsx)(d.d,{"aria-label":e.label,recordingKey:e.recordingKey,...D,children:(0,i.jsx)(c.J,{})}),(0,i.jsx)(s.mc,{children:O})]})}},775067(e,t,n){n.d(t,{v:()=>m});var i=n(105652),a=n(645186),o=n(904511),r=n(290589),s=n(94241),d=n(773201),c=n(83522);if(2036!=n.j)var l=n(487817);function m(){let e=(0,a.wA)(),t=(0,r.sn)(),n=(0,d._6)(),m="prototype"===n.view,u=(0,s.q5)(),h=m?n.file.editor_type:u?.editorType;return i.useCallback(n=>{let i=(0,c.jN)({file:{key:n.key,editorType:h||l._Y.DESIGN},base:m?"proto":"file",nodeId:n.client_meta?.node_id,allowDefaulting:!1,commentId:n.parent_id??n.id,...t});return e(o.S({url:i}))},[e,t,m,h])}},225394(e,t,n){n.d(t,{t:()=>d});var i=n(105652),a=n(181645),o=n(125717),r=n(94241),s=n(508295);function d(e,t){let[n,d]=(0,i.useState)(!1),c=(0,s.TA)(),[l]=(0,i.useState)(()=>performance.now()),m=(0,r.tS)(),u=o.xK.loadID();(0,i.useEffect)(()=>{d(!1)},[u]),(0,i.useEffect)(()=>{e((e,t)=>{n||((0,a.sx)(e,{start_time:l,end_time:performance.now(),file_key:m,user_id:c,load_id:u,...t}),d(!0))})},[...t||[],l,n,u,m])}},785046(e,t,n){if(n.d(t,{aT:()=>r,cM:()=>o}),2036!=n.j)var i,a=n(523924);var o=2036!=n.j?((i=o||{}).NODE="node",i.IMAGE="image",i.VIDEO="video",i.PROTOTYPE="prototype",i):null;function r(e){switch(e.type){case"node":return!0;case"image":return"image/gif"!==e.mediaType;case"video":case"prototype":return!1;default:(0,a.xb)(e)}}},158078(e,t,n){n.d(t,{E:()=>d});var i=n(239976),a=n(105652),o=n(850159),r=n(916290),s=n(133960);let d=(0,n(936652).Ju)(function({comment:e,threadLength:t,onCancel:n,onClose:d,onConfirm:c,onConfirmComplete:l,...m}){let u=a.useCallback(()=>{c(),d(),l?.()},[d,c,l]),h=a.useCallback(()=>{d(),n?.()},[d,n]);return(0,i.jsx)(s.R,{autofocusConfirm:!0,onCancel:h,onConfirm:u,onClose:r.lQ,confirmText:(0,o.t)("general.delete"),destructive:!0,recordingKey:"commentDeleteConfirmModal",title:(0,o.t)("comments.delete_comment"),...m,children:!e||e.parent_id||1===t?(0,o.t)("comments.are_you_sure_you_want_to_delete_this_comment_this_action_cannot_be_undone"):(0,o.t)("comments.delete_confirmation_thread")})},"confirm-comment-deletion-modal")},930693(e,t,n){n.d(t,{gk:()=>o,iw:()=>a});let i="feed_post_";function a(e){return`${i}${e.replace(/-/g,"_")}`}function o(e){if(e.startsWith(i))return e.slice(i.length).replace(/_/g,"-");throw Error("Thread ID is not in valid format for feed post")}},708881(e,t,n){if(n.d(t,{i:()=>a,m:()=>o}),2036!=n.j)var i=n(785046);function a(e,t){let n=e.find(e=>e.type===i.cM.NODE),a=n?.mediumImageUrl||n?.preview_image_url||n?.image_url;if(a)return{thumbnail:a,padImage:!n.preview_image_url,thumbnailBackground:o(n,t)};let r=e.find(e=>e.type===i.cM.PROTOTYPE),s=r?.imageUrl;if(s)return{thumbnail:s,padImage:!1,thumbnailBackground:o(r,t)};let d=e.find(e=>e.type===i.cM.IMAGE),c=d?.mediumImageUrl||d?.preview_image_url||d?.url;if(c)return{thumbnail:c,padImage:!d?.preview_image_url,thumbnailBackground:o(d,t)};let l=e.find(e=>e.type===i.cM.VIDEO),m=l?.coverImage;return m?{thumbnail:m,padImage:!1,thumbnailBackground:o(l,t)}:{thumbnail:"",padImage:!1,thumbnailBackground:o(null,t)}}function o(e,t){return e?(0,i.aT)(e)?"backgroundColor"in e&&e.backgroundColor||t:"black":"var(--color-bg-secondary)"}},99828(e,t,n){n.d(t,{J:()=>r});var i=n(348065),a=n(105652),o=n(239976);let r=(0,a.memo)(function(e){return(0,i.O)()?(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M6.5 7c0 1.043.533 1.963 1.341 2.5A3 3 0 0 0 6.5 12c0 1.043.533 1.963 1.341 2.5A3 3 0 1 0 12.5 17v-2.764A3 3 0 1 0 16.159 9.5 3 3 0 0 0 14.5 4h-5a3 3 0 0 0-3 3m8 2a2 2 0 1 0 0-4h-2v4zm-2 3a2 2 0 1 0 4 0 2 2 0 0 0-4 0m-1 2h-2a2 2 0 1 1 0-4h2zm-2 1h2v2a2 2 0 1 1-2-2m2-6h-2a2 2 0 1 1 0-4h2z",clipRule:"evenodd"})}):(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M7 7c0 1.043.533 1.963 1.341 2.5A3 3 0 0 0 7 12c0 1.043.533 1.963 1.341 2.5A3 3 0 1 0 13 17v-2.764A3 3 0 1 0 16.659 9.5 3 3 0 0 0 15 4h-5a3 3 0 0 0-3 3m8 2a2 2 0 1 0 0-4h-2v4zm-2 3a2 2 0 1 0 4 0 2 2 0 0 0-4 0m-1 2h-2a2 2 0 1 1 0-4h2zm-2 1h2v2a2 2 0 1 1-2-2m2-6h-2a2 2 0 1 1 0-4h2z",clipRule:"evenodd"})})})},43337(e,t,n){n.d(t,{T:()=>o});var i=n(105652),a=n(239976);let o=(0,i.memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"m12.705 15.816-.705-.7-.705.7L9 18.096V6.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v11.597zm1.59 2.99L12 16.526l-2.295 2.28c-.631.627-1.705.18-1.705-.71V6.5A1.5 1.5 0 0 1 9.5 5h5A1.5 1.5 0 0 1 16 6.5v11.597c0 .89-1.074 1.336-1.705.71",clipRule:"evenodd"})})})}}]);

//# debugId=8bb55d9c-b265-5b75-bdad-39ad652092c0

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/b5da8199432fcf35c15e9cd0b9ee0d4813a6a0b5/9387-7650aa065a5a93aa.min.js.map