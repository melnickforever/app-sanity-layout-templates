"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="36a87e14-501a-5ac6-b3f2-1763f3410511")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([["3416"],{958850(e,t,r){r.d(t,{Om:()=>o,R:()=>d,j6:()=>i,o:()=>s,r$:()=>a,rR:()=>l,xn:()=>n});let n="interactive_thumbnail--thumbnail--weL9A",l="interactive_thumbnail--onboardingTarget--r3Gag",a="interactive_thumbnail--dots--uCufy",i="interactive_thumbnail--dotHoverArea--C3Tz9",o="interactive_thumbnail--dot--ULKPh",s="interactive_thumbnail--activeDot--JtmqS",d="interactive_thumbnail--hidden--xiiPn"},69950(e,t,r){r.d(t,{Az:()=>E});var n=r(105652);if(1464==r.j)var l=r(741542);var a=r(350923),i=r(779757),o=r(63633),s=r(870527),d=r(668522),c=r(153480),u=r(425145),p=r(653982),f=r(473397),_=r(271332),h=r(487817),m=r(644350);let y=(0,a.Iz)(({orgId:e})=>(0,a.eU)(t=>e?t((0,c.K)((0,m.WF4)({orgId:e}))).transform(({org:e})=>{let t=!!(0,d.oA)(e?.isSalesAssistedPlanProperty)?.value,r=!!(0,d.oA)(e?.subscriptionShouldNotAutoRenewPlanProperty);return{isSalesAssisted:t,noTosAcceptanceKey:(0,d.oA)(e?.plan?.termsOfServiceAcceptanceByTermsKey)?.termsKey!==h.Lb.SEATS_MODEL_BILLING_2025,shouldNotAutoRenew:r}}):i.Qw.disabled()));function E(e){let t,r,i,c=e?.id??null,h=!(0,f.CT)(),{warningStatus:m,renewalDate:E,warningType:b}=function(e){let t=(0,o.Xf)(e),r=t.data?.analyze_data_contract_v2_start,n=r?(0,s.A)(r):null,l=(0,u.w)();function a(e,t,r){return{warningType:e,renewalDate:t,warningStatus:r}}if(n&&l.isBefore(n))if(30>=n.diff(l,"day"))return a("error",n,"loaded");else if(90>=n.diff(l,"day"))return a("warning",n,"loaded");else return a(null,n,"loaded");return a(null,n,t.status)}(c),g=!!(0,l.getFeatureFlags)().order_form_billing_terms_banner,v=(0,_.n)(),x=(0,a.md)((0,n.useMemo)(()=>y({orgId:c}),[c])),F=(0,d.oA)(x.data),w=function({orgCreatedAt:e,isSalesAssisted:t,noTosAcceptanceKey:r,shouldNotAutoRenew:n,onExclusionList:l,isAdminView:a,isTermsOfServiceUpdateOn:i}){return!!(e&&(0,p.d)({date:new Date(e)})&&t&&r&&(n||l)&&(a||i))}({orgCreatedAt:e?.created_at,isSalesAssisted:!!F?.isSalesAssisted,noTosAcceptanceKey:!!F?.noTosAcceptanceKey,shouldNotAutoRenew:!!F?.shouldNotAutoRenew,onExclusionList:h,isAdminView:v,isTermsOfServiceUpdateOn:(t=!!(0,l.getFeatureFlags)().terms_of_service_may_2025_update,r=(0,u.w)(),i=!!E&&r.isBefore(E)&&30>=E.diff(r,"day"),t&&i)}),I=(0,n.useMemo)(()=>"loaded"===x.status&&!!w,[x.status,w]);return"loading"===x.status||"loading"===m?(0,d.Xm)():(0,d.gB)({isEligible:g&&I,renewalDate:E,warningType:b})}},653982(e,t,r){r.d(t,{d:()=>a});var n=r(870527),l=r(838719);function a(e){let t=(0,l.initialOptions)().analyze_data_flow_v2_until;return!!t&&(0,n.A)(e.date).isBefore((0,n.A)(t))}},875604(e,t,r){r.d(t,{f:()=>c,x:()=>d});var n=r(239976);if(1464==r.j)var l=r(147911);if(1464==r.j)var a=r(391119);var i=r(865804);if(1464==r.j)var o=r(113641);var s=r(341234);let d="FILE_CREATION_OMNICREATE_DROPDOWN";function c({menuItems:e,"data-onboarding-key":t,trackingProperties:r}){let c=e.newFiles.map(({key:e,...t})=>(0,n.jsx)(s.e,{...t},e));return(0,n.jsx)(a.a,{mode:"match",children:(0,n.jsx)(l.mc,{"data-onboarding-key":t,children:(0,n.jsxs)(i.fu,{name:o.e0.RESOURCE_CREATION_DROPDOWN,properties:{...r,fileCreationDefaultsDropdownType:d},onlyOnce:!0,children:[(0,n.jsx)(l.YJ,{children:c}),function(){if(!e.import)return null;let{key:t,...r}=e.import;return(0,n.jsx)(s.e,{...r},t)}()]})})})}},341234(e,t,r){r.d(t,{e:()=>p,_:()=>u});var n,l=r(239976);if(1464==r.j)var a=r(147911);if(1464==r.j)var i=r(67548);if(1464==r.j)var o=r(145906);var s=r(850159);r(574988);var d=r(623620);function c({text:e,disabled:t}){return(0,l.jsx)(d.Ex,{color:t?d.zE.DISABLED:d.zE.DEFAULT_TRANSLUCENT,text:e})}var u=1464==r.j?((n=u||{}).REQUEST_UPGRADE="REQUEST_UPGRADE",n.REQUEST_SENT="REQUEST_SENT",n.ALPHA="ALPHA",n.BETA="BETA",n):null;function p(e){let t=(0,i.G)(),r=e.isDisabled||e.isLoading;return(0,l.jsx)(o.J,{brand:e.brand,children:(0,l.jsx)(a.q7,{...{0:{className:"x19y5rnk xb3r6kr x1iorvi4 xjkvuk6 xet2fuk x1db2dqx x12ro6kh x1pcmjzl xmh6jz9 x1hop9l x1sd2uan x1g40iwv"},2:{className:"x19y5rnk xb3r6kr x1iorvi4 xjkvuk6 xet2fuk x1db2dqx x12ro6kh xmh6jz9 x1hop9l x1sd2uan x1g40iwv xc4ye4f"},1:{className:"x19y5rnk xb3r6kr x1iorvi4 xjkvuk6 xet2fuk x1db2dqx x12ro6kh xmh6jz9 x1hop9l x1sd2uan x1g40iwv x1fukjz5"},3:{className:"x19y5rnk xb3r6kr x1iorvi4 xjkvuk6 xet2fuk x1db2dqx x12ro6kh xmh6jz9 x1hop9l x1sd2uan x1g40iwv x1fukjz5"}}[("dark"===t.color)<<1|!!e.brand],onClick:e.onClick,"data-testid":e.isLoading?void 0:e.dataTestId,disabled:r,"data-onboarding-key":e.dataOnboardingKey,children:(0,l.jsxs)("div",{...{className:"x78zum5 x6s0dn4 xh8yej3"},children:[(0,l.jsxs)("div",{...{className:"x78zum5 x167g77z x6s0dn4 x1iyjqo2"},children:[(0,l.jsx)("div",{...{0:{},2:{className:"x1aue78i"},1:{className:"xe5c7bq"},3:{className:"xe5c7bq"}}[!!e.brand<<1|!!e.isDisabled],children:e.icon}),(0,l.jsx)("span",{...{0:{className:"x17akokd x1qxcl5b xclx6tv x1akne3o"},1:{className:"x17akokd x1qxcl5b xclx6tv x3vvef7"}}[0|!!e.isDisabled],children:e.title})]}),e.badges?(0,l.jsx)("div",{...{className:"x78zum5 x1c4vz4f x6s0dn4"},children:e.badges.map(e=>(0,l.jsx)(c,{text:f(e),disabled:r},e))}):null]})})})}let f=e=>{switch(e){case"REQUEST_UPGRADE":return(0,s.t)("upgrades.request");case"REQUEST_SENT":return(0,s.t)("upgrades.request_sent");case"ALPHA":return(0,s.t)("file_browser.creation_buttons.alpha");case"BETA":return(0,s.t)("file_browser.creation_buttons.beta")}}},207187(e,t,r){r.d(t,{q:()=>c});var n=r(239976),l=r(395227),a=r(71239),i=r(297151),o=r(732632),s=r(850159),d=r(687497);let c=(0,r(936652).Ju)(function(e){let{open:t,onClose:r,onRemove:c,fileName:u}=e,p=l.hS({open:t,onClose:r}),f=(0,n.jsx)(d.E,{fontWeight:"semi-bold",children:u}),_=async()=>{await c(),r()};return(0,n.jsx)(a.bL,{manager:p,width:"md",children:(0,n.jsxs)(i.vo,{children:[(0,n.jsx)(i.Y9,{children:(0,n.jsx)(i.hE,{children:(0,s.tx)("shared_with_you.confirm_delete.remove_file")})}),(0,n.jsx)(i.nB,{children:(0,s.tx)("shared_with_you.confirm_delete.body",{file_name:f})}),(0,n.jsx)(i.wi,{children:(0,n.jsxs)(i.jk,{children:[(0,n.jsx)(o.$n,{variant:"secondary",onClick:r,children:(0,s.tx)("shared_with_you.confirm_delete.cancel")}),(0,n.jsx)(o.$n,{variant:"destructive",onClick:_,children:(0,s.tx)("shared_with_you.confirm_delete.remove")})]})})]})})})},102959(e,t,r){let n;r.d(t,{a:()=>i});var l=r(765326),a=r(936652);function i(){return n??=(0,a.Ju)(l.A.createLazyComponent(()=>Promise.all([r.e("905"),r.e("5493"),r.e("1617"),r.e("826"),r.e("7205"),r.e("7840"),r.e("7606"),r.e("5830"),r.e("8916"),r.e("5639"),r.e("8701"),r.e("1366"),r.e("8783"),r.e("1904"),r.e("9387"),r.e("907"),r.e("2749"),r.e("5693"),r.e("9931"),r.e("8162"),r.e("3416"),r.e("6467"),r.e("3582"),r.e("4395"),r.e("3278")]).then(r.bind(r,553436)).then(e=>e.AddPinModal),(0,a.Ij)("AddPinModal")))}},642135(e,t,r){let n;r.d(t,{I:()=>i});var l=r(765326),a=r(936652);function i(){return n??=(0,a.Ju)(l.A.createLazyComponent(()=>Promise.all([r.e("905"),r.e("5493"),r.e("1617"),r.e("826"),r.e("7205"),r.e("7840"),r.e("7606"),r.e("5830"),r.e("8916"),r.e("5639"),r.e("8701"),r.e("1366"),r.e("8783"),r.e("1904"),r.e("9387"),r.e("907"),r.e("2749"),r.e("5693"),r.e("9931"),r.e("8162"),r.e("3416"),r.e("6467"),r.e("3582"),r.e("4395"),r.e("3278")]).then(r.bind(r,342068)).then(e=>e.DeletePinModal),(0,a.Ij)("DeletePinModal")))}},636080(e,t,r){let n;r.d(t,{l:()=>i});var l=r(765326),a=r(936652);function i(){return n??=(0,a.Ju)(l.A.createLazyComponent(()=>Promise.all([r.e("905"),r.e("5493"),r.e("1617"),r.e("826"),r.e("7205"),r.e("7840"),r.e("7606"),r.e("5830"),r.e("8916"),r.e("5639"),r.e("8701"),r.e("1366"),r.e("8783"),r.e("1904"),r.e("9387"),r.e("907"),r.e("2749"),r.e("5693"),r.e("9931"),r.e("8162"),r.e("3416"),r.e("6467"),r.e("3582"),r.e("4395"),r.e("3278")]).then(r.bind(r,247045)).then(e=>e.EditPinModal),(0,a.Ij)("EditPinModal")))}},78732(e,t,r){r.d(t,{Z:()=>tY});var n,l=r(239976),a=r(105652),i=r(645186),o=r(741542),s=r(843489),d=r(350923),c=r(574988),u=r(645724),p=r(230191),f=r(947169),_=r(12633),h=r(928397),m=r(773201),y=r(710383),E=r(766632),b=r(622516),g=r(555235),v=r(812456),x=r(799680),F=r(850159),w=r(587047),I=r(985373),T=r(328151),k=r(497935),R=r(349145),O=r(104782),S=r(280891),C=r(422642),A=r(140390),j=r(249318);function P(e){let t=e?.type??null,r=(0,d.md)(E.J),n=(0,d.md)(E.jM),l=(0,d.md)(E.P_),[i,o]=(0,d.fp)(C.R9),s=(0,d.md)(C.Q8),c=(0,d.md)(C.BA),u=(0,d.md)(C.sC),p=(0,d.md)(_.hO.isFragmentSearchAtom),[f,h]=(0,d.fp)((0,E.l4)(t)),m=(0,j.L)(p?"fragment_search_modal":"file_browser",u,!0);return a.useCallback(()=>{if(!e||!f)return;let t=null;e.type===A.WY.RESOURCE&&f.type===A.WY.RESOURCE?t=null:e.type===A.WY.CREATOR&&f.type===A.WY.CREATOR?t=(0,O.C8)(e,O.M2.REMOVE_FROM_GROUP,f):e.type===A.WY.SPACE&&f.type===A.WY.SPACE&&(t=(0,O.q1)(e,O.M2.REMOVE_FROM_GROUP,f)),h(t);let a=(0,O.gh)(t||{type:e.type,value:null},n,r,l,i??void 0);o(a?.searchModelType??null),m(s,A.uH.FILES,a,c,!1,!1)},[e,r,f,n,l,c,m,i,s,h,o])}var N=r(645569);let L="facet_pills--type---RCNh";function M({previewIsShown:e}){let t=(0,d.md)(E.L8),r=(0,d.md)(E.rG);return(0,l.jsx)(l.Fragment,{children:t.map((t,n)=>(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,l.jsx)(D,{facet:t,index:n,isActive:(0,k.c2)(t,r),previewIsShown:e},`pill-${n}`):(0,l.jsx)(W,{facet:t,index:n,isActive:(0,k.c2)(t,r)},`pill-${n}`))})}function D({facet:e,index:t,isActive:r,previewIsShown:n}){let i=a.useRef(null),o=(0,d.md)(E.L8),s=(0,d.Xr)(E.rG),c=P(e),u=(0,O.gl)(e.type),p=(0,O.FR)(e),f=(0,S.k)(),_=a.useCallback(t=>{r?(s(null),i.current?.blur()):(t.stopPropagation(),s(e),i.current?.focus())},[e,r,s]),h=a.useCallback(n=>{r&&(("Backspace"===n.key||"Delete"===n.key)&&(c(),f((0,O.oM)(e),A.jD.PILL,A.uR.AUTOCOMPLETE)),"ArrowLeft"===n.key&&t>0&&s(o[t-1]),"ArrowRight"===n.key&&(t<o.length-1?s(o[t+1]):s(null)))},[o,t,r,c,s,f,e]),m=a.useCallback(e=>{n&&_(e)},[n,_]);return a.useEffect(()=>{r&&i.current?.focus()},[r]),(0,l.jsx)("span",{className:r?"facet_pills--activePill--ujE04 facet_pills--pill--11FPS faceted_search_bar--activePill--5IYCE":"facet_pills--pill--11FPS",children:(0,l.jsxs)(R.v,{variant:"primary",selected:r,hasCloseButton:!0,onKeyDown:h,onMouseDown:m,tabIndex:0,ref:i,onClose:c,children:[(0,l.jsx)("span",{className:L,children:u}),p]})})}function W({facet:e,index:t,isActive:r}){let n=a.useRef(null),o=(0,i.d4)(e=>e.modalShown?.type===N.R),s=(0,d.md)(E.L8),c=(0,d.Xr)(E.rG),u=P(e),p=(0,O.gl)(e.type),f=(0,O.FR)(e),_=(0,S.k)(),h=a.useCallback(t=>{r?(c(null),n.current?.blur()):(t.stopPropagation(),c(e),n.current?.focus())},[e,r,c]),m=a.useCallback(n=>{r&&(("Backspace"===n.key||"Delete"===n.key)&&(u(),_((0,O.oM)(e),A.jD.PILL,A.uR.AUTOCOMPLETE)),"ArrowLeft"===n.key&&t>0&&c(s[t-1]),"ArrowRight"===n.key&&(t<s.length-1?c(s[t+1]):c(null)))},[s,t,r,u,c,_,e]),y=a.useCallback(e=>{o&&h(e)},[o,h]);return a.useEffect(()=>{r&&n.current?.focus()},[r]),(0,l.jsxs)("button",{className:r?"facet_pills--activePill_DEPRECATED--8WzJB facet_pills--pill_DEPRECATED--x5yCZ faceted_search_bar--activePill--5IYCE":"facet_pills--pill_DEPRECATED--x5yCZ",onKeyDown:m,onMouseDown:y,ref:n,children:[(0,l.jsx)("span",{className:L,children:p}),f]})}var B=r(548735),K=r(87557),U=((n=U||{}).TYPE="TYPE",n.TYPE_AND_VALUES="TYPE_AND_VALUES",n);let V=(0,d.eU)([]),Y=(0,d.eU)(e=>e(V),(e,t,r)=>{t(V,r)}),H=(0,d.eU)(e=>{let t=e(E.L8),r=e(E.zD),n=e(C.Q8),l=e(C.BA),a=G(t,r);if(n.length<2||0===a.length||l)return null;for(let e of a){let t=X((0,O.qM)(e)+":"),r=X(n,!0).lastIndexOf(t);if(r>=0)return{suggestionType:"TYPE",facetType:e,facetTypeIndex:r,valueToQuery:n.slice(r+t.length).trim()};let l=X(n).split(" ").pop();if(l&&Q(l,t))return{suggestionType:"TYPE",facetType:e,facetTypeIndex:n.lastIndexOf(l),valueToQuery:null}}return null}),z=(0,d.eU)(e=>{let t=e(H);if(!t||null==t.valueToQuery)return null;let r=t.valueToQuery;if(t.facetType===A.WY.RESOURCE){let n=e(E._4),l=n.map(O.S2),a=[];return(n.forEach((e,t)=>{Q(r,l[t])&&a.push(e)}),0===a.length)?null:{suggestionType:"TYPE_AND_VALUES",facetType:A.WY.RESOURCE,facetTypeIndex:t.facetTypeIndex,facetValues:a.slice(0,6)}}let n=e(Y);if(0===n.length)return null;if(t.facetType===A.WY.CREATOR){let r=(0,K.nv)(n,A.dC.USERS);if(0===r.length)return null;let l=e(E.J),a=l?.value||[],i=r.filter(e=>!(0,k.Jj)(a,e)).slice(0,5);if(0===i.length)return null;let o=i.map(e=>({type:A.WY.CREATOR,value:e}));return{suggestionType:"TYPE_AND_VALUES",facetType:A.WY.CREATOR,facetTypeIndex:t.facetTypeIndex,facetValues:o}}if(t.facetType===A.WY.SPACE){let r=e(E.P_),l=e(E.q$),a=[];if(l.includes(A.qy.FOLDER)){let e=r?.value?.folders||[],t=(0,K.nv)(n,A.dC.PROJECTS).slice(0,5).filter(t=>!(0,k.Jj)(e,t)).map(e=>({type:A.WY.SPACE,spaceType:A.qy.FOLDER,value:e}));a.push(...t)}if(l.includes(A.qy.TEAM)){let e=r?.value?.teams||[],t=(0,K.nv)(n,A.dC.TEAMS).slice(0,5).filter(t=>!(0,k.Jj)(e,t)).map(e=>({type:A.WY.SPACE,spaceType:A.qy.TEAM,value:e}));a.push(...t)}if(l.includes(A.qy.ORG)){let e=r?.value?.orgs||[],t=(0,K.nv)(n,A.dC.ORGS).slice(0,5).filter(t=>!(0,k.Jj)(e,t)).map(e=>({type:A.WY.SPACE,spaceType:A.qy.ORG,value:e}));a.push(...t)}return 0===a.length?null:{suggestionType:"TYPE_AND_VALUES",facetType:A.WY.SPACE,facetTypeIndex:t.facetTypeIndex,facetValues:a.slice(0,5)}}return null}),$=(0,d.eU)(e=>{let t=e(H);return e(z)||t}),q=(0,d.eU)(null);function G(e,t){let r=new Set(t);(0,O.sd)(A.WY.RESOURCE,e)&&r.delete(A.WY.RESOURCE);let n=0,l=0;for(let t of e)t.type===A.WY.CREATOR&&n++,t.type===A.WY.SPACE&&l++;return n>=O.hp&&r.delete(A.WY.CREATOR),l>=O.hp&&r.delete(A.WY.SPACE),Array.from(r)}let Q=(e,t)=>X(t).startsWith(X(e)),X=(e,t)=>t?e.toLocaleLowerCase():e.toLocaleLowerCase().trim().replace(/\s+/g," ");var J=r(349114);function Z(){let e=(0,d.Xr)(Y),t=(0,d.md)(H),r=t?.facetType,n=t?.valueToQuery??null,l=(0,J.F)(n,r);a.useEffect(()=>{"loading"===l.status||e(l.data?l.data:[])},[l,e])}function ee({hideSearchPreview:e,autocomplete:t,searchInputRef:r,expanded:n,expandModal:o,collapseModal:s}){let c=(0,i.wA)(),u=(0,m._6)(),p=(0,y.X0)(u),[f,k]=a.useState(!1),R=a.useRef(null),[O,S]=(0,d.fp)(C.Q8),A=(0,d.md)(C.BA),N=(0,d.md)(C.sC),L=(0,d.md)(E.oT),D=(0,d.md)(E.L8),[W,K]=(0,d.fp)(E.rG),U=(0,d.Xr)(E.q4),V=(0,d.md)(_.hO.isFragmentSearchAtom),Y=(0,j.y)(V?"fragment_search_modal":p?"desktop_new_tab":"file_browser",N,!0),H=P(W),{activeValue:z,setActiveValue:$}=a.useContext(B.M),q="[role=option]",G=t?.refs.scroll,Q=a.useCallback(()=>{let e=G?.current,t=e?.querySelector(q);return t?t.id:void 0},[G]),X=a.useCallback(()=>{let e=G?.current,t=e?.querySelectorAll(q);return t?.[t.length-1]?t?.[t.length-1].id:void 0},[G]);Z();let J=a.useCallback(()=>{R.current?.scrollTo({left:R.current.scrollWidth})},[]);a.useEffect(()=>{let e=e=>{e.metaKey&&"/"===e.key&&(r.current?.focus(),J())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[J,r]);let ee=a.useCallback(t=>{S(t.target.value),e||Y(t.target.value,A,!1,!1)},[A,Y,S,e]),et=a.useCallback(e=>{if(f)return;"Escape"===e.key||"Tab"===e.key?s?.():o?.();let{selectionStart:t,selectionEnd:r}=e.currentTarget,n=0===t&&0===r,l=0===O.trim().length&&0===D.length;if("Enter"===e.key&&void 0===z){if(l)return;Y(O,A,!0,!0),V&&s?.()}!A&&(("Backspace"===e.key||"Delete"===e.key)&&n&&(W?H():K(L)),"ArrowLeft"===e.key&&n&&K(L))},[f,W,A,L,D.length,Y,O,H,K,V,z,s,o]),er=a.useCallback(()=>{S(""),c(h._z({})),U(),A&&(0,y.kV)(u)&&c(I.sf(u.previousView??{view:"recentsAndSharing"}))},[U,c,u,A,S]),en=a.useCallback(e=>{if(e.stopPropagation(),e.preventDefault(),r.current?.focus(),n||o?.(),r.current){let e=r.current.value.length;r.current.setSelectionRange(e,e)}W&&K(null)},[W,K,r,n,o]),el=a.useCallback(e=>{e.stopPropagation(),e.preventDefault()},[]);a.useEffect(()=>{W||A||!n||(r.current?.focus(),$(void 0))},[W,D,O,A,$,n,r]);let ea=0!==D.length,ei=0===O.length&&(!ea||A);a.useLayoutEffect(()=>{if(!r||!r.current)return;if(ei){r.current.style.width="calc(100% - 10px)";return}let e=document.createElement("span");e.innerHTML=(0,w.p)(O.replace(/<|>/,"W")),e.style.font="11px Inter",document.body.appendChild(e);let t=e.getBoundingClientRect().width+8;r.current.style.width=`${t}px`,e.remove(),J()},[O,J,r,ei]);let eo=!A&&!p,es=a.useMemo(()=>t?.getInputProps({onKeyDown:et,onFocus:o})??{ref:r,onKeyDown:et,onFocus:o},[t,et,r,o]),ed={...es,onKeyDown:a.useCallback(e=>{if("ArrowUp"===e.key&&void 0!==z&&Q()===z)G.current?.scrollTo({top:0}),e.preventDefault(),$(void 0);else{if("ArrowUp"===e.key&&void 0===z||"ArrowDown"===e.key&&void 0!==z&&X()===z)return;es.onKeyDown?.(e)}},[z,Q,X,es,$,G])};return(0,l.jsxs)(b.Y.Root,{className:"faceted_search_bar--searchBar--FO3mb search--searchContainerSidebarWithSelection--nmGHp search--_expandingSearchBoxSidebarContainerBase--C6eb2 search--searchContainerSidebar--WhHk4",onMouseDown:en,onClick:el,children:[(0,l.jsx)("div",{className:"faceted_search_bar--rightFadeContainer--NFGS6 faceted_search_bar--_fadeContainer--TZ-3N",children:(0,l.jsx)(v.W,{className:"faceted_search_bar--iconWrapper--0xWey","aria-hidden":!0})}),(0,l.jsxs)("div",{className:"faceted_search_bar--clipContainer--LZia-",ref:R,children:[eo&&(0,l.jsx)(M,{previewIsShown:n}),(0,l.jsx)(b.Y,{"aria-label":(0,F.t)("search.search_bar.placeholder_v2"),className:"faceted_search_bar--input--DXi7V","data-testid":"facetedSearchInput",id:"facetedSearchInput",onChange:(e,t)=>ee(t.event),onCompositionEnd:()=>k(!1),onCompositionStart:()=>k(!0),onMouseDown:e=>{e.stopPropagation(),o?.()},placeholder:ei?(0,F.t)("search.search_bar.placeholder_v2"):void 0,spellCheck:!1,value:O,...ed})]}),(!!O||ea)&&(0,l.jsx)("div",{className:"faceted_search_bar--leftFadeContainer--CFZP0 faceted_search_bar--_fadeContainer--TZ-3N","data-testid":"facetedSearchClear",children:(0,l.jsx)("div",{className:"faceted_search_bar--clearButtonWrapper--30-gF",children:(0,l.jsx)(g.K,{"aria-label":(0,F.t)("search.search_bar.clear"),"data-tooltip-type":T.Ib.TEXT,"data-tooltip":(0,F.t)("search.search_bar.clear"),onClick:er,actionOnPointerDown:!0,children:(0,l.jsx)(x.X,{})})})})]})}var et=r(859978),er=r(224542),en=r.n(er),el=r(295815),ea=r(584376),ei=r(692851),eo=r(38900),es=r(928814);function ed({hideSearchPreview:e}){let t=(0,i.wA)(),r=(0,m._6)(),n=(0,y.X0)(r),[o,c]=a.useState(!1),u=a.useRef(null),p=a.useRef(null),[f,b]=(0,d.fp)(C.Q8),k=(0,d.md)(C.BA),R=(0,d.md)(C.sC),O=(0,d.md)(E.oT),S=(0,d.md)(E.L8),[A,N]=(0,d.fp)(E.rG),L=(0,d.Xr)(E.q4),D=(0,d.md)(_.hO.isFragmentSearchAtom),W=(0,j.y)(D?"fragment_search_modal":n?"desktop_new_tab":"file_browser",R,!0),B=P(A);Z();let{setKeyboardNavigationElement:K,keyboardNavigationItem:U,isFocused:V,isFauxFocused:Y}=(0,ea.M3)({id:"faceted-search-bar",path:[0]});(0,s.h)(()=>{u.current&&K?.(u.current)});let H=a.useCallback(()=>{p.current?.scrollTo({left:p.current.scrollWidth})},[]);a.useEffect(()=>{let e=e=>{e.metaKey&&"/"===e.key&&(U?.focus(),U?.fauxFocus(),H())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[U,H]);let z=a.useCallback(t=>{b(t.target.value),e||W(t.target.value,k,!1,!1)},[k,W,b,e]),$=a.useCallback(e=>{if(o)return;let{selectionStart:r,selectionEnd:n}=e.currentTarget,l=0===r&&0===n,a=0===f.trim().length&&0===S.length;if("Enter"===e.key&&Y){if(a)return;W(f,k,!0,!0),D&&t(eo.Lo())}!k&&(("Backspace"===e.key||"Delete"===e.key)&&l&&(A?B():N(O)),"ArrowLeft"===e.key&&l&&N(O))},[Y,S.length,o,A,k,O,W,f,B,N,D,t]),q=a.useCallback(()=>{b(""),t(h._z({})),L(),k&&(0,y.kV)(r)&&t(I.sf(r.previousView??{view:"recentsAndSharing"}))},[L,t,r,k,b]),G=a.useCallback(e=>{if(e.stopPropagation(),e.preventDefault(),U?.focus(),U?.fauxFocus(),u.current){let e=u.current.value.length;u.current.setSelectionRange(e,e)}A&&N(null)},[A,U,N]),Q=a.useCallback(e=>{e.stopPropagation(),e.preventDefault()},[]);a.useEffect(()=>{V&&(U?.focus(),U?.fauxFocus(),H(),t(h.W0({entryPoint:D?"fragment_search_modal":"file_browser"})))},[t,V,U,H,D]),a.useEffect(()=>{A||k||(U?.focus(),U?.fauxFocus())},[A,S,U,f,k]);let X=0!==S.length,J=0===f.length&&(!X||k);a.useLayoutEffect(()=>{if(!u||!u.current)return;if(J){u.current.style.width="calc(100% - 10px)";return}let e=document.createElement("span");e.innerHTML=(0,w.p)(f.replace(/<|>/,"W")),e.style.font="11px Inter",document.body.appendChild(e);let t=e.getBoundingClientRect().width+8;u.current.style.width=`${t}px`,e.remove(),H()},[f,H,u,J]);let ee=!k&&!n;return(0,l.jsxs)("div",{className:"faceted_search_bar_deprecated--searchBar--NATRa search--searchContainerSidebarWithSelection--nmGHp search--_expandingSearchBoxSidebarContainerBase--C6eb2 search--searchContainerSidebar--WhHk4",onMouseDown:G,onClick:Q,role:"button",tabIndex:0,children:[(0,l.jsx)("div",{className:"faceted_search_bar_deprecated--rightFadeContainer--MfSDN faceted_search_bar_deprecated--_fadeContainer--JLh32",children:(0,l.jsx)(v.W,{className:"faceted_search_bar_deprecated--iconWrapper--Ej1Tq"})}),(0,l.jsxs)("div",{className:"faceted_search_bar_deprecated--clipContainer--vGZa5",ref:p,children:[ee&&(0,l.jsx)(M,{}),(0,l.jsx)(ei.i,{ref:u,autoFocus:!0,className:"faceted_search_bar_deprecated--input--OUQ1l","data-testid":"facetedSearchInput",onChange:z,onCompositionEnd:()=>c(!1),onCompositionStart:()=>c(!0),onKeyDown:$,onMouseDown:es.dG,placeholder:J?(0,F.t)("search.search_bar.placeholder_v2"):void 0,spellCheck:"false",value:f})]}),(!!f||X)&&(0,l.jsx)("div",{className:"faceted_search_bar_deprecated--leftFadeContainer--IcGj- faceted_search_bar_deprecated--_fadeContainer--JLh32","data-testid":"facetedSearchClear",children:(0,l.jsx)(g.K,{"aria-label":(0,F.t)("search.search_bar.clear"),onClick:q,"data-tooltip-type":T.Ib.TEXT,"data-tooltip":(0,F.t)("search.search_bar.clear"),children:(0,l.jsx)(x.X,{})})})]})}var ec=r(559055),eu=r(86057),ep=r(936652),ef=r(754305),e_=r(56967),eh=r(493094),em=r(758336),ey=r(784195),eE=r(644350),eb=r(141363),eg=r(352870),ev=r(436174),ex=r(140979),eF=r(198788),ew=r(883652),eI=r(801236),eT=r(30223),ek=r(738109),eR=r(832763),eO=r(57551),eS=r(745463),eC=r(739565),eA=r(878521),ej=r(170793),eP=r(837487);let eN=a.createContext("PREVIEW");function eL({href:e,icon:t,id:r,path:n,text:o,breadcrumbElement:s,disableRecentSearchOnClick:c,onClickCallback:u,onContextMenuCallback:p,onKeyEnterCallback:f,sideElement:_,sideElementAlwaysVisible:m,rowStyle:y,rowHeight:E,textToHighlight:b,trackInteraction:g,elementBesideName:v}){let x=(0,eS.sR)(a.useContext(eN),"Must use `FacetedSearchPreviewRowBase` inside `<SearchRowContext.Provider>"),F=(0,i.wA)(),w=(0,d.md)(C.Q8),I=(0,i.d4)(e=>e.currentUserOrgId),T=(0,em.S)(I)?.searches,{setKeyboardNavigationElement:k,isFauxFocused:R}=(0,ea.M3)({id:r,path:n}),O=a.useCallback(()=>{w&&!c&&F(h.nG({searchQuery:w,previousSearches:T})),g?.(ec.vj.Query.ClickAction.CLICK)},[c,F,T,w,g]),S=a.useCallback(e=>{O(),u?.(e)},[O,u]),A=a.useCallback(e=>{1===e.button&&(O(),u?.(e))},[O,u]),j=a.useCallback(e=>{"Enter"===e.key&&(g?.(ec.vj.Query.ClickAction.ENTER),f?.(e))},[f,g]),P=a.useCallback(e=>{p?.(e)},[p]);return(0,l.jsx)(eC.o,{eventListeners:["onClick","onMouseDown"],children:(0,l.jsx)(eA.N,{href:e??"",onContextMenu:P,onKeyDown:j,onAuxClick:A,tabIndex:0,onClick:S,ref:k,children:(0,l.jsxs)("div",{className:en()(eP.nM,{[eP._O]:"BRAND"===y,[eP.iJ]:"BRAND_HOVER"===y,[eP.fc]:"SHORT"===E,[eP.Hi]:R}),children:[(0,l.jsxs)("div",{className:eP.aU,tabIndex:-1,children:[t&&(0,l.jsx)("div",{className:en()(eP.Kk,{[eP.L0]:"CHECKBOX"===y}),children:t}),(0,l.jsxs)("div",{className:en()(eP.FS,{[eP.y4]:!t,[eP.JX]:"BRAND"===y||"BRAND_HOVER"===y,[eP.b3]:"DROPDOWN"===x,[eP.P6]:"CHECKBOX"===y}),children:[(0,l.jsxs)("div",{className:eP.mX,children:[(0,l.jsx)("div",{className:eP.h5,children:b?(0,l.jsx)(ej.f,{text:o,query:b}):(0,l.jsx)(l.Fragment,{children:o})}),!!v&&v]}),!!s&&(0,l.jsx)("div",{className:eP.QF,children:s})]})]}),!!_&&(0,l.jsx)("div",{className:en()({[eP.qZ]:!m,[eP.PQ]:m,[eP.eF]:"CHECKBOX"===y,[eP.Hi]:R}),tabIndex:-1,children:_})]})})})}function eM({leftElement:e,rightElement:t}){return(0,l.jsxs)("div",{className:"faceted_search_preview_row_breadcrumb--breadcrumbContainer--iSL-F text--fontPos11--rO47d text--_fontBase--VaHfk",children:[(0,l.jsx)("span",{className:"faceted_search_preview_row_breadcrumb--ellipsis--Xxf2x ellipsis--ellipsis--70pHK",children:e}),!!e&&!!t&&(0,l.jsx)("span",{className:"faceted_search_preview_row_breadcrumb--dot--aW3BF",children:"\xb7"}),(0,l.jsx)("span",{children:t})]})}function eD({fileResult:e,id:t,path:r,position:n,onContextMenuCallback:s,collapseModal:c}){let u=(0,i.wA)(),p=(0,i.d4)(e=>e.currentUserOrgId||void 0),f=(0,i.d4)(e=>e.currentTeamId),_=(0,i.d4)(e=>e.user),h=(0,i.d4)(e=>e.search.sessionId),E=(0,d.md)(C.Q),b=(0,eI.$E)(),g=(0,m._6)(),v=(0,y.X0)(g)?"desktop_new_tab":"file_browser",x=(0,K.EN)(e),F=x?e.model:e,w=x?e:F,{data:I}=(0,ex.bc)((0,eE.yf7)(F.folder_id?{projectId:F.folder_id}:null)),T=I?.project?.path??"",k=(0,K.AR)(F,_,p,f,g),R=(0,eT.GT)(k,n,x?e:void 0),{Sprig:O}=(0,eF.A)(),S=(0,ek.v)(),A=a.useCallback(()=>{(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(c?.(),S((0,eR.fA)(F))):(u(eo.AS()),(0,K.K4)(u,F,p??null,f,_,O))},[p,f,_,u,F,S,O,c]),j=a.useCallback(e=>{e.preventDefault(),(0,o.getFeatureFlags)().file_browser_sentiment_survey&&O("setAttribute","fb_file_opened",!0),(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?S((0,eR.fA)(F),e):e.metaKey||1===e.button?ev.Ay.redirect(k,"_blank"):A()},[k,A,F,S,O]),P=a.useCallback(e=>{e.preventDefault(),(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(c?.(),S((0,eR.fA)(F),e)):(u(eo.AS()),(0,K.K4)(u,F,p??null,f,_,O))},[p,f,_,u,F,S,O,c]),N=a.useCallback(e=>{s({index:0,data:w,canAccessFileResultFolder:!!T},e)},[w,T,s]),L=a.useCallback(t=>{x?R(t):ec.vj.Recents.trackRecentsClick(h,n,e.key,ec.vj.RecentType.FILE,v)},[e,x,n,h,R,v]),M=b(F);return(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,l.jsx)(eO.cr,{breadcrumbElement:(0,l.jsx)(eW,{file:F,folderName:T}),icon:(0,l.jsx)(eI.w4,{size:16,type:M}),id:t,onClickCallback:j,onContextMenuCallback:N,onSelectCallback:A,text:F.name,textToHighlight:E,trackInteraction:L}):(0,l.jsx)(eL,{breadcrumbElement:(0,l.jsx)(eW,{file:F,folderName:T}),icon:(0,l.jsx)(eI.w4,{size:16,type:M}),id:t,onClickCallback:j,onContextMenuCallback:N,onKeyEnterCallback:P,path:r,text:F.name,textToHighlight:E,trackInteraction:L})}function eW({file:e,folderName:t}){let r=e.touched_at?(0,F.tx)("search.preview_item.edited_from_now",{relativeTimeString:(0,l.jsx)(ew.h1,{date:e.touched_at,style:"narrow"})}):null;return(0,l.jsx)(eM,{leftElement:t||null,rightElement:r})}var eB=r(635618),eK=r(211573),eU=r(824234),eV=r(19264);function eY({id:e,path:t,position:r,recentSearch:n}){let s=(0,i.wA)(),c=(0,m._6)(),u=(0,y.X0)(c)?"desktop_new_tab":"file_browser",p=(0,d.Xr)(C.Q8),f=(0,d.md)(C.sC),_=(0,d.md)(C.R9),b=(0,d.md)(E.CZ),v=(0,i.d4)(e=>e.currentUserOrgId||null),x=(0,i.d4)(e=>e.search.sessionId),w=(0,em.S)(v)?.searches,I=a.useCallback(()=>{(0,y.X0)(c)&&s(h.Rz({query:n.query,searchScope:f,searchModelType:A.uH.FILES})),s(h.Dy({entryPoint:u})),p(n.query),(0,K.Yb)(s,c,u,n.query,f,_??A.uH.FILES,!0,b),s(eo.AS())},[s,u,b,n.query,_,f,c,p]),T=a.useCallback(e=>{if(e.preventDefault(),e.metaKey){(0,y.X0)(c)&&s(h.Rz({query:n.query,searchScope:f,searchModelType:A.uH.FILES}));let e=(0,K.XW)(n.query,v,_??A.uH.FILES);ev.Ay.redirect(e,"_blank")}else I()},[c,s,I,n.query,f,v,_]),k=a.useCallback(e=>{e.stopPropagation(),e.preventDefault(),s(h.uL({orgId:v,searchQuery:n.query,previousSearches:w}))},[v,s,w,n.query]),R=a.useCallback(()=>{ec.vj.Recents.trackRecentsClick(x,r,null,ec.vj.RecentType.SEARCH,u)},[r,x,u]),O=(0,l.jsx)("div",{className:"faceted_search_preview_recent_row--clearButton--BwAYl raw_components--iconButtonEnabled--dC-EG raw_components--_iconButton--aCldD",children:(0,l.jsx)(g.K,{"aria-label":(0,F.t)("search.search_bar.clear"),onClick:k,children:(0,l.jsx)(eB.A,{})})});return(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,l.jsx)(eO.cr,{icon:(0,l.jsx)(eK.R,{}),id:e,text:n.query,onClickCallback:T,onSelectCallback:I,sideElement:O,trackInteraction:R}):(0,l.jsx)(eL,{icon:(0,l.jsx)(eU.B,{className:"faceted_search_preview_recent_row--icon--NNpnj",svg:eV.A}),id:e,path:t,text:n.query,onClickCallback:T,sideElement:O,trackInteraction:R})}function eH({id:e,path:t,collapseModal:r}){let n=(0,i.d4)(e=>e.currentUserOrgId),o=(0,em.S)(n),s=o.searches.slice(0,A.Or),d=A.MU-s.length,c=function(){let[e]=(0,eh.IT)((0,eE.MAl)({})),t=a.useMemo(()=>e.transform(e=>(0,eb.YN)(e.currentUser.recentFiles)),[e]);return a.useEffect(()=>{"loaded"===t.status&&(0,e_.Wn)(t.data)},[t]),a.useMemo(()=>t.transform(e=>e.recent_files),[t])}(),u=c?.data?.slice(0,d)||[];return"loaded"!==c.status||"loaded"!==o.status?(0,l.jsx)(eg.e,{numRows:A.MU}):(0,l.jsxs)(l.Fragment,{children:[s.length+u.length>0&&(0,l.jsx)("div",{className:"faceted_search_preview_recents--header--eCXyq",children:(0,F.tx)("search.preview_section.recent")}),s.map((r,n)=>{let a=`${e}-recent-search-${n}`;return(0,l.jsx)(eY,{id:a,path:[...t,0,n],position:n,recentSearch:r},a)}),(0,l.jsx)(ey.Q0,{isDropdown:!0,children:(0,l.jsx)(ey.kq.Consumer,{children:n=>(0,l.jsx)(l.Fragment,{children:u.map((a,i)=>{let o=`${e}-recent-file-${i}`,d=s.length+i;return(0,l.jsx)(eD,{fileResult:a,id:o,path:[...t,1,i],position:d,onContextMenuCallback:n.onContextMenuClick,collapseModal:r},o)})})})})]})}var ez=r(273313),e$=r(419450),eq=r(689024),eG=r(328403),eQ=r(11637);function eX({folderResult:e,id:t,path:r,position:n,onContextMenuCallback:s,collapseModal:c}){let u=(0,i.wA)(),p=(0,d.md)(C.Q8),f=(0,K.uF)(e.model),_=(0,eT.GT)(f,n,e),h=(0,eG.EB)(),m=a.useCallback(()=>{(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(c?.(),h(e.model.id)):(u(eo.AS()),(0,K.NE)(u,e.model))},[u,e,h,c]),y=a.useCallback(t=>{t.preventDefault(),(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(t.metaKey||1===t.button||c?.(),h(e.model.id,t)):t.metaKey||1===t.button?ev.Ay.redirect(f,"_blank"):m()},[f,m,e.model.id,h,c]),E=a.useCallback(t=>{t.preventDefault(),(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(c?.(),h(e.model.id,t)):(u(eo.AS()),(0,K.NE)(u,e.model))},[u,e,h,c]),b=a.useCallback(t=>{s({index:0,data:e},t)},[e,s]);return(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,l.jsx)(eO.cr,{breadcrumbElement:(0,l.jsx)(eJ,{folderResult:e}),elementBesideName:e.model.is_connected_project?(0,l.jsx)(eq.W,{}):void 0,icon:(0,l.jsx)(e$.J,{}),id:t,onClickCallback:y,onContextMenuCallback:b,onSelectCallback:m,text:e.model.name,textToHighlight:p,trackInteraction:_}):(0,l.jsx)(eL,{breadcrumbElement:(0,l.jsx)(eJ,{folderResult:e}),elementBesideName:e.model.is_connected_project?(0,l.jsx)(eq.W,{}):void 0,icon:(0,l.jsx)(eU.B,{className:"faceted_search_preview_folder_row--icon--DDefz",svg:eQ.A}),id:t,onClickCallback:y,onContextMenuCallback:b,onKeyEnterCallback:E,path:r,text:e.model.name,textToHighlight:p,trackInteraction:_})}function eJ({folderResult:e}){let{data:t}=(0,ex.bc)(eE.sn$,{teamId:e.model.team_id??""},{enabled:!!e.model.team_id}),r=t?.team?.name||"",n=r?(0,F.tx)("search.preview_item.in_team",{teamName:r}):null,a=(0,F.tx)("search.preview_item.num_files_in_project",{fileCount:e.file_count});return(0,l.jsx)(eM,{leftElement:n,rightElement:a})}var eZ=r(412427),e0=r(9348);function e1({teamResult:e,id:t,path:r,position:n,onContextMenuCallback:s,collapseModal:c}){let u=(0,i.wA)(),p=(0,d.md)(C.Q),f=(0,K.Xx)(e.model),_=(0,eT.GT)(f,n,e),h=(0,e0.lo)(),m=a.useCallback(()=>{(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(c?.(),h(e.model)):(u(eo.AS()),(0,K.e_)(u,e.model))},[u,e,h,c]),y=a.useCallback(t=>{t.preventDefault(),(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(t.metaKey||1===t.button||c?.(),h(e.model,t)):t.metaKey||1===t.button?ev.Ay.redirect(f,"_blank"):m()},[f,m,e,h,c]),E=a.useCallback(t=>{t.preventDefault(),(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(c?.(),h(e.model,t)):(u(eo.AS()),(0,K.e_)(u,e.model))},[u,e,h,c]),b=a.useCallback(t=>{s({index:0,data:e},t)},[s,e]);return(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,l.jsx)(eO.cr,{breadcrumbElement:(0,l.jsx)(e4,{teamResult:e}),icon:(0,l.jsx)(eZ.nl,{team:e.model,size:eZ.Pf.MEDIUM}),id:t,onClickCallback:y,onContextMenuCallback:b,onSelectCallback:m,text:e.model.name,textToHighlight:p,trackInteraction:_}):(0,l.jsx)(eL,{breadcrumbElement:(0,l.jsx)(e4,{teamResult:e}),icon:(0,l.jsx)(eZ.nl,{team:e.model,size:eZ.Pf.MEDIUM}),id:t,onClickCallback:y,onContextMenuCallback:b,onKeyEnterCallback:E,path:r,text:e.model.name,textToHighlight:p,trackInteraction:_})}function e4({teamResult:e}){let t=(0,i.d4)(t=>t.teams[e.model.id]),r=(0,F.tx)("search.preview_item.num_members_in_team",{memberCount:e.member_count}),n=t?(0,F.tx)("search.preview_item.num_projects_in_team",{projectCount:t.projects??0}):null;return(0,l.jsx)(eM,{leftElement:r,rightElement:n})}var e5=r(275262),e6=r(848594),e2=r(69806);function e8({id:e,path:t,position:r,userResult:n,onContextMenuCallback:s,collapseModal:c}){let u=(0,i.wA)(),p=(0,d.md)(C.Q),f=(0,i.d4)(e=>e.currentUserOrgId||void 0),_=(0,i.d4)(e=>e.orgById),h=(0,e6.t)(n.model,f),m=(0,eT.GT)(h,r,n),y=(0,e5.y)(),E=a.useCallback(()=>{(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(c?.(),y(n.model)):(u(eo.AS()),(0,K.KL)(u,n.model))},[u,n,y,c]),b=a.useCallback(e=>{e.preventDefault(),(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(e.metaKey||1===e.button||c?.(),y(n.model,e)):e.metaKey||1===e.button?ev.Ay.redirect(h,"_blank"):E()},[h,E,n,y,c]),g=a.useCallback(e=>{e.preventDefault(),(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(c?.(),y(n.model,e)):(u(eo.AS()),(0,K.KL)(u,n.model))},[u,n,y,c]),v=a.useCallback(e=>{s({index:0,data:n},e)},[s,n]),x=n.model.org_id&&_[n.model.org_id]||null,w=(0,l.jsxs)("div",{className:"faceted_search_preview_user_row--iconContainer--qq0UZ",children:[(0,l.jsx)(eZ.H8,{user:n.model,size:eZ.Pf.MEDIUM}),x&&(0,l.jsx)("div",{className:"faceted_search_preview_user_row--planIcon--YZqvT",children:(0,l.jsx)(e2.H,{entityId:x.id,entityName:x.name,imgUrl:x.img_url,size:10})})]});return(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,l.jsx)(eO.cr,{breadcrumbElement:n.last_active_at?(0,F.tx)("search.preview_item.active_from_now",{relativeTimeString:(0,l.jsx)(ew.h1,{date:n.last_active_at,style:"narrow"})}):void 0,icon:w,id:e,onClickCallback:b,onContextMenuCallback:v,onSelectCallback:E,text:n.model.name||n.model.handle,textToHighlight:p,trackInteraction:m}):(0,l.jsx)(eL,{icon:w,id:e,onClickCallback:b,onContextMenuCallback:v,onKeyEnterCallback:g,path:t,text:n.model.name||n.model.handle,textToHighlight:p,trackInteraction:m})}var e3=r(402631),e7=r(611100),e9=r(302789),te=r(767713),tt=r(478499),tr=r(519668);function tn({onSearch:e,id:t,path:r,showResultsForModelType:n}){let i=(0,d.md)(C.Q8),s=(0,d.md)(E.jM),c=n&&s?(0,A.Xr)(s):null,u=a.useCallback(()=>{e(i,!1,!0,!0)},[i,e]),p=a.useCallback(e=>{e.preventDefault(),e.metaKey||u()},[u]),f=a.useMemo(()=>{if((0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration)switch(c){case A.uH.FILES:return(0,l.jsx)(e3.p,{});case A.uH.PROJECTS:return(0,l.jsx)(e7.e,{});case A.uH.TEAMS:return(0,l.jsx)(e9.b,{});case A.uH.USERS:return(0,l.jsx)(te.j,{});default:return(0,l.jsx)(v.W,{})}switch(c){case A.uH.FILES:return(0,l.jsx)(tt.In,{icon:"page-16",fill:"brand"});case A.uH.PROJECTS:return(0,l.jsx)(tt.In,{icon:"folder-16",fill:"brand"});case A.uH.TEAMS:return(0,l.jsx)(tt.In,{icon:"team-16",fill:"brand"});case A.uH.USERS:return(0,l.jsx)(eU.B,{svg:tr.A,className:"faceted_search_see_all_results--icon--nYbNU"});default:return(0,l.jsx)(tt.In,{icon:"search-32",fill:"brand"})}},[c]),_=a.useMemo(()=>{switch(c){case A.uH.FILES:return(0,F.t)("search.facet_preview_section.see_more_files");case A.uH.PROJECTS:return(0,F.t)("search.facet_preview_section.see_more_projects");case A.uH.TEAMS:return(0,F.t)("search.facet_preview_section.see_more_teams");case A.uH.USERS:return(0,F.t)("search.facet_preview_section.see_more_users");default:return(0,F.t)("search.preview_section.see_all_results")}},[c]);return(0,l.jsx)("div",{className:"faceted_search_see_all_results--container--LPor3",onContextMenu:es.wo,children:(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,l.jsx)(eO.cr,{icon:f,id:t,onClickCallback:p,onSelectCallback:u,rowStyle:eO.yY.BRAND_HOVER,rowHeight:eO.CO.SHORT,text:_}):(0,l.jsx)(eL,{icon:f,id:t,onClickCallback:p,path:r,rowStyle:eO.yY.BRAND_HOVER,rowHeight:eO.CO.SHORT,text:_})})}let tl="faceted_search_preview_results--emptyState--zuAcX";function ta({id:e,path:t,collapseModal:r}){let n=(0,o.getFeatureFlags)().search_preview_results_livestore?ez.lN:ez.KU,i=(0,d.md)(E.jM),s=(0,d.md)(C.ih),c=(0,d.md)(E.CZ),u=(0,d.md)(C.Q),p=(0,A.Xr)(i),f=(0,d.md)(C.sC),_=(0,m._6)(),h=(0,y.X0)(_)?"desktop_new_tab":"file_browser",b=(0,j.y)(h,f,!0),g=n(),v=a.useMemo(()=>g.data?.searchPreviewOrder??[],[g.data?.searchPreviewOrder]),x=a.useMemo(()=>g.data?.searchResults??{},[g.data?.searchResults]),w=a.useMemo(()=>!g.status||"loading"===g.status||!(0,k.c2)(s,c),[g.status,s,c]),I=a.useMemo(()=>{if(!x)return!1;for(let e of v){let t=x[e]?.results;if(t&&t.length>0)return!1}return!0},[v,x]);return(0,O.GX)(u)?(0,l.jsx)("div",{className:tl,children:(0,F.tx)("search.error.max_query_length_exceeded")}):w?(0,l.jsx)(eg.e,{numRows:7}):I?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:tl,"data-testid":"facetedSearchNoResults",children:u?p?(0,l.jsxs)(l.Fragment,{children:[(0,A.hf)(p),"\xa0",(0,l.jsx)("span",{children:u})]}):(0,F.tx)("search.empty_state.no_file_project_team_or_people_results",{searchQuery:u}):(0,F.tx)("search.zero_state.empty_state")}),(0,l.jsx)(tn,{id:e,path:t,onSearch:b})]}):(0,l.jsx)(ey.Q0,{isDropdown:!0,children:(0,l.jsx)(ey.kq.Consumer,{children:n=>(0,l.jsxs)(l.Fragment,{children:[v.map((i,o)=>{let s=x[i]?.results;return s&&0!==s.length?(0,l.jsxs)(a.Fragment,{children:[v.length>1&&(0,l.jsx)("div",{className:"faceted_search_preview_results--header--sS4dy faceted_search_preview_recents--header--eCXyq",children:(0,A.q6)(i)}),s.map((a,i)=>{if(a.search_model_type===A.uH.FILES){let s=`${e}-file-${i}`;return(0,l.jsx)(eD,{fileResult:a,id:s,path:[...t,0,o,i],position:i,onContextMenuCallback:n.onContextMenuClick,collapseModal:r},s)}if(a.search_model_type===A.uH.PROJECTS){let s=`${e}-folder-${i}`;return(0,l.jsx)(eX,{folderResult:a,id:s,path:[...t,0,o,i],position:i,onContextMenuCallback:n.onContextMenuClick,collapseModal:r},s)}if(a.search_model_type===A.uH.TEAMS){let s=`${e}-team-${i}`;return(0,l.jsx)(e1,{teamResult:a,id:s,path:[...t,0,o,i],position:i,onContextMenuCallback:n.onContextMenuClick,collapseModal:r},s)}if(a.search_model_type===A.uH.USERS){let s=`${e}-user-${i}`;return(0,l.jsx)(e8,{userResult:a,id:s,path:[...t,0,o,i],position:i,onContextMenuCallback:n.onContextMenuClick,collapseModal:r},s)}})]},o):null}),(0,l.jsx)(tn,{id:`${e}-see-all`,path:[...t,1],onSearch:b,showResultsForModelType:!0})]})})})}var ti=r(667243),to=r(181645),ts=r(158016),td=r(426474),tc=r(500391),tu=r(508295),tp=r(523924),tf=r(769060);let t_="faceted_search_preview_suggestion_row--pill--M8GIO",th="faceted_search_preview_suggestion_row--row--5I2v9",tm="faceted_search_preview_suggestion_row--fauxFocus--LXfPz",ty="faceted_search_preview_suggestion_row--hoveredPill--TbBLC",tE="faceted_search_preview_suggestion_row--helpText--Gq-VM",tb="faceted_search_preview_suggestion_row--container--I7wBO",tg="faceted_search_preview_suggestion_row--valueContainer--SczlK";function tv({type:e,value:t,onSelect:r,showHint:n}){let i=(0,d.md)(C.Q8),{activeValue:o}=a.useContext(B.M),s=(e=>{switch(e){case A.WY.RESOURCE:return(0,F.t)("search.facets.filter_by_resource");case A.WY.CREATOR:return(0,F.t)("search.facets.filter_by_creator");case A.WY.SPACE:return(0,F.t)("search.facets.filter_by_space");default:return(0,tp.xb)(e)}})(e),c=a.useId(),u=o===c;return(0,l.jsx)(tf.M.Option,{onSelect:r,value:c,id:c,children:(0,l.jsx)(eC.o,{eventListeners:["onPointerMove"],children:(0,l.jsxs)("div",{className:en()(th,u&&tm),"aria-current":u||void 0,children:[(0,l.jsxs)("div",{className:tb,children:[(0,l.jsx)("div",{className:en()(t_,u&&ty),children:(0,O.gl)(e)}),!!t&&(0,l.jsx)("div",{className:tg,children:(0,l.jsx)(ej.f,{text:t,query:i})})]}),n&&(0,l.jsx)("div",{className:tE,children:s})]})})})}function tx({type:e,value:t,onSelect:r,showHint:n,id:a,path:i}){let o=(0,d.md)(C.Q8),{setKeyboardNavigationElement:s,isFauxFocused:c}=(0,ea.M3)({id:a,path:i}),u=(e=>{switch(e){case A.WY.RESOURCE:return(0,F.t)("search.facets.filter_by_resource");case A.WY.CREATOR:return(0,F.t)("search.facets.filter_by_creator");case A.WY.SPACE:return(0,F.t)("search.facets.filter_by_space");default:return""}})(e);return(0,l.jsxs)(et.E,{ref:s,className:en()(th,"faceted_search_preview_suggestion_row--rowDeprecated--FyjY-",c&&tm),"aria-label":u,"aria-current":c||void 0,onClick:r,children:[(0,l.jsxs)("div",{className:tb,children:[(0,l.jsx)("div",{className:en()(t_,c&&ty),children:(0,O.gl)(e)}),!!t&&(0,l.jsx)("div",{className:tg,children:(0,l.jsx)(ej.f,{text:t,query:o})})]}),n&&(0,l.jsx)("div",{className:tE,children:u})]})}function tF({id:e,path:t}){let r=(0,d.md)(E.zD),n=(0,d.md)(E.L8),s=(0,d.md)($),[c,u]=(0,d.fp)(C.Q8),p=(0,tu.iZ)(),f=G(n,r),h=function(){let e=(0,d.md)($),t=(0,d.md)(C.sC),r=(0,d.md)(C.BA),n=(0,d.md)(E.jM),l=(0,d.md)(E.J),i=(0,d.md)(E.P_),[o,s]=(0,d.fp)(C.R9),[c,u]=(0,d.fp)(C.Q8),p=(0,tc.f)(),f=(0,td.n)(),h=(0,d.Xr)((0,E.l4)(e?.facetType??null)),m=(0,d.md)(_.hO.isFragmentSearchAtom),y=(0,j.L)(m?"fragment_search_modal":"file_browser",t,!0),b=a.useCallback(t=>{if(e)if("TYPE_AND_VALUES"===e.suggestionType){let a=e.facetType,o=null==t?e.facetValues[0]:e.facetValues[t],d=a===A.WY.RESOURCE?{type:A.WY.RESOURCE,value:o}:o,p=null;a===A.WY.RESOURCE?p=(0,O.jN)(o):a===A.WY.CREATOR?p=(0,O.C8)(o,O.M2.ADD_TO_GROUP,l):a===A.WY.SPACE&&(p=(0,O.q1)(o,O.M2.ADD_TO_GROUP,i)),h(p);let _=c.slice(0,e.facetTypeIndex);if(u(_),!p)return;let E=(0,O.gh)(p,n,l,i);s(E?.searchModelType??null),m||y(_,A.uH.FILES,E,r,!1,!1),f((0,O.oM)(d),c)}else{let t=c.split(" ").slice(0,-1).join(" "),a=t+(t?" ":"")+(0,O.gl)(e.facetType);u(a);let s=(0,O.nX)(n,l,i,o??void 0);m||y(a,A.uH.FILES,s,r,!1,!1),p(A.uR.AUTOCOMPLETE,e.facetType)}},[e,h,c,u,n,l,i,o,s,y,r,f,p,m]);return a.useMemo(()=>b,[b])}(),m=a.useCallback(e=>{h(e)},[h]),y=a.useCallback((e,t)=>{e.preventDefault(),h(t)},[h]),b=a.useCallback(e=>{let t=(0,O.gl)(e);u(c?c+" "+t:t)},[c,u]),g=a.useCallback((e,t)=>{e.preventDefault();let r=(0,O.gl)(t);u(c?c+" "+r:r)},[c,u]);return(!function(){let e,t,r,n=(0,d.md)($),[l,o]=(0,d.fp)(E.a3),[s,c]=(0,d.fp)(q),u=(0,d.md)(E.wf),p=(0,d.md)(H),f=p?.valueToQuery??"",_=(e=(0,i.d4)(e=>e.search.sessionId),t=(0,i.d4)(e=>e.search.queryId),r=(0,i.d4)(e=>e.search.parameters.query),n=>{let l={sessionId:e,queryId:t,query:r,facet_entrypoint:A.uR.AUTOCOMPLETE,facet_type:n};(0,to.sx)("facet_type_shown",l)}),h=(0,ti.P)(),m=(0,ts.A)();a.useEffect(()=>{n&&(n.suggestionType===U.TYPE?_(n.facetType):f.length>0&&l!==u&&(o(u),h(f,n.facetType,A.uR.AUTOCOMPLETE))),!n&&s&&m(A.uR.AUTOCOMPLETE,s.facetType),c(n)},[n])}(),s)?s.suggestionType===U.TYPE?(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,l.jsx)(tv,{type:s.facetType,value:null,onSelect:m,showHint:!0},s.facetType):(0,l.jsx)(tx,{type:s.facetType,value:null,onSelect:y,showHint:!0,id:`${e}-facet-type`,path:t}):(0,l.jsx)(l.Fragment,{children:s.facetValues.map((r,n)=>{let a,i=((e,t,r)=>{if(t===A.WY.RESOURCE){let t=(0,O.jN)(e);return t?(0,O.yA)(t):""}return t===A.WY.CREATOR||t===A.WY.SPACE?(0,O.FR)(e,r):""})(r,s.facetType,p?.id),d=s.facetType;switch(d){case A.WY.RESOURCE:a=`${d}-${r}`;break;case A.WY.CREATOR:case A.WY.SPACE:a=`${d}-${r.value.id}`;break;default:a=`${d}-${i}`}return(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,l.jsx)(tv,{type:d,value:i,onSelect:()=>m(n),showHint:!1},a):(0,l.jsx)(tx,{type:s.facetType,value:i,onSelect:e=>y(e,n),showHint:!1,id:`${e}-facet-type`,path:[...t,n]},n)})}):c||n.length>0?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(l.Fragment,{children:f.map((r,n)=>(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,l.jsx)(tv,{type:r,value:null,onSelect:()=>b(r),showHint:!0},`${r}`):(0,l.jsx)(tx,{type:r,value:null,onSelect:e=>g(e,r),showHint:!0,id:`${e}-${n}`,path:[...t,n]},`suggestion-row-${n}`))})}r(526865);let tw=(0,el.jz)("8px"),tI=(0,el.jz)("380px"),tT=(0,el.jz)("48px"),tk=(0,el.jz)("32px"),tR=(0,ep.Ju)(function(){let e=(0,i.wA)(),t=(0,i.d4)(e=>e.modalShown),r=(0,i.d4)(e=>e.search.sessionId),n=(0,d.md)(C.Q),o=(0,d.md)(E.L8);a.useEffect(()=>()=>{r&&ec.vj.Session.searchModalExit(r)},[r]);let c=a.useCallback(()=>{e(p.ky())},[e]),[u,f]=a.useState(t?.data.topOffset);if((0,s.h)(()=>{if(t?.data.relativePositionRef&&t?.data.resizableObservedRef){let e=new ResizeObserver(()=>{f(t?.data.relativePositionRef.current.getBoundingClientRect().top-tw)});return e.observe(t?.data.resizableObservedRef.current,{box:"border-box"}),()=>e.disconnect()}}),!t)return null;let _=t.data.width??tI,h=t.data.hideFacetFilters??!1,m=t.data.leftOffset,y=t.data.bottomPadding;return(0,l.jsx)(ef.d_,{absolutePosition:{top:u,left:m},"data-testid":"facetedSearchModal",maxHeight:y?`calc(100vh - ${u}px - ${y}px)`:"90vh",minHeight:tk+2*tw,onHide:c,padding:`0 0 ${tw}px 0`,popStack:!0,size:"any",tintedModalBackground:!1,useModalViewScroll:!1,width:`calc(min(${_}px, calc(100vw - 2 * ${tw}px))`,children:(0,l.jsx)(ea.dP,{children:(0,l.jsxs)(eO.a3.Provider,{value:eO.Vm.PREVIEW,children:[(0,l.jsx)("div",{style:{margin:tw,width:_-2*tw,maxWidth:`calc(100vw - 4 * ${tw}px)`},children:(0,l.jsx)(ed,{hideSearchPreview:t.data.hideSearchPreview})}),(0,l.jsxs)(eu.P,{maxHeight:y?`calc(100vh - ${u}px - ${y}px - ${tT}px - ${tw}px)`:`calc(80vh - 2 * ${tT}px)`,children:[!h&&(0,l.jsx)(tF,{id:"suggestions",path:[4]}),t.data.hideSearchPreview?null:n||o.length>0?(0,l.jsx)(ta,{id:"search-results",path:[5]}):(0,l.jsx)(eH,{id:"recents",path:[5]})]})]})})})},N.R);var tO=r(231484),tS=r(188481),tC=r(487817),tA=r(948240),tj=r(331850),tP=r(794061);function tN(){let e=(0,i.wA)(),t=(0,tO.UP)();return a.useCallback(async()=>{let r=await (0,tS.Q)((0,tA.mZ)(!0)),n=await (0,tS.Q)((0,tA.Ji)(!0)),l=(0,tj.zQ)(r),a=(0,tj.A8)(n,tC.Xn.MEMBER);e(h.Ns({searchScope:(0,tP.l_)(t,l,a)}))},[e,t])}let tL=(0,el.jz)("8px");function tM({hideSearchPreview:e,modalPositionRef:t}){let r=(0,i.wA)(),n=(0,i.d4)(e=>e.modalShown),o=(0,m._6)(),c=(0,y.X0)(o),u=tN(),[p,f]=(0,d.fp)(C.Q8),b=(0,d.md)(E.L8),g=a.useRef(null),x=(0,d.Xr)(E.q4),w=a.useCallback(()=>{let l,a,i;if(!g.current||n?.type===N.R)return;let o=g.current.getBoundingClientRect(),s=o.top-tL,d=o.left-tL,u=(0,el.jz)("380px"),p=!1;c&&(d=void 0,u=(0,el.jz)("816px"),p=!0,l=(0,el.jz)("32px"),a=t,i=g),r(eo.to({type:tR,data:{topOffset:s,leftOffset:d,hideSearchPreview:e,width:u,hideFacetFilters:p,resizableObservedRef:a,relativePositionRef:i,bottomPadding:l},showModalsBeneath:!0}))},[n?.type,c,r,e,t]);(0,s.h)(()=>{u()}),a.useEffect(()=>{let e=e=>{e.metaKey&&"/"===e.key&&!n&&w()},t=e=>{"Tab"===e.key&&n?.type===N.R&&r(eo.AS())};return document.addEventListener("keydown",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keydown",t)}},[r,n,w]);let I=(0,d.md)(_.hO.isFragmentSearchAtom);if(a.useEffect(()=>{I||"search"===o.view||(r(h._z({})),f(""),x())},[r,o,f,x,I]),a.useEffect(()=>{if(c){let e=()=>{"visible"===document.visibilityState&&(r(h._z({})),f(""),x())};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)}},[x,r,c,f]),"search"===o.view)return(0,l.jsx)("div",{className:"faceted_search_entrypoint_deprecated--fullResultsSearchWrapper--TN-d9",children:(0,l.jsx)(ea.dP,{children:(0,l.jsx)(ed,{})})});let T=!c;return(0,l.jsxs)(et.E,{className:en()("faceted_search_entrypoint_deprecated--inputWrapper--V197A search--searchContainerSidebarWithSelection--nmGHp search--_expandingSearchBoxSidebarContainerBase--C6eb2 search--searchContainerSidebar--WhHk4",{"faceted_search_entrypoint_deprecated--isDesktopNewTabSearch--019Zm":c}),onClick:w,onFocus:w,"data-testid":"facetedSearchEntrypoint",ref:g,"aria-label":(0,F.t)("search.search_bar.placeholder_v2"),children:[(0,l.jsx)(v.W,{className:"faceted_search_entrypoint_deprecated--iconWrapper--ZC-MA"}),(0,l.jsxs)("div",{className:"faceted_search_entrypoint_deprecated--contentContainer--5abd1",children:[T&&(0,l.jsx)(M,{}),(0,l.jsx)(ei.i,{className:"faceted_search_entrypoint_deprecated--input--nUU8P faceted_search_bar_deprecated--input--OUQ1l",placeholder:0===b.length?(0,F.t)("search.search_bar.placeholder_v2"):"",value:p})]}),!e&&(0,l.jsx)("div",{className:"faceted_search_entrypoint_deprecated--leftFadeContainer--4t-7q faceted_search_bar_deprecated--leftFadeContainer--IcGj- faceted_search_bar_deprecated--_fadeContainer--JLh32"})]})}function tD({maxHeight:e,modalHideFacetFilters:t,modalHiddenStyles:r,modalExpandedStyles:n,expanded:o,expandModal:s,collapseModal:u}){let p=(0,i.d4)(e=>e.search.sessionId),f=(0,d.md)(C.Q),_=(0,d.md)(E.L8);a.useEffect(()=>()=>{p&&ec.vj.Session.searchModalExit(p)},[p]);let h=a.useRef(null),[m,y]=a.useState(void 0),b=tf.M.useAutocomplete({activeValue:m,onActiveValueChange:y,expanded:o,expandOnFocus:!1});return(0,l.jsx)("div",{"data-testid":"facetedSearchModal",...c.xk(o?tW.facetedSearchModalExpanded:tW.facetedSearchModalHidden,o?n:r),ref:h,children:(0,l.jsx)(eO.a3.Provider,{value:eO.Vm.PREVIEW,children:(0,l.jsxs)(B.M.Provider,{value:{activeValue:m,setActiveValue:y},children:[(0,l.jsx)("div",{...{className:"x1e56ztr xet2fuk x1db2dqx"},children:(0,l.jsx)(ee,{expanded:o,expandModal:s,collapseModal:u,hideSearchPreview:!o,autocomplete:b,searchInputRef:b.refs.input})}),o&&(0,l.jsxs)(tf.M.List,{...b.getListProps({maxHeight:e}),"data-testid":"facetedSearchPreviewList",children:[!t&&(0,l.jsx)(tF,{id:"suggestions",path:[4]}),o?f||_.length>0?(0,l.jsx)(ta,{id:"search-results",path:[5],collapseModal:u}):(0,l.jsx)(eH,{id:"recents",path:[5],collapseModal:u}):null]})]})})})}let tW={facetedSearchModalExpanded:{kVAEAm:"x10l6tqk",k87sOh:"x1v4kod4",kY2c9j:"x1h5zca0",kaIpWk:"x1mxnbhz",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,kGVxlE:"x1wu5q8a",kWkggS:"x1yjdb4r",kLKAdn:"x1y1aw1k",ks0D6T:"x87tlaw",kGO01o:"xwib8y2",$$css:!0},facetedSearchModalHidden:{kVAEAm:"x1n2onr6",ks0D6T:"x87tlaw",$$css:!0}},tB={kbCHJM:"x2akjr6",kLqNvP:null,kt4wiu:null,kzqmXN:"xzx2ped",$$css:!0},tK={kzqmXN:"xf14fn5",$$css:!0},tU={kzqmXN:"x1j0aogd",$$css:!0};function tV(){let e=(0,i.wA)(),t=(0,m._6)(),r=(0,y.X0)(t),n=tN(),o=(0,d.Xr)(C.Q8),c=a.useRef(null),b=(0,d.Xr)(E.q4),[g,v]=a.useState(!1),x=a.useCallback(()=>{g&&(e(p.ky()),v(!1))},[g,e,v]),F=(0,d.md)(_.hO.isFragmentSearchAtom),w=a.useCallback(()=>{if(!g){v(!0);let t=F?"fragment_search_modal":r?"desktop_new_tab":"file_browser";e(h.W0({entryPoint:t}))}},[g,v,e,F,r]);(0,s.h)(()=>{n()});let I=a.useCallback(()=>{let e=`calc(80vh - 2 * ${f.ID.previewRowHeight})`;if(r){let t=f.ID.bottomPaddingDesktopNewTab;if(c.current){let r=c.current.getBoundingClientRect(),n=`${r.top}px`;e=`calc(100vh - ${n} - ${t} - ${f.ID.previewRowHeight})`}return{maxHeight:e,modalHideFacetFilters:!0,modalBottomPadding:t,modalHiddenStyles:tB,modalExpandedStyles:tB}}return{maxHeight:e,modalHideFacetFilters:!1,modalHiddenStyles:tU,modalExpandedStyles:tK}},[c,r]);a.useEffect(()=>{let e=e=>{e.metaKey&&"/"===e.key&&!g&&(c.current?.focus(),w())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[w,c,g]),a.useEffect(()=>{F||"search"===t.view||(e(h._z({})),o(""),b())},[e,t,o,b,F]),a.useEffect(()=>{if(r){let t=()=>{"visible"===document.visibilityState&&(e(h._z({})),o(""),b(),x(),document.activeElement&&document.activeElement.blur&&document.activeElement.blur())};return document.addEventListener("visibilitychange",t),()=>document.removeEventListener("visibilitychange",t)}},[b,e,r,o,x]);let T=a.useRef(null);return"search"===t.view?(g&&v(!1),(0,l.jsx)("div",{...{className:"x1661ufe xdj266r"},children:(0,l.jsx)(ee,{searchInputRef:T})})):(0,l.jsxs)("div",{ref:c,...{0:{className:"x1n2onr6 xzo6umx"},1:{className:"x1n2onr6 xqd9ieg"}}[0|!!r],"data-testid":"facetedSearchEntrypoint",children:[g&&(0,l.jsx)(u.X9,{closeDropdown:x}),(0,l.jsx)(tD,{...I(),expanded:g,expandModal:w,collapseModal:x})]})}function tY({hideSearchPreview:e,modalPositionRef:t}){return(0,o.getFeatureFlags)().file_browser_search_panel_fpl_migration?(0,l.jsx)(tV,{}):(0,l.jsx)(tM,{hideSearchPreview:e,modalPositionRef:t})}},30223(e,t,r){r.d(t,{GT:()=>_,aL:()=>E,db:()=>m,hA:()=>y});var n=r(105652),l=r(645186);if(1464==r.j)var a=r(710127);var i=r(559055),o=r(87557),s=r(928397),d=r(865780),c=r(773201),u=r(508295),p=r(458983);function f(e,t,r,n,l,a,s){let d=(0,o.mv)(e);new i.vj.Analytics(l,{position:t,resource_id:d,resource_type:e.search_model_type.toString(),matched_queries:e.matched_queries,result:e},{plan:s}).click(e.search_model_type,a,{action:n,target:r})}function _(e,t,r){let i=(0,l.wA)(),o=(0,l.d4)(e=>e.search),d=(0,c._6)(),u=(0,l.d4)(e=>(0,a.S)(e));return n.useCallback(n=>{i(s.ky()),r&&f(r,t,e,n,o,d,u)},[i,e,t,r,o,d,u])}function h(){let e=(0,l.wA)(),t=(0,l.d4)(e=>e.search),r=(0,c._6)(),i=(0,l.d4)(e=>(0,a.S)(e));return n.useCallback((n,l,a,o)=>{e(s.ky()),f(o,n,l,a,t,r,i)},[e,t,r,i])}function m(){let e=(0,u.iZ)(),t=(0,d.dq)(),r=(0,p.ol)()?.id,l=(0,c._6)(),a=h();return n.useCallback((n,i,s)=>{if(!s)return;let d=s.model;a(n,(0,o.AR)(d,e,t,r,l),i,s)},[e,t,r,l,a])}function y(){let e=h();return n.useCallback((t,r,n)=>{if(!n)return;let l=n.model;e(t,(0,o.uF)(l),r,n)},[e])}function E(){let e=h();return n.useCallback((t,r,n)=>{if(!n)return;let l=n.model;e(t,(0,o.Xx)(l),r,n)},[e])}},354504(e,t,r){r.d(t,{G:()=>c,R:()=>s});var n=r(239976),l=r(105652),a=r(645186);if(1464==r.j)var i=r(710127);var o=r(559055);let s="search_file_browser_full_results",d=e=>"href"in e?e.href:null;function c({category:e,searchResult:t,index:r,children:s,planFilter:c}){let u=(0,a.d4)(e=>e.search),p=(0,a.d4)(e=>e.selectedView),f=(0,a.d4)(i.S),_=(0,l.useMemo)(()=>({position:r,resource_id:"id"in t.model?t.model.id:t.model.key,resource_type:t.search_model_type,matched_queries:t.matched_queries,result:t}),[t,r]),h=(0,l.useMemo)(()=>new o.vj.Analytics(u,_,{plan:f}),[]);(0,l.useEffect)(()=>{h.update(u,_,{plan:f})},[h,u,_,f]);let m=(0,l.useCallback)(t=>{let r=t.target,n=r.closest("[data-search-click-action]")?.getAttribute("data-search-click-action");n!==o.jr&&h.click(e,p,{action:n||"click",target:d(r)},c)},[h,e,p,c]),y=(0,l.useCallback)(t=>{let r=t.target,n=r.closest("[data-search-context-menu-action]")?.getAttribute("data-search-context-menu-action");n!==o.jr&&h.click(e,p,{action:n||"context-click",target:d(r)})},[h,e,p]);return(0,n.jsx)("div",{"data-search-context-menu-action":"context-click","data-search-click-action":"click",onClickCapture:m,onContextMenuCapture:y,children:s})}},784195(e,t,r){r.d(t,{kq:()=>ev,Q0:()=>ex,ro:()=>eg});var n,l,a,i,o,s,d,c,u,p,f,_,h,m,y,E,b,g=r(239976),v=r(523924),x=r(921282),F=r(105652),w=r(645186),I=r(490753),T=r(985373),k=r(735594),R=r(140390),O=r(354504),S=r(928814),C=r(645724);function A(e){return t=>{let r,n;return r=e.map(e=>e(t.data)).filter(e=>null!==e),n={...t.targetRect,position:"fixed"},(0,g.jsx)(C.ms,{style:n,children:r.map((e,t)=>null===e?null:"SEPARATOR"===e?t===r.length-1?null:(0,g.jsx)(C.wv,{},`sep${t}`):(0,g.jsx)(C.c$,{id:e.id,onClick:e.onClick,disabled:e.disabled,onMouseDown:S.wo,children:e.text},e.id))})}}var j=r(850159),P=r(904511),N=r(154077),L=r(38900),M=r(575425),D=r(701156),W=r(832508),B=r(907988),K=r(181645),U=r(436174),V=r(198788),Y=r(898312),H=r(358873),z=r(389218);(e=>{var t;e.Separator=()=>"SEPARATOR";let r=(e,t)=>r=>{let n=e(r);return n?t(n):null};function n(e){let t=(0,w.wA)(),{Sprig:r}=(0,V.A)();if(!e)return null;let{overrides:n,...l}=e;return{id:"open_view",text:(0,j.t)("general.open"),onClick:()=>{let e=(0,U.Xr)();"fullscreen"===l.view&&l.fileKey&&e&&((0,K.sx)("Open File Click",{fileKey:l.fileKey,uiSelectedView:JSON.stringify(e.view)}),(0,H.k1)(l.fileKey,{selectedViewName:e.view,sprig:r})),t(T.sf(l))},...n}}let l=e=>{let t=(0,w.wA)(),{overrides:r,...n}=e;return{id:"copy_link",text:(0,j.t)("file_browser.copy_link"),onClick:()=>t(P.S(n)),...r}};function a(e){let t=(0,w.wA)();if(!e)return null;let{overrides:r,...n}=e;return{id:"copy_view_link",text:(0,j.t)("file_browser.copy_link"),onClick:()=>t(P.le(n)),...r}}let i=e=>{let t=(0,w.wA)(),{overrides:r,...n}=e;return{id:"open_in_new_tab",text:(0,j.t)("file_browser.open_in_new_tab"),onClick:()=>t(Y.V3(n)),...r}};function o(e){let t=(0,w.wA)(),r=(0,w.Pj)();if(!e)return null;let{overrides:n,...l}=e;return{id:"open_view_in_new_tab",text:(0,j.t)("file_browser.open_in_new_tab"),onClick:()=>{let e=(0,U.Xr)();"fullscreen"===l.view&&l.fileKey&&e&&((0,K.sx)("Open File in New Tab Click",{fileKey:l.fileKey,uiSelectedView:JSON.stringify(e.view)}),t(Y.UN({fileKey:l.fileKey})));let n=(0,z.xS)(r.getState(),l);t(Y.V3({url:n}))},...n}}(t=e.Creators||(e.Creators={})).Open=e=>r(e,n),t.CopyLink=e=>r(e,l),t.CopyViewLink=e=>r(e,a),t.OpenInNewTab=e=>r(e,i),t.OpenViewInNewTab=e=>r(e,o)})(u||(u={}));let $=e=>({view:"fullscreen",fileKey:e.key,editorType:(0,M.wN)(e.editorType||"design")});(n=p||(p={})).Open=u.Creators.Open($),n.OpenInNewTab=u.Creators.OpenViewInNewTab($),n.CopyLink=function(e){let t=(0,w.wA)(),r=(0,w.d4)(e=>e.sharingAttributionContextKey);return{id:"copy_view_link",text:(0,j.t)("file_browser.copy_link"),onClick:()=>{let n=new W.a;t(P.TH({selector:n,selectedView:$(e),data:{sharingAttributionContextKey:r,resources:{file:k.F.toSinatra(e),repo:e.fileRepo}}}))}}},n.Share=e=>{let t=(0,w.wA)();return{id:"share_file",text:"Share",onClick:()=>{t((0,L.to)({type:B.g_,data:{fileKey:e.key,source:D.nk.fileBrowserContextMenu}}))}}},n.ShowInFolder=function(e){let t=(0,w.wA)(),{folderId:r}=e;return r?{id:"show_in_folder",text:"Show in project",onClick:()=>{t(T.sf({view:"folder",folderId:r}))}}:null},n.SetFavoriteStatus=e=>{let t=(0,w.wA)();return e.isFavorited?{id:"set_favorite_status",text:e.isFavorited?(0,j.t)("tile.favoriting.remove_from_favorites"):(0,j.t)("tile.favoriting.add_to_favorites"),onClick:()=>{e.isFavorited?t(N.qP({file:{editorType:e.editorType,key:e.key},entrypoint:"search_dropdown",fileBrowserEntryPoint:!0})):t(N.Fb({file:e,entrypoint:"search_dropdown",fileBrowserEntryPoint:!0})),t(T.oB())}}:null};var q=r(852401);let G=e=>function(t){return e&&x.eD?null:{view:"folder",folderId:t.id}};(l=f||(f={})).CopyLink=u.Creators.CopyViewLink(G(!1)),l.Open=u.Creators.Open(G(!1)),l.OpenInNewTab=u.Creators.OpenViewInNewTab(G(!0)),l.ShowInTeam=e=>{let t=(0,w.wA)(),{team_id:r}=e;return r?{id:"show_in_team",text:"Show team",onClick:()=>{t(T.sf({view:"team",teamId:r}))}}:null},l.Share=e=>{let t=(0,w.wA)();return{id:"share_folder",text:"Share",onClick:()=>{t(L.to({type:q.WY,data:{folderId:e.id}}))}}};var Q=r(613629),X=r(634993),J=r(508295);let Z=e=>({view:"communityHub",subView:"hubFile",hubFileId:e.id});(a=_||(_={})).Open=u.Creators.Open(Z),a.OpenInNewTab=u.Creators.OpenViewInNewTab(Z),a.CopyLink=u.Creators.CopyViewLink(Z),a.Duplicate=e=>{let t=(0,w.wA)(),r=(0,J.iZ)();return{id:"duplicate_hub_file",text:"Duplicate",onClick:()=>{r?t((0,X.p7)({hubFileId:e.id,workspace:{userId:r.id,orgId:null}})):t(Q.F.enqueue({message:"Must be signed in to duplicate a file",error:!0}))}}};let ee=e=>function(t){return e&&x.eD?null:{view:"communityHub",subView:"plugin",publishedPluginId:t.id}};(i=h||(h={})).Open=u.Creators.Open(ee(!1)),i.OpenInNewTab=u.Creators.OpenViewInNewTab(ee(!0)),i.CopyLink=u.Creators.CopyViewLink(ee(!1));let et=e=>({view:"communityHub",subView:"handle",handle:e.profile_handle});(o=m||(m={})).Open=u.Creators.Open(et),o.OpenInNewTab=u.Creators.OpenViewInNewTab(et),o.CopyLink=u.Creators.CopyViewLink(et);var er=r(140979),en=r(644350),el=r(621995);let ea=e=>{let t=(0,er.bc)(en.yQw,{teamId:e.id}).transform(({team:e})=>!e?.canRead).unwrapOr(!1);return{view:"team",teamId:e.id,overrides:{disabled:!!t}}};(s=y||(y={})).Open=u.Creators.Open(ea),s.OpenInNewTab=u.Creators.OpenViewInNewTab(function(e){return x.eD?null:ea(e)}),s.CopyLink=u.Creators.CopyViewLink(ea),s.Leave=e=>{let t=(0,w.wA)(),r=(0,w.d4)(e=>e.user),n=(0,w.d4)(t=>t.roles?.byTeamId[e.id]);return r&&n&&n[r.id]?{id:"leave_team_prompt",text:"Leave team",onClick:()=>{t((0,L.to)({type:el.p,data:{teamId:e.id}}))}}:null};var ei=r(440103);let eo=e=>function(t){return e&&x.eD?null:{view:"user",userId:t.id,orgId:t.org_id,userViewTab:ei.o.INTERNAL_PROFILE}};(d=E||(E={})).Open=u.Creators.Open(eo(!1)),d.OpenInNewTab=u.Creators.OpenViewInNewTab(eo(!0)),d.CopyLink=u.Creators.CopyViewLink(eo(!1));let es=e=>function(t){return e&&x.eD?null:{view:"communityHub",subView:"widget",widgetId:t.id}};(c=b||(b={})).Open=u.Creators.Open(es(!1)),c.OpenInNewTab=u.Creators.OpenViewInNewTab(es(!0)),c.CopyLink=u.Creators.CopyViewLink(es(!1));let ed=A([h.Open,h.OpenInNewTab,u.Separator,h.CopyLink]),ec=A([_.Open,_.OpenInNewTab,u.Separator,_.CopyLink,_.Duplicate]),eu=A([_.Open,u.Separator,_.CopyLink,_.Duplicate]),ep=A([E.Open,E.OpenInNewTab,u.Separator,E.CopyLink]),ef=A([m.Open,m.OpenInNewTab,u.Separator,m.CopyLink]),e_=A([y.Open,y.OpenInNewTab,u.Separator,y.Leave]),eh=A([b.Open,b.OpenInNewTab,u.Separator,b.CopyLink]);function em(e){let t,{data:r,canAccessFileResultFolder:n}=e.selected,l=(t=e.isDropdown,A([p.Open].concat([p.OpenInNewTab],[u.Separator],[p.CopyLink],t?[]:[p.Share],n?[p.ShowInFolder]:[],[p.SetFavoriteStatus])));if(!("search_model_type"in r))return(0,g.jsx)(l,{targetRect:e.targetRect,data:k.F.toLiveGraph(r)});switch(r.search_model_type){case R.uH.HUB_FILES:if(x.eD)return(0,g.jsx)(eu,{targetRect:e.targetRect,data:r.model});return(0,g.jsx)(ec,{targetRect:e.targetRect,data:r.model});case R.uH.PUBLIC_PLUGINS:return(0,g.jsx)(ed,{targetRect:e.targetRect,data:r.model});case R.uH.PUBLIC_PROFILES:return(0,g.jsx)(ef,{targetRect:e.targetRect,data:r.model});case R.uH.USERS:return(0,g.jsx)(ep,{targetRect:e.targetRect,data:r.model});case R.uH.FILES:return(0,g.jsx)(l,{targetRect:e.targetRect,data:k.F.toLiveGraph(r.model)});case R.uH.TEAMS:return(0,g.jsx)(e_,{targetRect:e.targetRect,data:r.model});case R.uH.PROJECTS:let a,i=(a=e.isDropdown,A([f.Open].concat([f.OpenInNewTab],[u.Separator],a?[]:[f.Share],[f.ShowInTeam])));return(0,g.jsx)(i,{targetRect:e.targetRect,data:r.model});case R.uH.PRIVATE_PLUGINS:return(0,g.jsx)(ed,{targetRect:e.targetRect,data:r.model});case R.uH.PUBLIC_WIDGETS:case R.uH.PRIVATE_WIDGETS:return(0,g.jsx)(eh,{targetRect:e.targetRect,data:r.model});default:return(0,v.xb)(r)}}let{Context:ey,Provider:eE}=function(e,t){let r=F.createContext({onContextMenuClick:(e,t)=>{}});function n(r){let n=(0,w.d4)(e=>e.dropdownShown);return n&&n.data&&n.type===e?t(r,{...n.data}):null}let l=class extends F.PureComponent{constructor(){super(...arguments),this.onContextMenuClick=(t,r)=>{r.stopPropagation(),r.preventDefault();let n=window.innerWidth,l=window.innerHeight,a={};a={left:r.clientX<n/2?r.clientX:"auto",right:r.clientX<n/2?"auto":n-r.clientX,top:r.clientY<l/2?r.clientY:"auto",bottom:r.clientY<l/2?"auto":l-r.clientY},this.props.onContextClick&&this.props.onContextClick(t,r),this.props.dispatch(T.j7({type:e,data:{selected:t,targetRect:a,modifiers:(0,I.sN)(r)}}))}}render(){let e={onContextMenuClick:this.onContextMenuClick};return(0,g.jsx)(r.Provider,{value:e,children:this.props.children})}};return{Context:r,Provider:e=>{let t=(0,w.wA)(),r=(0,w.d4)(e=>e.dropdownShown);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l,{dispatch:t,dropdownShown:r,...e}),(0,g.jsx)(n,{...e,children:void 0})]})}}}("search-results-context-menu",(e,t)=>{let{data:r,index:n}=t.selected;return"search_model_type"in r?(0,g.jsx)(O.G,{category:r.search_model_type,searchResult:r,index:n,children:(0,g.jsx)(em,{isDropdown:e.isDropdown,...t})}):(0,g.jsx)(em,{isDropdown:e.isDropdown,...t})});function eb(e){return(0,g.jsx)("div",{onContextMenu:t=>{let r={index:e.index,data:e.data};e.onContextMenu(r,t)},children:e.children})}function eg(e){return(0,g.jsx)(ey.Consumer,{children:t=>(0,g.jsx)(eb,{onContextMenu:t.onContextMenuClick,...e})})}let ev=ey,ex=eE},645569(e,t,r){r.d(t,{R:()=>n});let n="FACETED_SEARCH_MODAL_DEPRECATED_TYPE"},629239(e,t,r){if(r.d(t,{C:()=>o}),1464==r.j)var n=r(523924);var l=r(801236),a=r(832763);if(1464==r.j)var i=r(487817);function o(e){let t=(0,l.NN)();switch(e.type){case a.nb.FILE:return t(e.file);case a.nb.PINNED_FILE:case a.nb.OFFLINE_FILE:if(e.file.editorType===i._Y.WHITEBOARD)return l.y1.WHITEBOARD;if(e.file.editorType===i._Y.SLIDES)return l.y1.SLIDES;if(e.file.editorType===i._Y.SITES)return l.y1.SITES;if(e.file.editorType===i._Y.COOPER)return l.y1.COOPER;if(e.file.editorType===i._Y.FIGMAKE)return l.y1.FIGMAKE;if(e.file.editorType===i._Y.DESIGN||null===e.file.editorType)return l.y1.DESIGN;(0,n.xb)(e.file.editorType);case a.nb.PROTOTYPE:return l.y1.PROTOTYPE;case a.nb.REPO:return l.y1.REPO;default:(0,n.xb)(e)}}},328403(e,t,r){r.d(t,{EB:()=>c,WJ:()=>p,ym:()=>u});var n=r(105652),l=r(645186),a=r(436174),i=r(490753);if(1464==r.j)var o=r(898312);var s=r(985373),d=r(389218);function c(){let e=u(),t=p();return n.useCallback(async(r,n)=>{(n?.preventDefault(),n&&((0,i.oJ)(n)||1===n.button))?t(r):await e(r)},[e,t])}function u(){let e=(0,l.wA)();return n.useCallback(async t=>{e(s.oB()),await e(o.gN(t))},[e])}function p(){let e=(0,l.wA)(),t=(0,l.Pj)();return n.useCallback(r=>{e(s.oB());let n=o.gN(r),l=t.getState(),i=(0,d.xS)(l,n.payload);a.Ay.redirect(i,"_blank")},[e,t])}},738109(e,t,r){r.d(t,{v:()=>I});var n=r(105652),l=r(645186);if(1464==r.j)var a=r(523924);var i=r(30890),o=r(921282),s=r(436174),d=r(490753),c=r(985373),u=r(942496),p=r(944706),f=r(575425),_=r(303875),h=r(682894),m=r(832763),y=r(865780),E=r(773201),b=r(508295),g=r(886213),v=r(458983);if(1464==r.j)var x=r(323440);var F=r(309295);if(1464==r.j)var w=r(153645);function I(){let e=(0,b.iZ)(),t=(0,y.dq)(),r=(0,v.cD)(),a=(0,E._6)(),i=(0,l.wA)(),s=(0,l.d4)(e=>e.selectedBranchKeyByRepoId);return n.useCallback(async(n,l)=>{i(c.oB());let u=l&&1===l.button,p=l&&((0,d.Fo)(l)||u),f=null;if(p&&l?.shiftKey?f=o.aw.FOCAL_TAB:p?f=o.aw.BACKGROUND_TAB:l?.shiftKey&&(f=o.aw.NEW_WINDOW),o.eD){T({tile:n,selectedBranchKeyByRepoId:s,dispatch:i,user:e,target:f}),l?.preventDefault();return}return null!=f&&l?void k({tile:n,e:l,selectedBranchKeyByRepoId:s,target:f,dispatch:i}):(l?.preventDefault(),void await R({tile:n,selectedBranchKeyByRepoId:s,dispatch:i,user:e,selectedView:a,currentUserOrgId:t,currentTeamId:r}))},[s,i,e,t,r,a])}let T=({tile:e,selectedBranchKeyByRepoId:t,dispatch:r,user:n,target:l})=>{if(!o.eD)return void(0,a.KF)(!0,"Should not be calling openGenericTileDesktop if not in the desktop app");l=l??o.aw.FOCAL_TAB;let i=m.Tf.getIsTeamTemplate(e),s=m.Tf.getName(e),d=m.Tf.getEditorType(e);switch(e.type){case m.nb.FILE:o.eD.openFile({fileKey:e.file.key,title:e.file.name,fileEditorType:e.file.editorType,target:l,isBranch:(0,_.Kz)(e.file),isLibrary:!!e.file.lastPublishedAt,isTeamTemplate:i,userId:n?.id});break;case m.nb.PINNED_FILE:o.eD.openFile({fileKey:e.file.key,title:s,fileEditorType:d,isTeamTemplate:i,target:l,userId:n?.id});break;case m.nb.PROTOTYPE:o.eD.openPrototype(e.prototype.file_key,e.prototype.page_id,e.prototype.fig_file.name||"",l,n?.id);break;case m.nb.REPO:let c=(0,_.mr)(e.repo,e.branches,t);c&&o.eD.openFile({fileKey:c.key,title:c.name,fileEditorType:c.editor_type,target:l,isBranch:(0,_.Xm)(c),isLibrary:!!c.last_published_at,userId:n?.id});break;case m.nb.OFFLINE_FILE:r(u.NA({file:e.file,openNewFileIn:F.ai.NEW_TAB,source:x.U.OFFLINE_FILE_TILE}));break;default:(0,a.xb)(e)}},k=({tile:e,e:t,selectedBranchKeyByRepoId:r,dispatch:n})=>{e.type===m.nb.OFFLINE_FILE&&n(u.NA({file:e.file,openNewFileIn:F.ai.NEW_TAB,source:x.U.OFFLINE_FILE_TILE}));let l=m.Tf.getEditUrl(e,r);s.Ay.redirect(l,"_blank"),t.preventDefault()},R=async({tile:e,selectedBranchKeyByRepoId:t,dispatch:r,currentUserOrgId:n,selectedView:l,currentTeamId:o,user:s})=>{let d="recentsAndSharing"===l.view||"folder"===l.view?l:void 0;r(p.c5({planId:n||o,planType:n?w.O.ORG:w.O.TEAM}));let y={user:s,teamId:o,orgId:n,selectedView:l};switch(e.type){case m.nb.FILE:i.N7(n,e.file.parentOrgId,o,e.file.teamId)?i.QV({file:{key:e.file.key,editorType:e.file.editorType||void 0}},y):r(c.sf({view:"fullscreen",fileKey:e.file.key,editorType:h.z4.getIsExtension()?f.nT.DevHandoff:e.file.editorType?(0,f.wN)(e.file.editorType):f.nT.Design,prevSelectedView:d}));break;case m.nb.PINNED_FILE:let E=await g.M4.fetchFile(e.file.key);i.N7(n,E.parent_org_id,o,E.team_id)?i.QV({file:{key:e.file.key,editorType:e.file.editorType}},y):r(c.sf({view:"fullscreen",fileKey:e.file.key,editorType:(0,f.wN)(e.file.editorType),prevSelectedView:d}));break;case m.nb.PROTOTYPE:let b=e.prototype.fig_file;i.N7(n,b.parent_org_id,o,b.team_id)?i.QV({base:"proto",file:{key:b.key,editorType:b.editor_type||void 0},nodeId:e.prototype.page_id},y):r(c.sf({view:"prototype",file:b,nodeId:e.prototype.page_id,prevSelectedView:d}));break;case m.nb.REPO:let v=(0,_.mr)(e.repo,e.branches,t);if(!v)return;i.N7(n,v.parent_org_id,o,v.team_id)?i.QV({file:{key:v.key}},y):r(c.sf({view:"fullscreen",fileKey:v.key,editorType:f.nT.Design,prevSelectedView:d}));break;case m.nb.OFFLINE_FILE:r(u.NA({file:e.file,openNewFileIn:F.ai.SAME_TAB,source:x.U.OFFLINE_FILE_TILE}));break;default:(0,a.xb)(e)}}},9348(e,t,r){r.d(t,{TS:()=>p,Vj:()=>f,lo:()=>u});var n=r(105652),l=r(645186),a=r(436174),i=r(490753);if(1464==r.j)var o=r(898312);var s=r(985373),d=r(865780),c=r(852734);function u(){let e=p(),t=f();return n.useCallback((r,n)=>{n&&((0,i.oJ)(n)||1===n.button)?t(r.id):(n?.preventDefault(),e(r.id))},[t,e])}function p(){let e=(0,l.wA)();return n.useCallback(t=>{e(o.kg({clickedResourceType:"team",resourceIdOrKey:t})),e(s.sf({view:"team",teamId:t}))},[e])}function f(){let e=(0,d.dq)();return n.useCallback(t=>{let r=(0,c.bL)(t,e);a.Ay.redirect(r,"_blank")},[e])}},275262(e,t,r){r.d(t,{y:()=>p});var n=r(105652),l=r(645186),a=r(436174),i=r(490753);if(1464==r.j)var o=r(848594);var s=r(985373),d=r(865780),c=r(508295);if(1464==r.j)var u=r(440103);function p(){let e=(0,l.wA)(),t=(0,c.TA)(),r=(0,d.dq)();return n.useCallback((n,l)=>{if(l&&((0,i.oJ)(l)||1===l.button)){l?.stopPropagation();let e=n.id;if(e===t)return void a.Ay.redirect(`/files/${r}/user/${e}`,"_blank");let i=n.org_id,s=(0,o.t)(n,i);return void a.Ay.redirect(s,"_blank")}l?.preventDefault(),e(s.sf({view:"user",userId:n.id,orgId:n.org_id||null,userViewTab:u.o.INTERNAL_PROFILE}))},[t,r,e])}},753495(e,t,r){r.d(t,{$:()=>i});var n=r(885705),l=r(181645),a=r(884720);let i=new class{constructor(e){this.type=e}start(e){performance.mark(`${this.type}_${e}.startSpan`,{startTime:performance.now()})}endAndReport(e){let t=performance.now(),r=`${this.type}_${e}`;performance.mark(`${r}.endSpan`,{startTime:t});try{let e=performance.measure(`${r}`,`${r}.startSpan`,`${r}.endSpan`).duration;l.az.trackDefinedEvent("file_browser.total_context_menu_load_time",{durationMs:Math.round(e),type:this.type});let t=performance.getEntriesByName(`${r}.startSpan`)[0]?.startTime??0;a.J.logVital(`${this.type}.duration`,{level:n.$.INFO,startTime:t+performance.timeOrigin,duration:e,description:`Latency for ${this.type} dropdown to render`}),performance.clearMarks(`${r}.startSpan`),performance.clearMarks(`${r}.endSpan`)}catch(e){}}}("tile-action-dropdown")},642529(e,t,r){if(r.d(t,{K:()=>a}),1464==r.j)var n=r(523924);if(1464==r.j)var l=r(487817);function a(e){switch(e){case l._Y.DESIGN:return"design";case l._Y.WHITEBOARD:return"whiteboard";case l._Y.SLIDES:return"piper";case l._Y.SITES:return"seascape";case l._Y.FIGMAKE:return"bake-filebrowser";case l._Y.COOPER:return"cooper";default:return(0,n.S9)(e,"design")}}},848594(e,t,r){r.d(t,{t:()=>n});function n(e,t){return t?`/files/${t}/user/${e.id}`:`/files/user/${e.id}`}},121267(e,t,r){r.d(t,{i:()=>eK});var n=r(239976),l=r(105652),a=r(442549),i=r(706354),o=r(181645),s=r(582036),d=r(485587),c=r(227031),u=r(684325),p=r(904788),f=r(753495),_=r(645186),h=r(745463),m=r(194535),y=r(805242);function E({children:e,portalTarget:t,portalKey:r}){return(0,y.createPortal)(e,t,r)}var b=r(996501),g=r(165617),v=r(523924),x=r(850159),F=r(954720),w=r(113641),I=r(904511),T=r(927243),k=r(303875),R=r(832763),O=r(83522),S=r(109095),C=r(79303),A=r(741405),j=r(493094),P=r(863825),N=r(741542),L=r(198788);function M(){let{Sprig:e}=(0,L.A)();return l.useCallback(()=>{(0,N.getFeatureFlags)().file_browser_sentiment_survey&&e("setAttribute","fb_file_organized",!0)},[e])}var D=r(286185),W=r(964680),B=r(508295),K=r(126002),U=r(110638),V=r(798413),Y=r(613549),H=r(138107),z=r(154077),$=r(571916),q=r(735594),G=r(38900),Q=r(148929),X=r(331850),J=r(32763),Z=r(684769),ee=r(350923),et=r(998277),er=r(423915),en=r(946182),el=r(183890),ea=r(487817),ei=r(129862),eo=r(27261),es=r(30890),ed=r(436174),ec=r(985373),eu=r(990483),ep=r(921282),ef=r(942496),e_=r(282008),eh=r(323440),em=r(309295),ey=r(56967),eE=r(167523),eb=r(460677),eg=r(207187),ev=r(700354),ex=r(462198),eF=r(225376),ew=r(920952),eI=r(701156),eT=r(506213),ek=r(542179),eR=r(907988),eO=r(73089),eS=r(89393),eC=r(446989),eA=r(642135),ej=r(636080);function eP({loadedQueries:e,onMount:t,openTile:r,permsByFileKey:a,permsByPrototypeId:o,permsByRepoId:d,selectedTiles:c,sourceFileKey:u,tile:f,tileActions:y,trackSearchFn:N}){let eP=(0,_.wA)(),{dropdownShown:eN}=(0,m.R)(e=>({dropdownShown:e.dropdownShown})),eL=(0,s.gS)(c),eM=l.useMemo(()=>Object.keys(eL[b.F.FILES]),[eL]),eD=l.useMemo(()=>Object.keys(eL[b.F.REPOS]),[eL]),eW=Object.keys(eL[b.F.FILES]).length,eB=Object.keys(eL[b.F.PINNED_FILES]).length,eK=Object.keys(eL[b.F.PROTOTYPES]).length,eU=Object.keys(eL[b.F.REPOS]).length,eV=Object.keys(eL[b.F.OFFLINE_FILES]).length,eY=eW+eB+eU+eK+eV,eH=1===eY,ez=l.useMemo(()=>({isSingleTileSelected:eH,numFilesSelected:eW,numPinnedFilesSelected:eB,numPrototypesSelected:eK,numReposSelected:eU,numOfflineFilesSelected:eV,totalTilesSelected:eY}),[eH,eW,eB,eK,eU,eV,eY]),e$=function({loadedQueries:e,sourceFileKey:t,tileActions:r,tileSelectCounts:n}){let a=(0,_.wA)();return l.useMemo(()=>{let{isSingleTileSelected:l,numFilesSelected:i,numPinnedFilesSelected:o,numReposSelected:s}=n,d=null!=e.createBranchStatus&&"disabled"===e.createBranchStatus.status;return[r.createBranch&&l&&(1===i||1===o||1===s)&&t&&e.createBranchStatus&&"hidden"!==e.createBranchStatus.status?{displayText:(0,x.t)("tile.dropdown.create_new_branch"),recordingKey:"create-branch",callback:()=>{let r=e.createBranchStatus;if(!t||!r)return;let n=w.e0.FILE_BROWSER;switch(r.status){case"upsell-org":a(F.j({trackingContextName:n}));break;case"enabled":a(F.l({trackingContextName:n,sourceFileKey:t,dispatchedFromEditor:!1}));break;case"disabled":case"hidden":break;default:(0,v.xb)(r.status)}},disabled:d}:null]},[n,e.createBranchStatus,r.createBranch,t,a])}({loadedQueries:e,sourceFileKey:u,tileActions:y,tileSelectCounts:ez}),eq=function({tileSelectCounts:e,tileActions:t,tile:r}){let n=(0,_.wA)(),{selectedBranchKeyByRepoId:a,attributionContextKey:i}=(0,m.R)(e=>({selectedBranchKeyByRepoId:e.selectedBranchKeyByRepoId,attributionContextKey:e.sharingAttributionContextKey})),o=r.type===R.nb.OFFLINE_FILE?r.file:null;return l.useMemo(()=>{let{isSingleTileSelected:l}=e;return[t.copyLink&&l&&!o?{displayText:(0,x.t)("tile.dropdown.copy_link"),recordingKey:"copy-link",callback:()=>(e=>{switch(e.type){case R.nb.FILE:let t=e.file;n(T.S({fileKey:t.key,url:(0,O.jN)({file:t,attributionContext:(0,S.b)(i,S.d.FILE_TILE_CONTEXT_MENU),allowDefaulting:!0}),source:S.d.FILE_TILE_CONTEXT_MENU}));break;case R.nb.PINNED_FILE:n(T.S({fileKey:e.file.key,url:(0,O.jN)({file:e.file,attributionContext:(0,S.b)(i,S.d.FILE_TILE_CONTEXT_MENU),allowDefaulting:!0}),source:S.d.FILE_TILE_CONTEXT_MENU}));break;case R.nb.PROTOTYPE:n(I.S({url:(0,O.Kw)({base:"proto",file:{key:e.prototype.file_key},nodeId:e.prototype.page_id,attributionContext:(0,S.b)(i,S.d.FILE_TILE_CONTEXT_MENU)})}));break;case R.nb.REPO:let r=(0,k.mr)(e.repo,e.branches,a);n(T.S({fileKey:r.key,url:(0,k.CE)(r,e.repo,"file"),source:S.d.FILE_TILE_CONTEXT_MENU}))}})(r)}:null]},[e,t.copyLink,o,n,i,a,r])}({tileSelectCounts:ez,tileActions:y,tile:f}),eG=function({permsByFileKey:e,permsByRepoId:t,selectedFileKeys:r,selectedRepoIds:n,selectedTiles:a,tile:i,tileActions:o,tileSelect:s,tileSelectCounts:d}){let c=(0,_.wA)(),{selectedBranchKeyByRepoId:u}=(0,m.R)(e=>({selectedBranchKeyByRepoId:e.selectedBranchKeyByRepoId})),p=(0,B.TA)(),[f]=(0,j.IT)((0,W.OL)({userId:p})),h=(0,l.useMemo)(()=>f?.data??{},[f]),y=M(),E=l.useMemo(()=>(0,C.n)(r,e)||[],[e,r]),g=l.useMemo(()=>(0,A.zj)(n,t)||[],[t,n]),v=l.useMemo(()=>Object.keys((0,W.gp)(s[b.F.OFFLINE_FILES],{offlineFiles:h})),[h,s]);return l.useMemo(()=>{let{numFilesSelected:r,numPinnedFilesSelected:n,numPrototypesSelected:l,numReposSelected:s,numOfflineFilesSelected:p,totalTilesSelected:f}=d,_=g.length+E.length+v.length,h=!!(o.delete&&_>0&&0===n),m=r+n+s+p,b="";1===m||(b=(0,x.t)("tile.dropdown.multiple_file_suffix",{totalSelected:m}));let F=b,w=!1;if(i.type===R.nb.REPO){let e=(0,k.mr)(i.repo,i.branches,u);w=!(0,k.SA)(e,i.repo)}let I=w?(0,x.t)("tile.dropdown.move_file_and_branches_to_trash"):1===f?(0,x.t)("tile.dropdown.trash_single_tile"):(0,x.t)("tile.dropdown.trash_file",{objText:F});return[h?{displayText:I,recordingKey:"delete",callback:()=>{let{selectedCount:r,deletableCount:n,allDrafts:l,filesByKey:i,reposById:o,offlineFilesByKey:s}=D.Mw(a,e,t);if(n<r){let e=(0,x.t)("tile.dropdown.no_permission_to_trash_error");c(P.s.error(e));return}c(D.U1({filesByKey:i,reposById:o,offlineFilesByKey:s,allDrafts:l})),y()},disabled:_<r||l>0}:null]},[E.length,v.length,g.length,c,e,t,a,o.delete,d,u,i,y])}({permsByFileKey:a,permsByRepoId:d,selectedFileKeys:eM,selectedRepoIds:eD,selectedTiles:c,tileSelect:eL,tileSelectCounts:ez,tileActions:y,tile:f}),eQ=function({permsByFileKey:e,permsByRepoId:t,selectedFileKeys:r,selectedRepoIds:n,selectedTiles:a,tile:i,tileActions:o,tileSelect:s,tileSelectCounts:d}){let c=i.type===R.nb.FILE?i.file:null,u=(0,U.FC)(),p=(0,_.wA)(),{user:f,currentUserOrgId:h}=u,{selectedBranchKeyByRepoId:y,isOnDeleted:E}=(0,m.R)(e=>({selectedBranchKeyByRepoId:e.selectedBranchKeyByRepoId,isOnDeleted:"deletedFiles"===e.selectedView.view})),g=i.type===R.nb.FILE?i.file?.teamId:void 0,v=(0,H.vt)(g),F=(0,Y.jn)(),w=M(),I=l.useMemo(()=>Object.keys(s[b.F.PINNED_FILES]),[s]),T=l.useMemo(()=>(0,C.v_)(r,e).length,[e,r]),k=l.useMemo(()=>(0,C.v_)(I,e).length,[e,I]),O=l.useMemo(()=>{let e={};for(let t of a.filter(e=>e.type===R.nb.REPO)){let r=t.repo.id,n=y[r],l=t.repo.default_file_key;n?e[r]=n:l&&(e[r]=l)}return e},[a,y]),S=l.useMemo(()=>E?Object.keys(s[b.F.REPOS]).length:((0,A.nL)(n,O,t)||[]).length,[E,t,s,n,O]);return l.useMemo(()=>{let{numFilesSelected:e,numPinnedFilesSelected:t,numPrototypesSelected:r,numReposSelected:n,numOfflineFilesSelected:l,totalTilesSelected:a}=d,i=(0,V.R$)(f,h),u=!!c&&!!c.teamId&&v,_=(T>0||k>0||S>0)&&!i&&!u&&!F,m=!!(o.duplicate&&_),y=!!(o.duplicateToDrafts&&_),E=e+t+n,b=T<e||k<t||S<n||r>0||l>0,g="";1!==E&&(g=(0,x.t)("tile.dropdown.multiple_file_suffix",{totalSelected:E}));let I=g;return[m?{displayText:1===a?(0,x.t)("tile.dropdown.duplicate_single_tile"):(0,x.t)("tile.dropdown.duplicate",{objText:I}),recordingKey:"duplicate",callback:()=>{p((0,K.n_)({toDraft:!1,tileSelect:s})),w()},disabled:b}:null,y?{displayText:1===E?(0,x.t)("tile.dropdown.duplicate_to_draft_single_file_or_repo"):(0,x.t)("tile.dropdown.duplicate_to_draft",{objText:I}),recordingKey:"duplicate-to-drafts",callback:()=>{p((0,K.g4)({tileSelect:s})),w()},disabled:b}:null]},[d,f,h,c,v,T,k,S,F,o.duplicate,o.duplicateToDrafts,p,s,w])}({permsByFileKey:a,permsByRepoId:d,tileSelectCounts:ez,tileActions:y,tile:f,selectedFileKeys:eM,selectedRepoIds:eD,selectedTiles:c,tileSelect:eL}),eX=function({loadedQueries:e,permsByFileKey:t,permsByPrototypeId:r,permsByRepoId:n,tile:a,tileSelectCounts:i}){let o=(0,U.FC)(),s=(0,_.wA)(),{currentUserOrgId:d}=o,{selectedView:c}=(0,m.R)(e=>({selectedView:e.selectedView})),u=M();return l.useMemo(()=>{let l=a.type===R.nb.FILE?a.file:null,o=a.type===R.nb.PINNED_FILE?a.file:null,p=o||l,f=a.type===R.nb.REPO?a.repo:null,_=a.type===R.nb.REPO?(0,R.y_)(a):null,h=a.type===R.nb.PROTOTYPE?a.prototype:null,m=(p&&t[p.key])??null,y=(f&&n[f.id])??null,E=(h&&r[h.file_key])??null,{isSingleTileSelected:b,numFilesSelected:g,numPinnedFilesSelected:v,numPrototypesSelected:F,numReposSelected:w}=i,I=(0,$.D6)(d),T=(e,t,r)=>{let n={file:e,sectionId:t,entrypoint:"dropdown",fileBrowserFavorite:!0};r?s(z.Fb(n)):s(z.qP(n)),u()},k=(e,t)=>{let r={prototype:e,entrypoint:"dropdown",fileBrowserEntryPoint:!0};t?s(z.iN(r)):s(z.X7(r))},O=(e,t,r,n)=>{let l=e.is_favorited&&t.some(e=>e.id===r?.id);return{recordingKey:"add-to-sidebar",displayText:e.is_favorited?`${(0,x.t)("favorited_resources.indicate_section_prefix")}: ${r?.name||(0,x.t)("sidebar.starred")}`:(0,x.t)("favorited_resources.add_to_sidebar"),children:t.map(({id:e,name:t})=>({recordingKey:"add-to-sidebar-section",displayText:""===t?(0,x.t)("sidebar.starred"):t,isChecked:r?.id===e,alwaysShowCheckMarkOffset:l,callback:()=>n(e)}))}},S=(e,t,r,n)=>{if(null===e.default_file_key)return void console.error("Repo file key should not be null");let l={file:q.F.toLiveGraph(t),repoId:e.id,sectionId:r,entrypoint:"dropdown",fileBrowserFavorite:!0};n?s(z.Fb(l)):s(z.qP(l))},C=(0,$.D6)(d),A=C?(0,x.t)("favorited_resources.remove_from_sidebar"):(0,x.t)("tile.favoriting.remove_from_favorites");return[p&&(()=>{if("deletedFiles"===c.view||p?.parentOrgId!==d)return!1;let t=m?.canFavorite&&e.isResourceInUserPlan,r=m?.canFavorite&&!m?.isFavorited&&e.isResourceInUserPlan;return!!("team"!==c.view&&!e.hasMaxFavorites&&!I&&(r&&1===g&&b||o&&1===v&&!o?.isFavorited))||(I&&e.userSidebarSections,!!t&&1===g&&!!b||!!o&&1===v)})()?((t,r)=>{let{favoriteSidebarSection:n}=e;return C&&null!=r&&r?.length>0?O({is_favorited:t.isFavorited},r,n,e=>{T(t,e,n?.id!==e)}):{displayText:(0,x.t)("tile.favoriting.add_to_favorites"),recordingKey:"favorite-file",callback:()=>T(t,void 0,!0)}})(p,e.userSidebarSections):null,h&&(()=>{if("deletedFiles"===c.view||"team"===c.view||h?.parent_org?.id!==d)return!1;let t=E?.canFavorite&&e.isResourceInUserPlan;return!!(!e.hasMaxFavorites&&!I&&1===F&&b&&t)})()?{displayText:(0,x.t)("tile.favoriting.add_to_favorites"),recordingKey:"favorite-prototype",callback:()=>k(h,!0)}:null,f&&_&&(()=>{if("deletedFiles"===c.view||f?.parent_org_id!==d)return!1;let t=y?.canFavorite&&e.isResourceInUserPlan;return!!("team"!==c.view&&!e.hasMaxFavorites&&!I&&1===w&&b&&t)||(I&&e.userSidebarSections,1===w&&!!b&&!!t)})()?((t,r,n)=>{let{favoriteSidebarSection:l}=e;return C&&null!=n?O(t,n,l,e=>{S(t,r,e,l?.id!==e)}):{displayText:(0,x.t)("tile.favoriting.add_to_favorites"),recordingKey:"favorite-repo",callback:()=>S(t,r,void 0,!0)}})(f,_,e.userSidebarSections):null,p&&(()=>{if("deletedFiles"===c.view||"team"===c.view||p?.parentOrgId!==d)return!1;let e=m?.canFavorite&&m?.isFavorited;return!!(1===g&&b&&e||o&&1===v&&o?.isFavorited)})()?{displayText:A,recordingKey:"unfavorite-file",callback:()=>T(p,void 0,!1)}:null,h&&(()=>{if("deletedFiles"===c.view||"team"===c.view||h?.parent_org?.id!==d)return!1;let e=E?.canUnfavorite;return!!(1===F&&b&&e)})()?{displayText:A,recordingKey:"unfavorite-prototype",callback:()=>k(h,!1)}:null,f&&_&&(()=>{if("deletedFiles"===c.view||"team"===c.view||f?.parent_org_id!==d)return!1;let e=y?.canUnfavorite;return!!(1===w&&b&&e)})()?{displayText:A,recordingKey:"unfavorite-repo",callback:()=>S(f,_,void 0,!1)}:null]},[a,t,n,r,i,d,e,u,s,c.view])}({loadedQueries:e,permsByFileKey:a,permsByPrototypeId:o,permsByRepoId:d,tile:f,tileSelectCounts:ez}),eJ=function({tile:e}){let t=(0,_.wA)(),r=(0,X.D6)("TileActionDropdown"),n=(0,X.Kd)(r).unwrapOr(!1);return l.useMemo(()=>{let r=e.type===R.nb.FILE?e.file:null,l=e.type===R.nb.PINNED_FILE?e.file:null,a=e.type===R.nb.REPO?(0,R.y_)(e):null,i=a?q.F.toLiveGraph(a):null,o=(l||r)??i,s=(0,Z.MG)(o?{parentOrgId:o.parentOrgId||null}:null,!!o?.lastPublishedAt,n);return[o&&s?{displayText:(0,x.t)("fullscreen.filename_view.file_analytics"),recordingKey:"file-analytics",callback:()=>{null!=o.folderId&&t((0,G.to)({type:J.e,data:{fileKey:o.key,entrypoint:Q.F.FileNavigation}}))}}:null]},[n,t,e])}({tile:f}),eZ=function({tile:e,permsByFileKey:t,permsByRepoId:r,tileActions:n,tileSelect:a,tileSelectCounts:i}){let o=(0,_.wA)(),{openFileFolderId:s,selectedView:d,pinnedFileKeys:c}=(0,m.R)(e=>({openFileFolderId:e.openFile?.folderId,selectedView:e.selectedView,pinnedFileKeys:e.pinnedFileKeys})),u=M(),p=(0,ee.md)(er.V1);return l.useMemo(()=>{let l=e.type===R.nb.FILE?e.file:null,f=e.type===R.nb.PINNED_FILE?e.file:null,_=f||l,h=e.type===R.nb.REPO?e.repo:null,m=(_&&t[_.key])??null,y=(h&&r[h.id])??null,{numFilesSelected:E,numPinnedFilesSelected:g,numReposSelected:v,isSingleTileSelected:F}=i,w="folder"===d.view&&c[d.folderId]||p&&s&&c[s]||[],I=l&&w.includes(l.key),T=f&&w.includes(f.key),k=h&&h.default_file_key&&w.includes(h.default_file_key),O=I||T||k||Object.keys(a[b.F.PINNED_FILES]).length>0,S=n.pinToFolder&&!n.showInFolder&&F,C=m?.canPin,A=y?.canPin,j=!!(!O&&1===E&&S&&C),P=!!(!O&&1===v&&S&&A),N=!!(O&&g<=1&&S&&C),L=!!(O&&v<=1&&S&&A);return[l&&j?{displayText:(0,x.t)("tile.dropdown.pin_to_project"),recordingKey:"pin-file-to-folder",callback:()=>{null!=l.folderId&&o(et.gO({folderId:l.folderId,teamId:l.teamId,fileKey:l.key})),u()}}:null,h&&P?{displayText:(0,x.t)("tile.dropdown.pin_to_project"),recordingKey:"pin-repo-to-folder",callback:()=>{null!=h.folder_id&&null!=h.default_file_key&&o(et.gO({folderId:h.folder_id,teamId:h.team_id,fileKey:h.default_file_key})),u()}}:null,_&&N?{displayText:(0,x.t)("tile.dropdown.remove_project_pin"),recordingKey:"unpin-file-from-folder",callback:()=>{let e;null!=(e=_.folderId)&&o(et.z6({folderId:e,fileKey:_.key})),u()}}:null,h&&L?{displayText:(0,x.t)("tile.dropdown.remove_project_pin"),recordingKey:"unpin-repo-from-folder",callback:()=>{null!=h.folder_id&&null!=h.default_file_key&&o(et.z6({folderId:h.folder_id,fileKey:h.default_file_key})),u()}}:null]},[e,t,r,i,d,c,p,s,a,n.pinToFolder,n.showInFolder,u,o])}({permsByFileKey:a,permsByRepoId:d,tile:f,tileActions:y,tileSelect:eL,tileSelectCounts:ez}),e0=function({permsByFileKey:e,permsByRepoId:t,selectedFileKeys:r,selectedRepoIds:n,selectedTiles:a,tile:i,tileActions:o,tileSelect:s,tileSelectCounts:d}){let c=(0,_.wA)(),u=(0,en.bY)("file_multi_move_limit").getDynamicConfig().get("fileLimit",100),p=M(),f=l.useMemo(()=>(0,C.Ul)(r,e)||[],[e,r]),h=l.useMemo(()=>(0,A.ae)(n,t)||[],[t,n]),m=l.useMemo(()=>Object.keys(s[b.F.FILES]).length+Object.keys(s[b.F.REPOS]).length,[s]),y=l.useMemo(()=>{let l=new Set,a=new Set;return r.forEach(t=>{let r=e[t];r&&(l.add(r.planType||""),a.add(r.planId||""))}),n.forEach(e=>{let r=t[e];r&&(l.add(r.planType||""),a.add(r.planId||""))}),1===l.size&&(l.has("team")||1===a.size)},[e,t,r,n]),E=(0,eo.aI)(),g=i.type===R.nb.FILE?i.file:null,v=(i.type===R.nb.PINNED_FILE?i.file:null)||g,F=i.type===R.nb.REPO?i.repo:null,w=(v&&e[v.key])??null,I=(F&&t[F.id])??null,{numFilesSelected:T,numPinnedFilesSelected:k,numReposSelected:O,numOfflineFilesSelected:S,totalTilesSelected:j,isSingleTileSelected:P}=d,N=(0,ei.jB)({files:g?[q.F.toSinatra(g)]:[],repos:F?[F]:[],destinationFolderId:R.Tf.getFolderId(i),isDestinationDrafts:!1}),L=(0,ei.Cp)(N.destinationPlan?.key||null,N.licenseType);return l.useMemo(()=>{let e,t,r=a.filter(e=>e.type===R.nb.FILE).map(e=>e.file).some(e=>e.editorType===ea._Y.FIGMAKE)&&N.requiresUpgrade&&!E,n=w?.canOpenMoveModal,l=I?.canOpenMoveModal,i=T+k+O,s=f.length+h.length,d=!!(o.moveFile&&0===S&&(P&&(1===T&&n||1===O&&l)||i>1&&i<=u&&s>0)),_="";return 1!==i&&(_=(0,x.t)("tile.dropdown.multiple_file_suffix",{totalSelected:i})),[d?(e=_,t=1!==j&&(s<i||!y),{displayText:1===m?(0,x.t)("tile.dropdown.move_file"):(0,x.t)("tile.dropdown.move_object",{objText:e}),recordingKey:"move-file",callback:()=>((e,t,r)=>{if(1===r){let r=a[0];if(r?.type===R.nb.FILE)(0,el.h)(q.F.toSinatra(r.file),null,c,void 0,void 0,{canMove:!!e?.canMove,isUserViewerRestricted:!!e?.isUserRestrictedForSeat,planUser:e?.planUser??null,inDrafts:!!e?.isDraftFile,draftsMoveData:N,hasConnectedPlanUserInOrg:L,canMoveWithReasons:e?.canMoveWithReasons});else if(r?.type===R.nb.REPO){let e=(0,R.y_)(r);(0,el.h)(e??null,r.repo,c,void 0,void 0,{canMove:!!t?.canMove,isUserViewerRestricted:!!t?.isUserRestrictedForSeat,planUser:t?.planUser??null,inDrafts:!!t?.isDraftRepo,draftsMoveData:N,hasConnectedPlanUserInOrg:L,canMoveWithReasons:t?.canMoveWithReasons})}}else{let e=a.filter(e=>e.type===R.nb.FILE).map(e=>q.F.toSinatra(e.file)),t=a.filter(e=>e.type===R.nb.REPO).map(e=>e.repo);(0,el.O)(e,t,c)}p()})(w,I,m),disabled:t||r||(0,ei.Px)(N,!!w?.isFileTypeDisabled,L),sideText:(0,ei.zS)(N,t||!!w?.isFileTypeDisabled,L),rightJustifySideText:!0}):null]},[c,N,w,L,y,P,f.length,h.length,u,T,S,k,O,m,a,o.moveFile,I,E,j,p])}({permsByFileKey:a,permsByRepoId:d,selectedFileKeys:eM,selectedRepoIds:eD,selectedTiles:c,tile:f,tileActions:y,tileSelect:eL,tileSelectCounts:ez}),e1=function({tileSelectCounts:e,tileActions:t,tile:r,permsByFileKey:n,permsByRepoId:a}){let i=(0,U.FC)(),o=(0,_.wA)(),{user:s,currentUserOrgId:d}=i;return l.useMemo(()=>{let l=r.type===R.nb.FILE?r.file:null,i=(r.type===R.nb.PINNED_FILE?r.file:null)||l,c=r.type===R.nb.REPO?r.repo:null,u=(i&&n[i.key])??null,p=(c&&a[c.id])??null,{isSingleTileSelected:f,numFilesSelected:_,numReposSelected:h}=e,m=u?.canShowInProject,y=p?.canShowInProject;return[t.showInFolder&&f&&(1===h&&y||1===_&&m)?(e=>{switch(e.type){case R.nb.FILE:return{displayText:(0,x.t)("tile.dropdown.show_in_project"),recordingKey:"show-in-project-file",callback:()=>(e=>{if(null!=e.file.folderId)if(d===e.file.parentOrgId)o(ec.sf({view:"folder",folderId:e.file.folderId}));else{let t=e.file.parentOrgId?`/files/${e.file.parentOrgId}/project/${e.file.folderId}`:`/files/project/${e.file.folderId}`;t=s?(0,es.NQ)(t,"fuid",s.id):t,ed.Ay.redirect(t)}})(e)};case R.nb.REPO:return{displayText:(0,x.t)("tile.dropdown.show_in_project"),recordingKey:"show-in-project-repo",callback:()=>{o(ec.sf({view:"folder",folderId:e.repo.folder_id}))}};default:(0,v.wc)(e.type)}})(r):null]},[r,n,a,e,t.showInFolder,d,s,o])}({tileSelectCounts:ez,permsByFileKey:a,permsByRepoId:d,tileActions:y,tile:f}),e4=function({openTile:e,tile:t,tileActions:r,tileSelectCounts:n,trackSearchFn:a}){let i=(0,_.wA)(),{selectedView:o,selectedBranchKeyByRepoId:s}=(0,m.R)(e=>({selectedView:e.selectedView,selectedBranchKeyByRepoId:e.selectedBranchKeyByRepoId})),{Sprig:d}=(0,L.A)();return l.useMemo(()=>{let{isSingleTileSelected:l}=n,c=!!(r.open&&l),u=!!(r.open&&l&&!ep.eD&&!(0,eu.ce)()),p=!!(r.open&&l&&(t.type===R.nb.FILE&&t.file.editorType===ea._Y.FIGMAKE||t.type===R.nb.PINNED_FILE&&t.file.editorType===ea._Y.FIGMAKE));return[c?{displayText:(0,x.t)("tile.dropdown.open"),recordingKey:"open",callback:(t,r,n,l)=>{e(l)}}:null,u?{displayText:(0,x.t)("tile.dropdown.open_new_tab"),recordingKey:"open-new-tab",callback:()=>(e=>{a&&a();let t=void 0===a;switch(e.type){case R.nb.FILE:let r=(0,O.rl)(e.file);(0,e_.nz)(r,e.file.key,o,i,d,t);break;case R.nb.PINNED_FILE:(0,e_.nz)((0,O.jN)(e),e.file.key,o,i,d,t);break;case R.nb.PROTOTYPE:(0,e_.D4)(e.prototype.url,e.prototype.file_key,e.prototype.page_id,o);break;case R.nb.REPO:let n=(0,k.mr)(e.repo,e.branches,s);ed.Ay.redirect((0,k.CE)(n,e.repo,"file"),"_blank");break;case R.nb.OFFLINE_FILE:i(ef.NA({file:e.file,openNewFileIn:em.ai.NEW_TAB,source:eh.U.OFFLINE_FILE_TILE}));return;default:(0,v.xb)(e)}})(t)}:null,p?{displayText:(0,x.t)("tile.dropdown.open_with_disabled_preview"),recordingKey:"open-with-disabled-preview",callback:()=>(e=>{switch(a&&a(),e.type){case R.nb.FILE:case R.nb.PINNED_FILE:if(e.file.editorType===ea._Y.FIGMAKE){let t=(0,O.jN)({file:e.file,disablePreview:!0});(0,e_.nz)(t,e.file.key,o,i,d)}}})(t)}:null]},[n,r.open,t,a,o,i,d,s,e])}({openTile:r,tile:f,tileActions:y,tileSelectCounts:ez,trackSearchFn:N}),e5=function({tileSelect:e,tileActions:t,tileSelectCounts:r}){let n=(0,_.wA)(),{fileKeysByRepoId:a}=(0,m.R)(e=>({fileKeysByRepoId:e.fileKeysByRepoId}));return l.useMemo(()=>{let l,{numOfflineFilesSelected:i}=r,o=Object.keys(e[b.F.FILES]).length+Object.keys(e[b.F.REPOS]).length+Object.keys(e[b.F.PROTOTYPES]).length;return[t.removeFromRecents&&o>0?(l=i>0,{displayText:(0,x.t)("tile.dropdown.remove_from_recent_pluralized",{numFiles:o}),recordingKey:"remove-from-recents",callback:()=>{let t=Object.keys(e[b.F.REPOS]);t.length>0&&n(eb.iC({recent_repo_ids:t}));let r=[];for(let e of t)r=r.concat(a[e]);let l=Object.keys(e[b.F.FILES]).concat(r),i=l.map(e=>({key:e}));for(let t of(i.length>0&&(0,ey.yN)(i.map(e=>e.key)).catch(e=>{throw n(P.s.error((0,x.t)("file_browser.file_browser_actions.recently_viewed_error",{numFiles:l.length}))),e}),Object.keys(e[b.F.PROTOTYPES]))){let[e,r,l]=t.split(",");n(eE.tl({fileKey:e,pageId:r}))}},disabled:l}):null]},[n,a,t.removeFromRecents,e,r])}({tileSelect:eL,tileActions:y,tileSelectCounts:ez}),e6=function({tileSelect:e,tileActions:t,tile:r}){let n=(0,_.wA)();return l.useMemo(()=>{let l=Object.keys(e[b.F.FILES]).length+Object.keys(e[b.F.PROTOTYPES]).length;return[t.removeFromSharedFiles&&1===l?{displayText:(0,x.t)("tile.dropdown.remove_from_shared_files"),recordingKey:"remove-from-shared-files",callback:()=>{let e,t,l;return e="",t="",r.type===R.nb.FILE?(e=r.sharedWithYouFields?.id??"",t=r.file.name??""):r.type===R.nb.PROTOTYPE&&(e=r.prototype.shared_with_you_id??"",t=r.prototype.fig_file?.name??r.prototype.name??""),l=async()=>{try{await (0,ey.LG)(e)}catch(e){n(P.s.error((0,x.t)("file_browser.file_browser_actions.remove_files_from_shared_files")))}},void n(G.to({type:eg.q,data:{fileName:t,onRemove:l}}))}}:null]},[n,t.removeFromSharedFiles,r,e])}({tileSelect:eL,tileActions:y,tile:f}),e2=function({tileSelectCounts:e,tileActions:t,tile:r,permsByFileKey:n,permsByRepoId:a}){let{selectedBranchKeyByRepoId:i}=(0,m.R)(e=>({selectedBranchKeyByRepoId:e.selectedBranchKeyByRepoId})),o=M(),s=(0,ee.Xr)(R.Y6);return l.useMemo(()=>{let l=r.type===R.nb.FILE?r.file:null,d=(r.type===R.nb.PINNED_FILE?r.file:null)||l,c=r.type===R.nb.REPO?r.repo:null,u=(d&&n[d.key])??null,p=(c&&a[c.id])??null,{numFilesSelected:f,numReposSelected:_,numOfflineFilesSelected:h,isSingleTileSelected:m}=e,y=u?.canRename,E=p?.canRename,b=!!(t.rename&&m&&(1===f&&y||1===_&&E||1===h)),g=r.type===R.nb.FILE||r.type===R.nb.REPO||r.type===R.nb.OFFLINE_FILE;return[b&&g?(e=>{switch(e.type){case R.nb.FILE:return{displayText:(0,x.t)("tile.dropdown.rename"),recordingKey:"rename",callback:()=>{s({type:"FILE",id:e.file.key}),o()}};case R.nb.REPO:let t=(0,k.mr)(e.repo,e.branches,i);return{displayText:(0,k.SA)(t,e.repo)?(0,x.t)("tile.dropdown.rename"):(0,x.t)("tile.dropdown.rename_file"),recordingKey:"rename",callback:()=>{s({type:"REPO",id:e.repo.id}),o()}};case R.nb.OFFLINE_FILE:return{displayText:(0,x.t)("tile.dropdown.rename"),recordingKey:"rename",callback:()=>{var t;return t=e.file,void((0,W.dm)(t),o())}};default:(0,v.xb)(e)}})(r):null]},[r,t.rename,e,i,s,n,a,o])}({permsByFileKey:a,permsByRepoId:d,tileSelectCounts:ez,tileActions:y,tile:f}),e8=function({tile:e,tileActions:t,tileSelectCounts:r,permsByFileKey:n,permsByRepoId:a}){let i=(0,_.wA)(),{selectedBranchKeyByRepoId:o}=(0,m.R)(e=>({selectedBranchKeyByRepoId:e.selectedBranchKeyByRepoId})),s=M();return l.useMemo(()=>{let l=e=>{i(ev.Z({fileKey:e.key})),s()},d=e.type===R.nb.FILE?e.file:null,c=(e.type===R.nb.PINNED_FILE?e.file:null)||d,u=e.type===R.nb.REPO?e.repo:null,p=(c&&n[c.key])??null,f=(u&&a[u.id])??null,{numFilesSelected:_,numReposSelected:h,isSingleTileSelected:m}=r,y=c?.editorType===ea._Y.FIGMAKE,E=p?.canRestoreFromVersion,b=!!u&&f?.canEditBranch(o[u.id]);return[t.restoreFromVersion&&m&&(1===_&&E||1===h&&b)&&!y?(e=>{switch(e.type){case R.nb.FILE:return{displayText:(0,x.t)("fullscreen_actions.toggle-version-history"),recordingKey:"restore-from-version",callback:()=>{l(e.file)}};case R.nb.REPO:let t=(0,k.mr)(e.repo,e.branches,o);return{displayText:(0,x.t)("fullscreen_actions.toggle-version-history"),recordingKey:"restore-from-version",callback:()=>{l(t)}};default:(0,v.wc)(e.type)}})(e):null]},[e,n,a,r,o,t.restoreFromVersion,i,s])}({tile:f,tileActions:y,tileSelectCounts:ez,permsByFileKey:a,permsByRepoId:d}),e3=function({tileActions:e,tileSelectCounts:t,tile:r,permsByFileKey:n}){let a=(0,U.FC)(),o=(0,_.wA)(),{user:s}=a,{selectedBranchKeyByRepoId:d}=(0,m.R)(e=>({selectedBranchKeyByRepoId:e.selectedBranchKeyByRepoId})),c=(0,B.TA)(),{hasPendingRequest:u,getUpgradeEligibility:p,getUpgradePathway:f}=(0,eT.wH)({folderId:r.type===R.nb.FILE?r.file.folderId:null,fileInBrowser:r.type===R.nb.FILE?r.file:void 0}),h=(0,eo.aI)(),y=r.type===R.nb.FILE?r.file:null,E=(r.type===R.nb.PINNED_FILE?r.file:null)||y,b=(E&&n[E.key])??null,g=l.useMemo(()=>r.type===R.nb.REPO?(0,R.y_)(r):null,[r]),v=g?q.F.toLiveGraph(g):null,F=(0,eS.mu)(r.type===R.nb.FILE?q.F.toSinatra(r.file):null,c),w=(0,eF.a9)(),I=r.type===R.nb.REPO?v:E,T=(0,l.useMemo)(()=>{let e=R.Tf.getEditorType(r);if(!s||!e||!I)return null;let t=q.F.toSinatra(I),n=b?.mustUpgradeToShareDraft??!1;return p((0,ew.wR)(e),!(0,eO.l)({file:{...t,mustUpgradeToShareDraft:n},user:s,orgUser:w,orgDraftsOwner:w,teamUser:F}))},[r,I,s,F,p,w,b?.mustUpgradeToShareDraft]);return l.useMemo(()=>{var n;let l,a,s,{numFilesSelected:c,numPinnedFilesSelected:p,numReposSelected:_,isSingleTileSelected:m}=t,y=E?.editorType===ea._Y.FIGMAKE&&!h;return[e.share&&m&&(1===c||1===p||1===_)&&!b?.isFileTypeDisabled&&!y?(n=r,l=(()=>{switch(n.type){case R.nb.FILE:case R.nb.PINNED_FILE:return n.file;case R.nb.REPO:return(0,k.mr)(n.repo,n.branches,d);default:return(0,ex.$D)(i.FigmaTeam.WAYFINDING,Error("Invalid tile type when rendering share option"),{extra:{"tile.type":n.type,numFilesSelected:c,numPinnedFilesSelected:p,numReposSelected:_}}),null}})(),a=R.Tf.getEditorType(n),s=(0,ew.wR)(a),{displayText:(0,x.t)("tile.dropdown.share"),recordingKey:"share",callback:()=>{l&&o(G.to({type:eR.g_,data:{fileKey:l.key,source:eI.nk.fileBrowserTileActionMenu}}))},sideText:(e=>{if(T!==ek.q.UPGRADE_NOT_NEEDED&&f(e)!==ek.J.AUTO_PATHWAY)return u(e)?(0,x.t)("upgrades.request_sent"):(0,x.t)("upgrades.request")})(s),rightJustifySideText:!0,disabled:!!u(s)&&T===ek.q.CANNOT_UPGRADE}):null]},[o,E?.editorType,b?.isFileTypeDisabled,f,u,e.share,t,T,d,h,r])}({tileSelectCounts:ez,permsByFileKey:a,tileActions:y,tile:f}),e7=function({tileSelectCounts:e,tile:t,permsByFileKey:r}){let n=(0,_.wA)();return l.useMemo(()=>{let l=t.type===R.nb.FILE?t.file:null,a=(t.type===R.nb.PINNED_FILE?t.file:null)||l,i=(a&&r[a.key])??null,{isSingleTileSelected:o}=e,s=!!i?.canUseInNewFile;return[o&&a&&s?(0,eC.rC)({dispatch:n,fileKey:a.key,templateName:a.name}):null]},[n,t,r,e])}({tileSelectCounts:ez,permsByFileKey:a,tile:f}),e9=function({permsByFileKey:e,permsByRepoId:t,selectedFileKeys:r,selectedRepoIds:n,selectedTiles:a,tile:i,tileActions:o,tileSelectCounts:s}){let d=(0,U.FC)(),c=(0,_.wA)(),{user:u,currentUserOrgId:p}=d,f=M(),h=l.useMemo(()=>(0,C.g4)(r,e)||[],[e,r]),m=l.useMemo(()=>(0,C.SW)(r,e)||[],[e,r]),y=l.useMemo(()=>(0,C.m8)(r,e)||[],[e,r]),E=l.useMemo(()=>(0,A._H)(n,t)||[],[t,n]),b=l.useMemo(()=>(0,A.CS)(n,t)||[],[t,n]),g=l.useMemo(()=>(0,A.gX)(n,t)||[],[t,n]),v=i.type===R.nb.FILE?i.file:null,F=(i.type===R.nb.PINNED_FILE?i.file:null)||v,w=i.type===R.nb.REPO?i.repo:null,I=(F&&e[F.key])??null,T=(w&&t[w.id])??null,{numFilesSelected:k,numPinnedFilesSelected:O,numPrototypesSelected:S,numReposSelected:j,numOfflineFilesSelected:N}=s,L=(0,ei.jB)({files:v?[q.F.toSinatra(v)]:[],repos:w?[w]:[],destinationFolderId:R.Tf.getFolderId(i),isDestinationDrafts:!1});return l.useMemo(()=>{let l,i,s,d,_=(0,V.R$)(u,p),v=g.length+y.length,F=E.length+h.length,w=b.length+m.length,M=!!(o.trashPageActions&&v>0),W=!!(o.trashPageActions&&F>0&&!_),B=!!(o.trashPageActions&&w>0&&!_&&!(o.trashPageActions&&F>0)),U=k+O+j,Y=1===U,H=h.length<k||E.length<j||S>0||N>0,z=m.length<k||b.length<j,$="";return Y||($=(0,x.t)("tile.dropdown.multiple_file_suffix",{totalSelected:U})),[W?(l=$,{displayText:(0,x.t)("tile.dropdown.restore",{objectText:l,numFiles:U}),recordingKey:"restore",callback:()=>{let l,a;return l=(0,C.g4)(r,e),a=(0,A._H)(n,t),void(0===l.length+a.length?c(P.s.error((0,x.t)("tile.dropdown.no_permission_to_restore_error"))):(c((0,K.b4)({fileKeys:l,repoIds:a})),f()))},disabled:H}):null,B?(i=$,{displayText:(0,x.t)("tile.dropdown.restore_to",{objectText:i,numFiles:U}),recordingKey:"restore-to",callback:()=>((e,t)=>{let r=m.length+b.length;if(0===r)return void c(P.s.error((0,x.t)("tile.dropdown.no_permission_to_restore_error")));if(1===r){let r=a[0];if(r?.type===R.nb.FILE)(0,el.h)(q.F.toSinatra(r.file),null,c,void 0,void 0,{canMove:!!e?.canMove,isUserViewerRestricted:!!e?.isUserRestrictedForSeat,planUser:e?.planUser??null,inDrafts:!!e?.isDraftFile,draftsMoveData:L,canMoveWithReasons:e?.canMoveWithReasons},void 0,!0);else if(r?.type===R.nb.REPO){let e=(0,R.y_)(r);(0,el.h)(e??null,r.repo,c,void 0,void 0,{canMove:!!t?.canMove,isUserViewerRestricted:!!t?.isUserRestrictedForSeat,planUser:t?.planUser??null,inDrafts:!!t?.isDraftRepo,draftsMoveData:L,canMoveWithReasons:t?.canMoveWithReasons},void 0,!0)}}else{let e=a.filter(e=>e.type===R.nb.FILE).map(e=>q.F.toSinatra(e.file)),t=a.filter(e=>e.type===R.nb.REPO).map(e=>e.repo);(0,el.O)(e,t,c,void 0,!0)}})(I,T),disabled:z}):null,M?(s=$,d=v<k||S>0||N>0,{displayText:(0,x.t)("tile.dropdown.delete_forever",{objectText:s}),recordingKey:"delete-forever",callback:()=>{let l=(0,C.m8)(r,e),a=(0,A.gX)(n,t);l.length+a.length<r.length+n.length?c(P.s.error((0,x.t)("flash.dont_have_permission_permanently_delete_files"))):(c(D.Fh({fileKeys:l,repoIds:a})),f())},disabled:d}):null]},[p,c,L,I,y.length,g.length,k,N,O,S,j,e,t,a,o.trashPageActions,T,h.length,E.length,m.length,b.length,r,n,f,u])}({permsByFileKey:a,permsByRepoId:d,selectedFileKeys:eM,selectedRepoIds:eD,selectedTiles:c,tile:f,tileActions:y,tileSelectCounts:ez}),te=function({loadedQueries:e,tile:t,tileActions:r,tileSelectCounts:n}){let a=(0,_.wA)(),i=(0,p.GI)("tile_action_dropdown"),o=M();return l.useMemo(()=>{let l,s,d,c=t.type===R.nb.FILE?t.file:null,u=t.type===R.nb.REPO?(0,R.y_)(t):null,{numFilesSelected:p,numReposSelected:f,isSingleTileSelected:_}=n,h=c?.key||u?.key;return[h&&_&&(1===p||1===f)&&r.pinToWorkspace&&e.fileWorkspacePinActions&&e.fileWorkspacePinActions.shouldShowPinFileToWorkspaceAction?(l=!!e.fileWorkspacePinActions&&e.fileWorkspacePinActions.workspaceHasMaxPins,{displayText:(0,x.t)("tile.dropdown.pin_to_workspace"),recordingKey:"pin-file-to-workspace",callback:()=>i(h,l)}):null,r.pinToWorkspace&&1===p&&e.fileWorkspacePinActions&&e.fileWorkspacePinActions.canEditPin?(s=e.fileWorkspacePinActions.existingFilePinId,{displayText:(0,x.t)("tile.dropdown.edit_workspace_pin"),recordingKey:"edit-workspace-pin",callback:()=>{a(G.to({type:(0,ej.l)(),data:{pinnedFileId:s}})),o()}}):null,r.pinToWorkspace&&_&&e.fileWorkspacePinActions&&e.fileWorkspacePinActions.canEditPin?(d=e.fileWorkspacePinActions.existingFilePinId,{displayText:(0,x.t)("tile.dropdown.remove_workspace_pin"),recordingKey:"unpin-file-from-workspace",callback:()=>{a(G.to({type:(0,eA.I)(),data:{pinnedFileId:d}})),o()}}):null]},[a,e.fileWorkspacePinActions,r.pinToWorkspace,t,n,o,i])}({loadedQueries:e,tileActions:y,tile:f,tileSelectCounts:ez}),tt=eN?.data;if(!tt)return null;let tr=eW+eB+eU,tn=[[...e1,...e4].filter(h.Vq),[...e$].filter(h.Vq),[...eJ].filter(h.Vq),[...eX,...eZ,...te].filter(h.Vq),[...eq,...e3,...eQ,...e7].filter(h.Vq),[...e8,...e2,...e0,...eG,...e5,...e6,...e9].filter(h.Vq)],tl=[];return tn.filter(e=>e.length>0).forEach(e=>{tl.length>0&&tl.push({displayText:"",separator:!0}),tl.push(...e)}),(0,n.jsx)(E,{portalTarget:document.body,children:(0,n.jsx)(g.j,{autofocusPrevOnDismount:!0,dispatch:eP,items:tl,lean:"right",minWidth:1===tr?void 0:140,onMount:t,onSelectItem:(e,t)=>{e.callback&&e.callback("",{},eP,t)},parentRect:tt.targetRect,recordingKey:"tile-dropdown",showPoint:!1})})}var eN=r(740939);function eL(e){let t,r,a,o,d,c,u,f,h,y,N,eP,eL,eM,eD,eW,eB,eK,eU,eV,eY=(0,U.FC)(),eH=(0,_.wA)(),{user:ez,currentUserOrgId:e$}=eY,{dropdownShown:eq,openFileFolderId:eG,selectedView:eQ,pinnedFileKeys:eX,selectedBranchKeyByRepoId:eJ,fileKeysByRepoId:eZ,isOnDeleted:e0,attributionContextKey:e1}=(0,m.R)(e=>({dropdownShown:e.dropdownShown,openFileFolderId:e.openFile?.folderId,selectedView:e.selectedView,pinnedFileKeys:e.pinnedFileKeys,selectedBranchKeyByRepoId:e.selectedBranchKeyByRepoId,fileKeysByRepoId:e.fileKeysByRepoId,isOnDeleted:"deletedFiles"===e.selectedView.view,attributionContextKey:e.sharingAttributionContextKey})),e4=e.tile,e5=(0,B.TA)(),[e6]=(0,j.IT)((0,W.OL)({userId:e5})),e2=(0,l.useMemo)(()=>e6?.data??{},[e6]),e8=(0,s.gS)(e.selectedTiles),e3=e4.type===R.nb.FILE?e4.file?.teamId:void 0,e7=(0,H.vt)(e3),e9=(0,Y.jn)(),{hasPendingRequest:te,getUpgradeEligibility:tt,getUpgradePathway:tr}=(0,eT.wH)({folderId:e4.type===R.nb.FILE?e4.file.folderId:null,fileInBrowser:e4.type===R.nb.FILE?e4.file:void 0}),tn=(0,p.GI)("tile_action_dropdown"),{Sprig:tl}=(0,L.A)(),ta=(0,en.bY)("file_multi_move_limit").getDynamicConfig().get("fileLimit",100),ti=M(),to=(0,ee.Xr)(R.Y6),ts=e=>{eH(ev.Z({fileKey:e.key})),ti()},td=()=>{eH((0,K.n_)({toDraft:!1,tileSelect:e8})),ti()},tc=()=>{let{selectedCount:t,deletableCount:r,allDrafts:n,filesByKey:l,reposById:a,offlineFilesByKey:i}=D.Mw(e.selectedTiles,e.permsByFileKey,e.permsByRepoId);if(r<t){let e=(0,x.t)("tile.dropdown.no_permission_to_trash_error");eH(P.s.error(e));return}eH(D.U1({filesByKey:l,reposById:a,offlineFilesByKey:i,allDrafts:n})),ti()},tu=()=>{let t=(0,C.m8)(tg,e.permsByFileKey),r=(0,A.gX)(tx,e.permsByRepoId);t.length+r.length<tg.length+tx.length?eH(P.s.error((0,x.t)("flash.dont_have_permission_permanently_delete_files"))):(eH(D.Fh({fileKeys:t,repoIds:r})),ti())},tp=()=>{let t=(0,C.g4)(tg,e.permsByFileKey),r=(0,A._H)(tx,e.permsByRepoId);0===t.length+r.length?eH(P.s.error((0,x.t)("tile.dropdown.no_permission_to_restore_error"))):(eH((0,K.b4)({fileKeys:t,repoIds:r})),ti())},tf=()=>{eH((0,K.g4)({tileSelect:e8})),ti()},t_=()=>{let e=Object.keys(e8[b.F.REPOS]);e.length>0&&eH(eb.iC({recent_repo_ids:e}));let t=[];for(let r of e)t=t.concat(eZ[r]);let r=Object.keys(e8[b.F.FILES]).concat(t),n=r.map(e=>({key:e}));for(let e of(n.length>0&&(0,ey.yN)(n.map(e=>e.key)).catch(e=>{throw eH(P.s.error((0,x.t)("file_browser.file_browser_actions.recently_viewed_error",{numFiles:r.length}))),e}),Object.keys(e8[b.F.PROTOTYPES]))){let[t,r,n]=e.split(",");eH(eE.tl({fileKey:t,pageId:r}))}},th=()=>{let t=e.sourceFileKey,r=e.loadedQueries.createBranchStatus;if(!t||!r)return;let n=w.e0.FILE_BROWSER;switch(r.status){case"upsell-org":eH(F.j({trackingContextName:n}));break;case"enabled":eH(F.l({trackingContextName:n,sourceFileKey:t,dispatchedFromEditor:!1}));break;case"disabled":case"hidden":break;default:(0,v.xb)(r.status)}},tm=(e,t,r)=>{let n={file:e,sectionId:t,entrypoint:"dropdown",fileBrowserFavorite:!0};r?eH(z.Fb(n)):eH(z.qP(n)),ti()},ty=(e,t)=>{let r={prototype:e,entrypoint:"dropdown",fileBrowserEntryPoint:!0};t?eH(z.iN(r)):eH(z.X7(r))},tE=(e,t,r,n)=>{let l=e.is_favorited&&t.some(e=>e.id===r?.id);return{recordingKey:"add-to-sidebar",displayText:e.is_favorited?`${(0,x.t)("favorited_resources.indicate_section_prefix")}: ${r?.name||(0,x.t)("sidebar.starred")}`:(0,x.t)("favorited_resources.add_to_sidebar"),children:t.map(({id:e,name:t})=>({recordingKey:"add-to-sidebar-section",displayText:""===t?(0,x.t)("sidebar.starred"):t,isChecked:r?.id===e,alwaysShowCheckMarkOffset:l,callback:()=>n(e)}))}},tb=(e,t,r,n)=>{if(null===e.default_file_key)return void console.error("Repo file key should not be null");let l={file:q.F.toLiveGraph(t),repoId:e.id,sectionId:r,entrypoint:"dropdown",fileBrowserFavorite:!0};n?eH(z.Fb(l)):eH(z.qP(l))},tg=l.useMemo(()=>Object.keys(e8[b.F.FILES]),[e8]),tv=l.useMemo(()=>Object.keys(e8[b.F.PINNED_FILES]),[e8]),tx=l.useMemo(()=>Object.keys(e8[b.F.REPOS]),[e8]),tF=l.useMemo(()=>(0,C.Ul)(tg,e.permsByFileKey)||[],[e.permsByFileKey,tg]),tw=l.useMemo(()=>(0,C.n)(tg,e.permsByFileKey)||[],[e.permsByFileKey,tg]),tI=l.useMemo(()=>(0,C.g4)(tg,e.permsByFileKey)||[],[e.permsByFileKey,tg]),tT=l.useMemo(()=>(0,C.SW)(tg,e.permsByFileKey)||[],[e.permsByFileKey,tg]),tk=l.useMemo(()=>(0,C.v_)(tg,e.permsByFileKey).length,[e.permsByFileKey,tg]),tR=l.useMemo(()=>(0,C.v_)(tv,e.permsByFileKey).length,[e.permsByFileKey,tv]),tO=l.useMemo(()=>(0,C.m8)(tg,e.permsByFileKey)||[],[e.permsByFileKey,tg]),tS=l.useMemo(()=>{let t={};for(let r of e.selectedTiles.filter(e=>e.type===R.nb.REPO)){let e=r.repo.id,n=eJ[e],l=r.repo.default_file_key;n?t[e]=n:l&&(t[e]=l)}return t},[e.selectedTiles,eJ]),tC=l.useMemo(()=>e0?Object.keys(e8[b.F.REPOS]).length:((0,A.nL)(tx,tS,e.permsByRepoId)||[]).length,[e0,e.permsByRepoId,e8,tx,tS]),tA=l.useMemo(()=>(0,A.zj)(tx,e.permsByRepoId)||[],[e.permsByRepoId,tx]),tj=l.useMemo(()=>(0,A._H)(tx,e.permsByRepoId)||[],[e.permsByRepoId,tx]),tP=l.useMemo(()=>(0,A.CS)(tx,e.permsByRepoId)||[],[e.permsByRepoId,tx]),tN=l.useMemo(()=>(0,A.gX)(tx,e.permsByRepoId)||[],[e.permsByRepoId,tx]),tL=l.useMemo(()=>Object.keys((0,W.gp)(e8[b.F.OFFLINE_FILES],{offlineFiles:e2})),[e2,e8]),tM=l.useMemo(()=>(0,A.ae)(tx,e.permsByRepoId)||[],[e.permsByRepoId,tx]),tD=l.useMemo(()=>Object.keys(e8[b.F.FILES]).length+Object.keys(e8[b.F.REPOS]).length+Object.keys(e8[b.F.PROTOTYPES]).length,[e8]),tW=l.useMemo(()=>Object.keys(e8[b.F.FILES]).length+Object.keys(e8[b.F.PROTOTYPES]).length,[e8]),tB=l.useMemo(()=>Object.keys(e8[b.F.FILES]).length+Object.keys(e8[b.F.REPOS]).length,[e8]),tK=l.useMemo(()=>{let t=new Set,r=new Set;return tg.forEach(n=>{let l=e.permsByFileKey[n];l&&(t.add(l.planType||""),r.add(l.planId||""))}),tx.forEach(n=>{let l=e.permsByRepoId[n];l&&(t.add(l.planType||""),r.add(l.planId||""))}),1===t.size&&(t.has("team")||1===r.size)},[e.permsByFileKey,e.permsByRepoId,tg,tx]),tU=(0,eo.aI)(),tV=e4.type===R.nb.FILE?e4.file:null,tY=e4.type===R.nb.PINNED_FILE?e4.file:null,tH=tY||tV,tz=e4.type===R.nb.REPO?e4.repo:null,t$=(tH&&e.permsByFileKey[tH.key])??null,tq=(tz&&e.permsByRepoId[tz.id])??null,tG=e.tile.type===R.nb.PROTOTYPE?e.tile.prototype:null,tQ=null!=tz&&e4.branches?e4.branches.find(e=>(0,k.SA)(e,tz)):null,tX=tQ?q.F.toLiveGraph(tQ):null,tJ=e.tile.type===R.nb.OFFLINE_FILE?e.tile.file:null,tZ=(0,eS.mu)(e.tile.type===R.nb.FILE?q.F.toSinatra(e.tile.file):null,e5),t0=(0,eF.a9)(),t1=e4.type===R.nb.REPO?tX:tH,t4=(0,l.useMemo)(()=>{let e=R.Tf.getEditorType(e4);if(!ez||!e||!t1)return null;let t=q.F.toSinatra(t1),r=t$?.mustUpgradeToShareDraft??!1;return tt((0,ew.wR)(e),!(0,eO.l)({file:{...t,mustUpgradeToShareDraft:r},user:ez,orgUser:t0,orgDraftsOwner:t0,teamUser:tZ}))},[e4,t1,ez,tZ,tt,t0,t$?.mustUpgradeToShareDraft]),t5=Object.keys(e8[b.F.FILES]).length,t6=Object.keys(e8[b.F.PINNED_FILES]).length,t2=Object.keys(e8[b.F.PROTOTYPES]).length,t8=Object.keys(e8[b.F.REPOS]).length,t3=Object.keys(e8[b.F.OFFLINE_FILES]).length,t7=(0,ei.jB)({files:tV?[q.F.toSinatra(tV)]:[],repos:tz?[tz]:[],destinationFolderId:R.Tf.getFolderId(e4),isDestinationDrafts:!1}),t9=(0,ei.Cp)(t7.destinationPlan?.key||null,t7.licenseType),re=e.selectedTiles.filter(e=>e.type===R.nb.FILE).map(e=>e.file).some(e=>e.editorType===ea._Y.FIGMAKE)&&t7.requiresUpgrade&&!tU,rt=(0,X.D6)("TileActionDropdown"),rr=(0,X.Kd)(rt).unwrapOr(!1),rn=(0,ee.md)(er.V1),rl=eq?.data;if(!rl)return null;let ra=t5+t6+t8,ri=ra+t3,ro=t5+t6+t8+t2+t3,rs=1===ra,rd=1===ri;if(0===ro)return(0,n.jsx)("div",{});let rc=!0,ru=!0,rp=!0,rf=!1,r_=!0,rh=!0,rm=!0;(tw.length+tA.length+tL.length<t5||t2>0)&&(rc=!1),(tO.length+tN.length<t5||t2>0||t3>0)&&(ru=!1),(tI.length<t5||tj.length<t8||t2>0||t3>0)&&(rp=!1),tT.length===t5&&tP.length===t8&&(rf=!0),(tk<t5||tR<t6||tC<t8||t2>0||t3>0)&&(r_=!1),t3>0&&(rh=!1);let ry=tF.length+tM.length;ry<ra&&(rm=!1);let rE="";rs||(rE=(0,x.t)("tile.dropdown.multiple_file_suffix",{totalSelected:ra}));let rb="";rd||(rb=(0,x.t)("tile.dropdown.multiple_file_suffix",{totalSelected:ri}));let rg=(r=(t=(0,$.D6)(e$))?(0,x.t)("favorited_resources.remove_from_sidebar"):(0,x.t)("tile.favoriting.remove_from_favorites"),{[eN.W.COPY_LINK]:e=>({displayText:(0,x.t)("tile.dropdown.copy_link"),recordingKey:"copy-link",callback:()=>(e=>{switch(e.type){case R.nb.FILE:let t=e.file;eH(T.S({fileKey:t.key,url:(0,O.jN)({file:t,attributionContext:(0,S.b)(e1,S.d.FILE_TILE_CONTEXT_MENU),allowDefaulting:!0}),source:S.d.FILE_TILE_CONTEXT_MENU}));break;case R.nb.PINNED_FILE:eH(T.S({fileKey:e.file.key,url:(0,O.jN)({file:e.file,attributionContext:(0,S.b)(e1,S.d.FILE_TILE_CONTEXT_MENU),allowDefaulting:!0}),source:S.d.FILE_TILE_CONTEXT_MENU}));break;case R.nb.PROTOTYPE:eH(I.S({url:(0,O.Kw)({base:"proto",file:{key:e.prototype.file_key},nodeId:e.prototype.page_id,attributionContext:(0,S.b)(e1,S.d.FILE_TILE_CONTEXT_MENU)})}));break;case R.nb.REPO:let r=(0,k.mr)(e.repo,e.branches,eJ);eH(T.S({fileKey:r.key,url:(0,k.CE)(r,e.repo,"file"),source:S.d.FILE_TILE_CONTEXT_MENU}))}})(e)}),[eN.W.DELETE]:(e,t,r)=>{let n=!1;if(e.type===R.nb.REPO){let t=(0,k.mr)(e.repo,e.branches,eJ);n=!(0,k.SA)(t,e.repo)}return{displayText:n?(0,x.t)("tile.dropdown.move_file_and_branches_to_trash"):1===ro?(0,x.t)("tile.dropdown.trash_single_tile"):(0,x.t)("tile.dropdown.trash_file",{objText:t}),recordingKey:"delete",callback:tc,disabled:r}},[eN.W.DUPLICATE]:(e,t)=>({displayText:1===ro?(0,x.t)("tile.dropdown.duplicate_single_tile"):(0,x.t)("tile.dropdown.duplicate",{objText:e}),recordingKey:"duplicate",callback:td,disabled:t}),[eN.W.DUPLICATE_TO_DRAFTS]:(e,t)=>({displayText:1===ra?(0,x.t)("tile.dropdown.duplicate_to_draft_single_file_or_repo"):(0,x.t)("tile.dropdown.duplicate_to_draft",{objText:e}),recordingKey:"duplicate-to-drafts",callback:tf,disabled:t}),[eN.W.OPEN]:()=>({displayText:(0,x.t)("tile.dropdown.open"),recordingKey:"open",callback:(t,r,n,l)=>{e.openTile(l)}}),[eN.W.OPEN_NEW_TAB]:t=>({displayText:(0,x.t)("tile.dropdown.open_new_tab"),recordingKey:"open-new-tab",callback:()=>(t=>{e.trackSearchFn&&e.trackSearchFn();let r=void 0===e.trackSearchFn;switch(t.type){case R.nb.FILE:let n=(0,O.rl)(t.file);(0,e_.nz)(n,t.file.key,eQ,eH,tl,r);break;case R.nb.PINNED_FILE:(0,e_.nz)((0,O.jN)(t),t.file.key,eQ,eH,tl,r);break;case R.nb.PROTOTYPE:(0,e_.D4)(t.prototype.url,t.prototype.file_key,t.prototype.page_id,eQ);break;case R.nb.REPO:let l=(0,k.mr)(t.repo,t.branches,eJ);ed.Ay.redirect((0,k.CE)(l,t.repo,"file"),"_blank");break;case R.nb.OFFLINE_FILE:eH(ef.NA({file:t.file,openNewFileIn:em.ai.NEW_TAB,source:eh.U.OFFLINE_FILE_TILE}));return;default:(0,v.xb)(t)}})(t)}),[eN.W.OPEN_WITH_DISABLED_PREVIEW]:t=>({displayText:(0,x.t)("tile.dropdown.open_with_disabled_preview"),recordingKey:"open-with-disabled-preview",callback:()=>(t=>{switch(e.trackSearchFn&&e.trackSearchFn(),t.type){case R.nb.FILE:case R.nb.PINNED_FILE:if(t.file.editorType===ea._Y.FIGMAKE){let e=(0,O.jN)({file:t.file,disablePreview:!0});(0,e_.nz)(e,t.file.key,eQ,eH,tl)}}})(t)}),[eN.W.PIN_FILE_TO_FOLDER]:e=>({displayText:(0,x.t)("tile.dropdown.pin_to_project"),recordingKey:"pin-file-to-folder",callback:()=>{null!=e.folderId&&eH(et.gO({folderId:e.folderId,teamId:e.teamId,fileKey:e.key})),ti()}}),[eN.W.PIN_REPO_TO_FOLDER]:e=>({displayText:(0,x.t)("tile.dropdown.pin_to_project"),recordingKey:"pin-repo-to-folder",callback:()=>{null!=e.folder_id&&null!=e.default_file_key&&eH(et.gO({folderId:e.folder_id,teamId:e.team_id,fileKey:e.default_file_key})),ti()}}),[eN.W.PIN_FILE_TO_WORKSPACE]:t=>{let r=!!e.loadedQueries.fileWorkspacePinActions&&e.loadedQueries.fileWorkspacePinActions.workspaceHasMaxPins;return{displayText:(0,x.t)("tile.dropdown.pin_to_workspace"),recordingKey:"pin-file-to-workspace",callback:()=>tn(t,r)}},[eN.W.REMOVE_FROM_RECENTS]:(e,t)=>({displayText:(0,x.t)("tile.dropdown.remove_from_recent_pluralized",{numFiles:e}),recordingKey:"remove-from-recents",callback:t_,disabled:t}),[eN.W.REMOVE_FROM_SHARED_FILES]:e=>({displayText:(0,x.t)("tile.dropdown.remove_from_shared_files"),recordingKey:"remove-from-shared-files",callback:()=>{let t,r,n;return t="",r="",e.type===R.nb.FILE?(t=e.sharedWithYouFields?.id??"",r=e.file.name??""):e.type===R.nb.PROTOTYPE&&(t=e.prototype.shared_with_you_id??"",r=e.prototype.fig_file?.name??e.prototype.name??""),n=async()=>{try{await (0,ey.LG)(t)}catch(e){eH(P.s.error((0,x.t)("file_browser.file_browser_actions.remove_files_from_shared_files")))}},void eH(G.to({type:eg.q,data:{fileName:r,onRemove:n}}))}}),[eN.W.RENAME]:e=>{switch(e.type){case R.nb.FILE:return{displayText:(0,x.t)("tile.dropdown.rename"),recordingKey:"rename",callback:()=>{to({type:"FILE",id:e.file.key}),ti()}};case R.nb.REPO:let t=(0,k.mr)(e.repo,e.branches,eJ);return{displayText:(0,k.SA)(t,e.repo)?(0,x.t)("tile.dropdown.rename"):(0,x.t)("tile.dropdown.rename_file"),recordingKey:"rename",callback:()=>{to({type:"REPO",id:e.repo.id}),ti()}};case R.nb.OFFLINE_FILE:return{displayText:(0,x.t)("tile.dropdown.rename"),recordingKey:"rename",callback:()=>{var t;return t=e.file,void((0,W.dm)(t),ti())}};default:(0,v.xb)(e)}},[eN.W.MOVE_FILE]:(t,r,n)=>({displayText:1===t?(0,x.t)("tile.dropdown.move_file"):(0,x.t)("tile.dropdown.move_object",{objText:r}),recordingKey:"move-file",callback:()=>((t,r,n)=>{if(1===n){let n=e.selectedTiles[0];if(n?.type===R.nb.FILE)(0,el.h)(q.F.toSinatra(n.file),null,eH,void 0,void 0,{canMove:!!t?.canMove,isUserViewerRestricted:!!t?.isUserRestrictedForSeat,planUser:t?.planUser??null,inDrafts:!!t?.isDraftFile,draftsMoveData:t7,hasConnectedPlanUserInOrg:t9,canMoveWithReasons:t?.canMoveWithReasons});else if(n?.type===R.nb.REPO){let e=n.branches.find(e=>(0,k.SA)(e,n.repo));(0,el.h)(e??null,n.repo,eH,void 0,void 0,{canMove:!!r?.canMove,isUserViewerRestricted:!!r?.isUserRestrictedForSeat,planUser:r?.planUser??null,inDrafts:!!r?.isDraftRepo,draftsMoveData:t7,hasConnectedPlanUserInOrg:t9,canMoveWithReasons:r?.canMoveWithReasons})}}else{let t=e.selectedTiles.filter(e=>e.type===R.nb.FILE).map(e=>q.F.toSinatra(e.file)),r=e.selectedTiles.filter(e=>e.type===R.nb.REPO).map(e=>e.repo);(0,el.O)(t,r,eH)}ti()})(t$,tq,t),disabled:n||re||(0,ei.Px)(t7,!!t$?.isFileTypeDisabled,t9),sideText:(0,ei.zS)(t7,n||!!t$?.isFileTypeDisabled,t9),rightJustifySideText:!0}),[eN.W.RESTORE_FROM_VERSION]:e=>{switch(e.type){case R.nb.FILE:return{displayText:(0,x.t)("fullscreen_actions.toggle-version-history"),recordingKey:"restore-from-version",callback:()=>{ts(e.file)}};case R.nb.REPO:let t=(0,k.mr)(e.repo,e.branches,eJ);return{displayText:(0,x.t)("fullscreen_actions.toggle-version-history"),recordingKey:"restore-from-version",callback:()=>{ts(t)}};default:(0,v.wc)(eN.W.RESTORE_FROM_VERSION)}},[eN.W.SHARE]:e=>{let t=(()=>{switch(e.type){case R.nb.FILE:case R.nb.PINNED_FILE:return e.file;case R.nb.REPO:return(0,k.mr)(e.repo,e.branches,eJ);default:return(0,ex.$D)(i.FigmaTeam.WAYFINDING,Error("Invalid tile type when rendering DropdownActionOptions.SHARE"),{extra:{"tile.type":e.type,numFilesSelected:t5,numPinnedFilesSelected:t6,numReposSelected:t8}}),null}})(),r=R.Tf.getEditorType(e),n=(0,ew.wR)(r);return{displayText:(0,x.t)("tile.dropdown.share"),recordingKey:"share",callback:()=>{t&&eH(G.to({type:eR.g_,data:{fileKey:t.key,source:eI.nk.fileBrowserTileActionMenu}}))},sideText:(e=>{if(t4!==ek.q.UPGRADE_NOT_NEEDED&&tr(e)!==ek.J.AUTO_PATHWAY)return te(e)?(0,x.t)("upgrades.request_sent"):(0,x.t)("upgrades.request")})(n),rightJustifySideText:!0,disabled:!!te(n)&&t4===ek.q.CANNOT_UPGRADE}},[eN.W.SHOW_IN_FOLDER]:e=>{switch(e.type){case R.nb.FILE:return{displayText:(0,x.t)("tile.dropdown.show_in_project"),recordingKey:"show-in-project-file",callback:()=>(e=>{if(null!=e.file.folderId)if(e$===e.file.parentOrgId)eH(ec.sf({view:"folder",folderId:e.file.folderId}));else{let t=e.file.parentOrgId?`/files/${e.file.parentOrgId}/project/${e.file.folderId}`:`/files/project/${e.file.folderId}`;t=ez?(0,es.NQ)(t,"fuid",ez.id):t,ed.Ay.redirect(t)}})(e)};case R.nb.REPO:return{displayText:(0,x.t)("tile.dropdown.show_in_project"),recordingKey:"show-in-project-repo",callback:()=>{eH(ec.sf({view:"folder",folderId:e.repo.folder_id}))}};default:(0,v.wc)(eN.W.SHOW_IN_FOLDER)}},[eN.W.UNPIN_FILE_FROM_FOLDER]:e=>({displayText:(0,x.t)("tile.dropdown.remove_project_pin"),recordingKey:"unpin-file-from-folder",callback:()=>{let t;null!=(t=e.folderId)&&eH(et.z6({folderId:t,fileKey:e.key})),ti()}}),[eN.W.UNPIN_REPO_FROM_FOLDER]:e=>({displayText:(0,x.t)("tile.dropdown.remove_project_pin"),recordingKey:"unpin-repo-from-folder",callback:()=>{null!=e.folder_id&&null!=e.default_file_key&&eH(et.z6({folderId:e.folder_id,fileKey:e.default_file_key})),ti()}}),[eN.W.UNPIN_FILE_FROM_WORKSPACE]:e=>({displayText:(0,x.t)("tile.dropdown.remove_workspace_pin"),recordingKey:"unpin-file-from-workspace",callback:()=>{eH(G.to({type:(0,eA.I)(),data:{pinnedFileId:e}})),ti()}}),[eN.W.EDIT_WORKSPACE_PIN]:e=>({displayText:(0,x.t)("tile.dropdown.edit_workspace_pin"),recordingKey:"edit-workspace-pin",callback:()=>{eH(G.to({type:(0,ej.l)(),data:{pinnedFileId:e}})),ti()}}),[eN.W.CREATE_BRANCH]:e=>({displayText:(0,x.t)("tile.dropdown.create_new_branch"),recordingKey:"create-branch",callback:th,disabled:e}),[eN.W.DELETE_FOREVER]:(e,t)=>({displayText:(0,x.t)("tile.dropdown.delete_forever",{objectText:e}),recordingKey:"delete-forever",callback:tu,disabled:t}),[eN.W.RESTORE]:(e,t,r)=>({displayText:(0,x.t)("tile.dropdown.restore",{objectText:e,numFiles:r}),recordingKey:"restore",callback:tp,disabled:t}),[eN.W.RESTORE_TO]:(t,r,n)=>({displayText:(0,x.t)("tile.dropdown.restore_to",{objectText:t,numFiles:n}),recordingKey:"restore-to",callback:()=>((t,r)=>{let n=tT.length+tP.length;if(0===n)return void eH(P.s.error((0,x.t)("tile.dropdown.no_permission_to_restore_error")));if(1===n){let n=e.selectedTiles[0];if(n?.type===R.nb.FILE)(0,el.h)(q.F.toSinatra(n.file),null,eH,void 0,void 0,{canMove:!!t?.canMove,isUserViewerRestricted:!!t?.isUserRestrictedForSeat,planUser:t?.planUser??null,inDrafts:!!t?.isDraftFile,draftsMoveData:t7,canMoveWithReasons:t?.canMoveWithReasons},void 0,!0);else if(n?.type===R.nb.REPO){let e=n.branches.find(e=>(0,k.SA)(e,n.repo));(0,el.h)(e??null,n.repo,eH,void 0,void 0,{canMove:!!r?.canMove,isUserViewerRestricted:!!r?.isUserRestrictedForSeat,planUser:r?.planUser??null,inDrafts:!!r?.isDraftRepo,draftsMoveData:t7,canMoveWithReasons:r?.canMoveWithReasons},void 0,!0)}}else{let t=e.selectedTiles.filter(e=>e.type===R.nb.FILE).map(e=>q.F.toSinatra(e.file)),r=e.selectedTiles.filter(e=>e.type===R.nb.REPO).map(e=>e.repo);(0,el.O)(t,r,eH,void 0,!0)}})(t$,tq),disabled:r}),[eN.W.FAVORITE_FILE]:(r,n)=>{let{favoriteSidebarSection:l}=e.loadedQueries;return t&&null!=n&&n?.length>0?tE({is_favorited:r.isFavorited},n,l,e=>{tm(r,e,l?.id!==e)}):{displayText:(0,x.t)("tile.favoriting.add_to_favorites"),recordingKey:"favorite-file",callback:()=>tm(r,void 0,!0)}},[eN.W.FAVORITE_PROTOTYPE]:e=>({displayText:(0,x.t)("tile.favoriting.add_to_favorites"),recordingKey:"favorite-prototype",callback:()=>ty(e,!0)}),[eN.W.FAVORITE_REPO]:(r,n,l)=>{let{favoriteSidebarSection:a}=e.loadedQueries;return t&&null!=l?tE(r,l,a,e=>{tb(r,n,e,a?.id!==e)}):{displayText:(0,x.t)("tile.favoriting.add_to_favorites"),recordingKey:"favorite-repo",callback:()=>tb(r,n,void 0,!0)}},[eN.W.UNFAVORITE_FILE]:e=>({displayText:r,recordingKey:"unfavorite-file",callback:()=>tm(e,void 0,!1)}),[eN.W.UNFAVORITE_PROTOTYPE]:e=>({displayText:r,recordingKey:"unfavorite-prototype",callback:()=>ty(e,!1)}),[eN.W.UNFAVORITE_REPO]:(e,t)=>({displayText:r,recordingKey:"unfavorite-repo",callback:()=>tb(e,t,void 0,!1)}),[eN.W.USE_IN_NEW_FILE]:e=>(0,eC.rC)({dispatch:eH,fileKey:e.key,templateName:e.name}),[eN.W.FILE_ANALYTICS]:e=>({displayText:(0,x.t)("fullscreen.filename_view.file_analytics"),recordingKey:"file-analytics",callback:()=>{null!=e.folderId&&eH((0,G.to)({type:J.e,data:{fileKey:e.key,entrypoint:Q.F.FileNavigation}}))}})}),rv=(a=(tG&&e.permsByPrototypeId[tG.file_key])??null,o=(0,V.R$)(ez,e$),d=!!tV&&!!tV.teamId&&e7,c="folder"===eQ.view&&eX[eQ.folderId]||rn&&eG&&eX[eG]||[],u=tV&&c.includes(tV.key),f=tY&&c.includes(tY.key),h=tz&&tz.default_file_key&&c.includes(tz.default_file_key),y=u||f||h||Object.keys(e8[b.F.PINNED_FILES]).length>0,N=t5+t6+t2+t8+t3===1,eP=tH?.editorType===ea._Y.FIGMAKE,eL=tH?.editorType===ea._Y.FIGMAKE&&!tU,eM=(tk>0||tR>0||tC>0)&&!o&&!d&&!e9,eD=tA.length+tw.length+tL.length,eW=tN.length+tO.length,eB=tj.length+tI.length,eK=tP.length+tT.length,eU=0===eB&&0===eK&&0===eW&&e.tileActions.pinToFolder&&!e.tileActions.showInFolder&&N,eV=(0,$.D6)(e$),{[eN.W.COPY_LINK]:()=>!!(e.tileActions.copyLink&&N&&!tJ),[eN.W.DELETE]:()=>!!(e.tileActions.delete&&eD>0&&0===t6),[eN.W.DUPLICATE]:()=>!!(e.tileActions.duplicate&&eM),[eN.W.DUPLICATE_TO_DRAFTS]:()=>!!(e.tileActions.duplicateToDrafts&&eM),[eN.W.OPEN]:()=>!!(e.tileActions.open&&N),[eN.W.OPEN_NEW_TAB]:()=>!!(e.tileActions.open&&N&&!ep.eD&&!(0,eu.ce)()),[eN.W.OPEN_WITH_DISABLED_PREVIEW]:()=>!!(N&&(e4.type===R.nb.FILE&&e4.file.editorType===ea._Y.FIGMAKE||e4.type===R.nb.PINNED_FILE&&e4.file.editorType===ea._Y.FIGMAKE)),[eN.W.PIN_FILE_TO_FOLDER]:()=>{let e=t$?.canPin;return!!(!y&&1===t5&&eU&&e)},[eN.W.PIN_REPO_TO_FOLDER]:()=>{let e=tq?.canPin;return!!(!y&&1===t8&&eU&&e)},[eN.W.PIN_FILE_TO_WORKSPACE]:()=>!!(N&&(1===t5||1===t8)&&e.tileActions.pinToWorkspace&&e.loadedQueries.fileWorkspacePinActions&&e.loadedQueries.fileWorkspacePinActions.shouldShowPinFileToWorkspaceAction),[eN.W.REMOVE_FROM_RECENTS]:()=>!!(e.tileActions.removeFromRecents&&tD>0),[eN.W.REMOVE_FROM_SHARED_FILES]:()=>!!(e.tileActions.removeFromSharedFiles&&1===tW),[eN.W.RENAME]:()=>{let t=t$?.canRename,r=tq?.canRename;return!!(e.tileActions.rename&&N&&(1===t5&&t||1===t8&&r||1===t3))},[eN.W.MOVE_FILE]:()=>{let t=t$?.canOpenMoveModal,r=tq?.canOpenMoveModal;return!!(e.tileActions.moveFile&&0===t3&&(N&&(1===t5&&t||1===t8&&r)||ra>1&&ra<=ta&&ry>0))},[eN.W.RESTORE_FROM_VERSION]:()=>{let t=t$?.canRestoreFromVersion,r=!!tz&&tq?.canEditBranch(eJ[tz.id]);return!!(e.tileActions.restoreFromVersion&&N&&(1===t5&&t||1===t8&&r)&&!eP)},[eN.W.SHARE]:()=>!!(e.tileActions.share&&N&&(1===t5||1===t6||1===t8)&&!t$?.isFileTypeDisabled&&!eL),[eN.W.SHOW_IN_FOLDER]:()=>{let t=t$?.canShowInProject,r=tq?.canShowInProject;return!!(e.tileActions.showInFolder&&N&&(1===t8&&r||1===t5&&t))},[eN.W.UNPIN_FILE_FROM_FOLDER]:()=>{let e=!!t$?.canPin;return!!(y&&t6<=1&&eU&&e)},[eN.W.UNPIN_REPO_FROM_FOLDER]:()=>{let e=tq?.canPin;return!!(y&&t8<=1&&eU&&e)},[eN.W.UNPIN_FILE_FROM_WORKSPACE]:()=>!!(e.tileActions.pinToWorkspace&&N&&e.loadedQueries.fileWorkspacePinActions&&e.loadedQueries.fileWorkspacePinActions.canEditPin),[eN.W.EDIT_WORKSPACE_PIN]:()=>!!(e.tileActions.pinToWorkspace&&1===t5&&e.loadedQueries.fileWorkspacePinActions&&e.loadedQueries.fileWorkspacePinActions.canEditPin),[eN.W.CREATE_BRANCH]:()=>!!(e.tileActions.createBranch&&N&&(1===t5||1===t6||1===t8)&&e.sourceFileKey&&e.loadedQueries.createBranchStatus&&"hidden"!==e.loadedQueries.createBranchStatus.status),[eN.W.FAVORITE_FILE]:()=>{if("deletedFiles"===eQ.view||tH?.parentOrgId!==e$)return!1;let t=t$?.canFavorite&&e.loadedQueries.isResourceInUserPlan,r=t$?.canFavorite&&!t$?.isFavorited&&e.loadedQueries.isResourceInUserPlan;return!!("team"!==eQ.view&&!e.loadedQueries.hasMaxFavorites&&!eV&&(r&&1===t5&&N||tY&&1===t6&&!tY?.isFavorited))||(eV&&e.loadedQueries.userSidebarSections,!!t&&1===t5&&!!N||!!tY&&1===t6)},[eN.W.FAVORITE_PROTOTYPE]:()=>{if("deletedFiles"===eQ.view||"team"===eQ.view||tG?.parent_org?.id!==e$)return!1;let t=a?.canFavorite&&e.loadedQueries.isResourceInUserPlan;return!!(!e.loadedQueries.hasMaxFavorites&&!eV&&1===t2&&N&&t)},[eN.W.FAVORITE_REPO]:()=>{if("deletedFiles"===eQ.view||tz?.parent_org_id!==e$)return!1;let t=tq?.canFavorite&&e.loadedQueries.isResourceInUserPlan;return!!("team"!==eQ.view&&!e.loadedQueries.hasMaxFavorites&&!eV&&1===t8&&N&&t)||(eV&&e.loadedQueries.userSidebarSections,1===t8&&!!N&&!!t)},[eN.W.UNFAVORITE_FILE]:()=>{if("deletedFiles"===eQ.view||"team"===eQ.view||tH?.parentOrgId!==e$)return!1;let e=t$?.canFavorite&&t$?.isFavorited;return!!(tV?.parentOrgId===e$&&(1===t5&&N&&e||tY&&1===t6&&tY?.isFavorited))},[eN.W.UNFAVORITE_PROTOTYPE]:()=>{if("deletedFiles"===eQ.view||"team"===eQ.view||tG?.parent_org?.id!==e$)return!1;let e=a?.canUnfavorite;return!!(1===t2&&N&&e)},[eN.W.UNFAVORITE_REPO]:()=>{if("deletedFiles"===eQ.view||"team"===eQ.view||tz?.parent_org_id!==e$)return!1;let e=tq?.canUnfavorite;return!!(1===t8&&N&&e)},[eN.W.USE_IN_NEW_FILE]:()=>{let e=!!t$?.canUseInNewFile;return!!(N&&tH&&e)},[eN.W.DELETE_FOREVER]:()=>!!(e.tileActions.trashPageActions&&eW>0),[eN.W.RESTORE]:()=>!!(e.tileActions.trashPageActions&&eB>0&&!o),[eN.W.RESTORE_TO]:()=>!!(e.tileActions.trashPageActions&&eK>0&&!o&&!(e.tileActions.trashPageActions&&eB>0)),[eN.W.FILE_ANALYTICS]:()=>{let e=tH??tX,t=(0,Z.MG)(e?{parentOrgId:e.parentOrgId||null}:null,!!e?.lastPublishedAt,rr);return!!(e&&t)}}),rx=(e,...t)=>rv[e]()?[].concat(rg[e](...t)):[],rF=[[...rx(eN.W.SHOW_IN_FOLDER,e4),...rx(eN.W.OPEN,e4),...rx(eN.W.OPEN_NEW_TAB,e4),...rx(eN.W.OPEN_WITH_DISABLED_PREVIEW,e4)],[...rx(eN.W.CREATE_BRANCH,null!=e.loadedQueries.createBranchStatus&&"disabled"===e.loadedQueries.createBranchStatus.status)],[...rx(eN.W.FILE_ANALYTICS,tH??tX)],[...rx(eN.W.FAVORITE_FILE,tH,e.loadedQueries.userSidebarSections),...rx(eN.W.FAVORITE_PROTOTYPE,tG),...rx(eN.W.FAVORITE_REPO,tz,tQ,e.loadedQueries.userSidebarSections),...rx(eN.W.UNFAVORITE_FILE,tH),...rx(eN.W.UNFAVORITE_PROTOTYPE,tG),...rx(eN.W.UNFAVORITE_REPO,tz,tQ),...rx(eN.W.PIN_FILE_TO_FOLDER,tV),...rx(eN.W.PIN_REPO_TO_FOLDER,tz),...rx(eN.W.UNPIN_FILE_FROM_FOLDER,tH),...rx(eN.W.UNPIN_REPO_FROM_FOLDER,tz),...rx(eN.W.PIN_FILE_TO_WORKSPACE,tV?.key||tQ?.key),...rx(eN.W.EDIT_WORKSPACE_PIN,e.loadedQueries.fileWorkspacePinActions?.existingFilePinId),...rx(eN.W.UNPIN_FILE_FROM_WORKSPACE,e.loadedQueries.fileWorkspacePinActions?.existingFilePinId)],[...rx(eN.W.COPY_LINK,e4),...rx(eN.W.SHARE,e4),...rx(eN.W.DUPLICATE,rE,!r_),...rx(eN.W.DUPLICATE_TO_DRAFTS,rE,!r_),...rx(eN.W.USE_IN_NEW_FILE,tH)],[...rx(eN.W.RESTORE_FROM_VERSION,e4),...rx(eN.W.RENAME,e4),...rx(eN.W.MOVE_FILE,tB,rE,!(1===ro||rm&&tK)),...rx(eN.W.DELETE,e4,rb,!rc),...rx(eN.W.REMOVE_FROM_RECENTS,tD,!rh),...rx(eN.W.REMOVE_FROM_SHARED_FILES,e4),...rx(eN.W.RESTORE,rE,!rp,ra),...rx(eN.W.RESTORE_TO,rE,!rf,ra),...rx(eN.W.DELETE_FOREVER,rE,!ru)]],rw=[];return rF.filter(e=>e.length>0).forEach(e=>{rw.length>0&&rw.push({displayText:"",separator:!0}),rw.push(...e)}),(0,n.jsx)(E,{portalTarget:document.body,children:(0,n.jsx)(g.j,{autofocusPrevOnDismount:!0,dispatch:eH,items:rw,lean:"right",minWidth:rs?void 0:140,onMount:e.onMount,onSelectItem:(e,t)=>{e.callback&&e.callback("",{},eH,t)},parentRect:rl.targetRect,recordingKey:"tile-dropdown",showPoint:!1})})}function eM(e){return a.v.getFeatureGate("tile_action_dropdown_refactor")?(0,n.jsx)(eP,{...e}):(0,n.jsx)(eL,{...e})}var eD=r(835048),eW=r(357578),eB=r(435176);function eK({tileActions:e,openTile:t,tile:r,selectedTiles:_,dropdownVisible:h,trackSearchFn:m}){var y;let E,b,g,v=r||(1===_.length?_[0]??null:null),x=h&&null!==r,{filePermissions:F,repoPermissions:w,protoPermissions:I}=(0,s.xD)(_),T=l.useMemo(()=>v?(0,eB.i)(v):null,[v]),k=function({fileKey:e,tile:t,tileActions:r,enabled:n}){let l=(0,eW.ac)(e,n),a=t?R.Tf.getOrgId(t):null,i=t?R.Tf.getFavoriteResourceTeamId(t):null,o=(0,e_.jm)(a,i),s=(0,eD.Y)(e??"",ea.bk.FILE,a,i,n),d=(0,p.pH)(e??"",{enabled:!!e&&r.pinToWorkspace&&n}),c=s.hasMaxFavorites,u=s.favorite,f=s.orderedSidebarSections??[],_=(0,$.t$)(s.userSidebarSections??[],f),h=_.find(e=>e.id===u?.resource.sidebarSectionId),m="loaded"!==s.status&&"disabled"!==s.status,y="loaded"!==l.status&&"disabled"!==l.status,E="loaded"!==d.status&&"disabled"!==d.status;return{loading:m||y||E,data:{hasMaxFavorites:c,userSidebarSections:_,favoriteSidebarSection:h,createBranchStatus:l.data,isResourceInUserPlan:!!o,fileWorkspacePinActions:d.data}}}({fileKey:T,tile:v,tileActions:e,enabled:1===_.length}),O=k.loading&&r?.type!==R.nb.OFFLINE_FILE||"loaded"!==F.status||"loaded"!==w.status||"loaded"!==I.status;return(y=_.length>1,E=l.useRef(x),b=l.useRef(null),g=a.v.getFeatureGate("file_browser_preload_context_menu_hover"),l.useEffect(()=>{x&&!1===E.current&&(b.current&&(b.current=null),O?b.current=new d.rw:o.az.trackDefinedEvent("file_browser.context_menu_render",{cache_hit:!0,durationMs:0,isBulkSelect:y,preloadOnHover:g})),x&&!O&&(b.current?.stop(e=>{o.az.trackDefinedEvent("file_browser.context_menu_render",{cache_hit:e<=50,durationMs:e,isBulkSelect:y,preloadOnHover:g})}),b.current=null),E.current=x},[x,O,y,g]),!x||O)?null:(0,n.jsx)(u.tH,{boundaryKey:"TileActionDropdown",sentryTags:{area:i.FigmaTeam.WAYFINDING},fallback:u.H4.NONE_I_KNOW_WHAT_IM_DOING,children:(0,n.jsx)(c.u9,{label:"TileActionDropdown",context:{enabledActions:{...e}},logToFigment:!0,children:(0,n.jsx)(eM,{loadedQueries:k.data,onMount:()=>{f.$.endAndReport(`${R.Tf.getId(r)}`)},openTile:t,permsByFileKey:F.data,permsByPrototypeId:I.data,permsByRepoId:w.data,selectedTiles:_,sourceFileKey:T,tile:r,tileActions:e,trackSearchFn:m})})})}},435176(e,t,r){r.d(t,{i:()=>l});var n=r(832763);let l=e=>e?e.type===n.nb.REPO?e.repo?.default_file_key??null:e.type===n.nb.PINNED_FILE||e.type===n.nb.FILE?e.file?.key??null:null:null},740939(e,t,r){r.d(t,{W:()=>n});let n=1464==r.j?{COPY_LINK:"COPY_LINK",DELETE:"DELETE",DUPLICATE:"DUPLICATE",DUPLICATE_TO_DRAFTS:"DUPLICATE_TO_DRAFTS",OPEN:"OPEN",OPEN_NEW_TAB:"OPEN_NEW_TAB",OPEN_WITH_DISABLED_PREVIEW:"OPEN_WITH_DISABLED_PREVIEW",PIN_FILE_TO_FOLDER:"PIN_FILE_TO_FOLDER",PIN_REPO_TO_FOLDER:"PIN_REPO_TO_FOLDER",PIN_FILE_TO_WORKSPACE:"PIN_FILE_TO_WORKSPACE",RENAME:"RENAME",MOVE_FILE:"MOVE_FILE",SHARE:"SHARE",SHOW_IN_FOLDER:"SHOW_IN_FOLDER",REMOVE_FROM_RECENTS:"REMOVE_FROM_RECENTS",REMOVE_FROM_SHARED_FILES:"REMOVE_FROM_SHARED_FILES",RESTORE_FROM_VERSION:"RESTORE_FROM_VERSION",UNPIN_FILE_FROM_FOLDER:"UNPIN_FILE_FROM_FOLDER",UNPIN_REPO_FROM_FOLDER:"UNPIN_REPO_FROM_FOLDER",UNPIN_FILE_FROM_WORKSPACE:"UNPIN_FILE_FROM_WORKSPACE",EDIT_WORKSPACE_PIN:"EDIT_WORKSPACE_PIN",CREATE_BRANCH:"CREATE_BRANCH",FAVORITE_FILE:"FAVORITE_FILE",FAVORITE_PROTOTYPE:"FAVORITE_PROTOTYPE",FAVORITE_REPO:"FAVORITE_REPO",UNFAVORITE_FILE:"UNFAVORITE_FILE",UNFAVORITE_PROTOTYPE:"UNFAVORITE_PROTOTYPE",UNFAVORITE_REPO:"UNFAVORITE_REPO",USE_IN_NEW_FILE:"USE_IN_NEW_FILE",FILE_ANALYTICS:"FILE_ANALYTICS",DELETE_FOREVER:"DELETE_FOREVER",RESTORE:"RESTORE",RESTORE_TO:"RESTORE_TO"}:null},643300(e,t,r){r.d(t,{L:()=>a});var n=r(105652),l=r(636773);function a(){let e=`TILE_ACTION_DROPDOWN_${n.useId()}`;return(0,l.BK)(e)}},880067(e,t,r){r.d(t,{Q4:()=>O,gE:()=>k,u5:()=>R});var n=r(850159),l=r(3752),a=r(181645),i=r(30890),o=r(436174),s=r(42053),d=r(116682),c=r(937070);if(1464==r.j)var u=r(613629);var p=r(387166),f=r(540769),_=r(220117),h=r(537916);if(1464==r.j)var m=r(539554);var y=r(26197);if(1464==r.j)var E=r(435065);var b=r(83522);if(1464==r.j)var g=r(487817);var v=r(169984),x=r(357661),F=r(309295);if(1464==r.j)var w=r(839066);if(1464==r.j)var I=r(383383);async function T(e,t,r,l,a,i){let o=[],d=null;try{d=await (0,y.nm)()(r),o=(0,E.F)(l,t,d)}catch(t){let e=t?.data?.message||(0,n.t)("file_browser.error_try_again");r(u.F.enqueue({message:e,type:"error"}))}let c=(l.authedActiveCommunityProfile?.associated_users??[]).filter(e=>e.user_id in l.authedUsers.byId).length>1,p=(0,f.JJ)(t.viewer_mode),_=o.map(e=>(0,h.y)(e,p,l,d,i)).filter(e=>null!==e);1!==_.length||c?(0===_.length&&(0,s.xi)("community","no available workspaces for workspace selection modal",{workspaces:o,userId:l.user?.id}),e({onSelectWorkspace:a,workspaces:_,mode:"new_file"})):a(_[0])}let k=(e,t={isFreemiumPreview:!1,adminReviewerOverride:!1,skipWorkspaceSelection:!1,userId:void 0,openInNewTab:!0})=>r=>async(n,s)=>{let u=s();function f(e){let s={headers:{...d.Ay.defaults.headers}},f={};e&&(s.headers["X-Figma-User-ID"]=e.userId,f.org_id=e.orgId,f.team_id=e.teamId),!0===t.adminReviewerOverride&&(f.admin_reviewer_override=!0),d.Ay.post(`/api/hub_files/v2/${r.id}/copy`,f,s).then(({data:s})=>{let d=s.meta,_=(0,x.m3)(r),h=!0!==_?"none":!0===t.isFreemiumPreview?"trial":"paid";(0,a.sx)(m.M5.HUB_FILE_DUPLICATED,{hubFileId:r.id,figFileKey:d.key,isMonetized:_,paidStatus:h,searchSessionId:(0,p.wr)(u),file_team_id:f.team_id,org_id:f.org_id,file_folder_id:d.folder_id}),"whiteboard"===d.editor_type&&n((0,c.Hx)({storeInRecentsKey:w.$A.FigJam,id:r.id,type:w.vt.CommunityResource}));let y=(0,b.to)(d);y=(0,i.dR)(y,{"is-community-duplicate":"1",fuid:e?.userId||t.userId||""}),!0===t.isFreemiumPreview&&(y=(0,i.dR)(y,{"is-freemium-preview":"1"})),o.Ay.redirect(y,l.A.isMobileBrowser||!t.openInNewTab?void 0:"_blank")})}(0,_.YN)()&&t.skipWorkspaceSelection?f():await T(e,r,n,u,f)},R=(e,t={skipWorkspaceSelection:!1,userId:void 0})=>r=>async(n,a)=>{let s=a();function d(e){let n=(0,I.e)(g._Y.SLIDES,F.f6.COMMUNITY_RESOURCE_TILE_USE_TEMPLATE,r.library_key);e?((0,v.Y9)(e.userId,!1,e.orgId,void 0,e.teamId??null),n=(0,i.dR)(n,{fuid:e.userId})):t.userId&&(n=(0,i.dR)(n,{fuid:t.userId})),o.Ay.redirect(n,l.A.isMobileBrowser?void 0:"_blank")}(0,_.YN)()&&t.skipWorkspaceSelection?d():await T(e,r,n,s,d)},O=(e,t={skipWorkspaceSelection:!1,userId:void 0})=>r=>async(n,a)=>{let s=a();function d(e){let n=`/file/new?initial-library-key=${r.library_key}`;e?((0,v.Y9)(e.userId,!1,e.orgId,void 0,e.teamId??null),n=(0,i.dR)(n,{fuid:e.userId})):t.userId&&(n=(0,i.dR)(n,{fuid:t.userId})),o.Ay.redirect(n,l.A.isMobileBrowser?void 0:"_blank")}(0,_.YN)()&&t.skipWorkspaceSelection?d():await T(e,r,n,s,d,!0)}},759555(e,t,r){r.d(t,{A:()=>p});var n=r(645186),l=r(181645),a=r(880067),i=r(24375),o=r(38900),s=r(508295),d=r(357661),c=r(446493),u=r(387166);function p({resource:e,adminReviewerOverride:t=!1,isFreemiumPreview:r=!1,skipWorkspaceSelection:p=!1,openInNewTab:f=!0}){let _=(0,n.wA)(),h=(0,u.Jm)(),m=(0,c.T)(),y=(0,s.iZ)();if(!(0,d.U)(e))return()=>{};let E=a.gE(t=>{(0,l.sx)("try_it_out_drafts_picker_menu_opened",{hubFileId:e.id,searchSessionId:h}),_((0,o.to)({type:i._,data:{payload:t}}))},{isFreemiumPreview:r,adminReviewerOverride:t,skipWorkspaceSelection:m||p,userId:y?.id,openInNewTab:f});return()=>{_(E(e))}}},775913(e,t,r){r.d(t,{I:()=>a});var n=r(865804);if(1464==r.j)var l=r(113641);function a(){return(0,n.j6)().name===l.e0.RESOURCE_HUB_LIGHTBOX_RDP}},835048(e,t,r){r.d(t,{Y:()=>o});var n=r(140979),l=r(668522),a=r(571916),i=r(644350);function o(e,t,r=null,s=null,d=!0){let c=(0,n.bc)(i.qjT,{resourceId:e,resourceType:t,orgId:r,teamId:r?null:s},{enabled:d}),u=c.data?(0,a.eU)(c.data,t):void 0;return{status:c.status,favorite:u,hasMaxFavorites:!!c.data?.favoritedResources?.numFavorites&&(0,a.tW)(c.data?.favoritedResources.numFavorites),userSidebarSections:c.data?.currentUser?(0,l.oA)(c.data.currentUser.userSidebarSections):null,orderedSidebarSections:c.data?.currentUser.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections}}},64537(e,t,r){r.d(t,{Q:()=>m,S:()=>y});var n=r(850159),l=r(95382),a=r(668522),i=r(42053),o=r(116682),s=r(863825),d=r(613629),c=r(898312),u=r(644350),p=r(924114),f=r(270010),_=r(699720),h=r(265773);let m=(0,h.nF)(async(e,t,{loadingKey:r})=>{let o=!1;try{o=!!(0,a.oA)((await (0,l.Ek)(u.jmg,{fileKey:t.file_key})).deviceTryFile)}catch(e){(0,i.x1)("claimFigJamTryFile","Request failed for fetching LG DeviceTryFileView",e,{reportAsSentryError:!0})}try{let l;l=o?_.L.claimDeviceFile({fileKey:t.file_key}):f.Uy.claimTryFile({fileKey:t.file_key,folderId:t.folder_id}),(0,p.N)(l,e,r);let{data:a}=await l,{save_location:i,folder_name:s,org_id:u}=a.meta,{user:h,currentUserOrgId:m,selectedView:y}=e.getState(),E=(0,n.t)("figjam_try.this_file_has_been_saved_to_drafts");if("team"===i&&s&&(E=(0,n.t)("figjam_try.this_file_has_been_saved_to_folder_name",{folder_name:s})),u&&u!==m&&h){let t={userId:h.id,orgId:u};e.dispatch(c._l({workspace:t,view:y}))}e.dispatch(d.F.enqueue({message:E}))}catch(t){e.dispatch(s.s.error("Unable to save file. Please try again later."))}}),y=(0,h.nF)(async(e,{userName:t,file_key:r},{loadingKey:l})=>{try{await o.Ay.put(`/api/try/file/${r}`,{name:(0,n.t)("figjam_try.default_filename",{userName:t})})}catch(e){console.error(e)}})},700354(e,t,r){let n;r.d(t,{Z:()=>p,T:()=>u});var l=r(863825),a=r(765326),i=r(936652),o=r(38900),s=r(980711),d=r(279378),c=r(265773);let u=(0,c.nF)((e,{fileKey:t,versionId:r})=>{s.W.getVersion({fileKey:t,versionId:r}).then(({data:t})=>{let r=t.meta.version;e.dispatch(o.to({type:d.y,data:{description:r.description,label:r.label,savepointID:r.id,isEditingMergeSavepoint:!0}}))},()=>{e.dispatch(l.s.error("An error occurred while retrieving the file history."))})}),p=(0,c.nF)(async(e,{fileKey:t},{liveStore:d})=>{try{let{data:l}=await s.W.getVersions({fileKey:t,pageSize:100}),c=await d.fetchFile(t),u=l.meta.versions;e.dispatch(o.to({type:n??=(0,i.Ju)(a.A.createLazyComponent(()=>Promise.all([r.e("905"),r.e("5493"),r.e("1617"),r.e("826"),r.e("7205"),r.e("7840"),r.e("7606"),r.e("5830"),r.e("8916"),r.e("5639"),r.e("8701"),r.e("1366"),r.e("8783"),r.e("1904"),r.e("9387"),r.e("907"),r.e("2749"),r.e("5693"),r.e("9931"),r.e("8162"),r.e("3416"),r.e("6467"),r.e("3582"),r.e("4395"),r.e("3278")]).then(r.bind(r,579982)).then(e=>e.FileRestoreFromVersionModal),(0,i.Ij)("FileRestoreFromVersionModal"))),data:{fig:c,versions:u}}))}catch(t){e.dispatch(l.s.error("An error occurred while retrieving the file history."))}})},458914(e,t,r){r.d(t,{$:()=>g,E:()=>b});var n=r(105652),l=r(645186),a=r(885705),i=r(706354);if(2036!=r.j)var o=r(741542);var s=r(350923),d=r(195784),c=r(490753),u=r(884720),p=r(198788),f=r(358873),_=r(508295);if(2036!=r.j)var h=r(487817);var m=r(309295);if(2036!=r.j)var y=r(317673);var E=r(942496);function b({newFileFrom:e,folderData:t,forceOpenNewTab:r}){let b=(0,l.wA)(),g=(0,_.TA)(),v=(0,l.d4)(e=>e.user),x=(0,l.d4)(e=>e.selectedView),F=(0,s.Xr)(y.P4),w=(0,l.d4)(e=>{let r="DRAFTS_FOLDER"!==t?t:void 0;return r&&r.teamId?e.teams[r.teamId]:void 0}),I=(0,l.d4)(e=>e.currentTeamId?e.teams[e.currentTeamId]:void 0),{Sprig:T}=(0,p.A)();return(0,n.useCallback)(({editorType:n,contextClicked:l,triggerElement:s,newFileDataLocalStorageKey:p})=>_=>{b((0,E.zE)({editorType:n,triggerElement:s,team:w||I,from:e,openNewFileIn:r||(0,c.oJ)(_)?m.ai.NEW_TAB:m.ai.SAME_TAB,folderData:t,callback:e=>{(0,d.Cu)({userId:g,fileKey:e},l)},newFileDataLocalStorageKey:p})),n===h._Y.SITES&&F(!0),(0,o.getFeatureFlags)().file_browser_sentiment_survey&&T("setAttribute","fb_file_created",!0),u.J.addAction("file_created",i.FigmaTeam.WAYFINDING,a.$.INFO,{sourceComponent:l,selectedView:(0,f.fu)({selectedView:x,user:v})})},[b,t,w,I,r,e,g,F,T,x,v])}function g({editorType:e,triggerElement:t,contextClicked:r,...l}){let a=b(l);return(0,n.useMemo)(()=>a({editorType:e,triggerElement:t,contextClicked:r}),[a,e,t,r])}},649862(e,t,r){r.d(t,{MA:()=>s,om:()=>i,x1:()=>o});var n,l,a,i=1464==r.j?((n=i||{})[n.eduRestrictedSitesBanner=0]="eduRestrictedSitesBanner",n[n.TestThemeBanner=1]="TestThemeBanner",n[n.TestWarningBanner=2]="TestWarningBanner",n[n.TestOOMBanner=3]="TestOOMBanner",n[n.TestInfoBanner=4]="TestInfoBanner",n[n.StarterTeamOverFreeLimitAndLocked=5]="StarterTeamOverFreeLimitAndLocked",n[n.EduGracePeriodAccessRestricted=6]="EduGracePeriodAccessRestricted",n[n.EduGracePeriodShowReminder=7]="EduGracePeriodShowReminder",n[n.OrphanedOrgDraftsFile=8]="OrphanedOrgDraftsFile",n[n.TeamAbandonedDraftsFile=9]="TeamAbandonedDraftsFile",n[n.TeamAdminOpenInvoiceReminder=10]="TeamAdminOpenInvoiceReminder",n[n.PersonalProjectDeprecatedFile=11]="PersonalProjectDeprecatedFile",n[n.ProTeamPastDue=12]="ProTeamPastDue",n[n.ProTeamChargeFailed=13]="ProTeamChargeFailed",n[n.ProTeamNoMonthlySubEditorCountExceeded=14]="ProTeamNoMonthlySubEditorCountExceeded",n[n.MultiplayerSessionUpgrade=15]="MultiplayerSessionUpgrade",n[n.AdminI18nLocalWarnBanner=16]="AdminI18nLocalWarnBanner",n[n.FigJamTryDraftsBanner=17]="FigJamTryDraftsBanner",n[n.FigJamTryClaimBanner=18]="FigJamTryClaimBanner",n[n.CommunityResourceCTANuxBanner=19]="CommunityResourceCTANuxBanner",n[n.communityM10nApprovalBanner=20]="communityM10nApprovalBanner",n[n.communityM10nFinishSetupBanner=21]="communityM10nFinishSetupBanner",n[n.communityM10nAdtlInfoNeededBanner=22]="communityM10nAdtlInfoNeededBanner",n[n.communityResourceInReviewBanner=23]="communityResourceInReviewBanner",n[n.CommunityResourceCreatorBanner=24]="CommunityResourceCreatorBanner",n[n.ExternalContentControlBanner=25]="ExternalContentControlBanner",n[n.MemoryWarningBanner=26]="MemoryWarningBanner",n[n.MemoryErrorBanner=27]="MemoryErrorBanner",n[n.MemorySafeBanner=28]="MemorySafeBanner",n[n.AdminUserDisposableDomainWarningBanner=29]="AdminUserDisposableDomainWarningBanner",n[n.FileIsTeamTemplate=30]="FileIsTeamTemplate",n[n.DowntimeBanner=31]="DowntimeBanner",n[n.FreemiumPreviewBanner=32]="FreemiumPreviewBanner",n[n.FileCreationFailureBanner=33]="FileCreationFailureBanner",n[n.DevModePaywallBanner=34]="DevModePaywallBanner",n[n.DevModeInTrialBanner=35]="DevModeInTrialBanner",n[n.devModeStarterTrialBanner=36]="devModeStarterTrialBanner",n[n.DesktopDownloadBanner=37]="DesktopDownloadBanner",n[n.BrowserDeprecationBanner=38]="BrowserDeprecationBanner",n[n.FragmentTextSearchQualityBanner=39]="FragmentTextSearchQualityBanner",n[n.Gen1DesignViewerBanner=40]="Gen1DesignViewerBanner",n[n.DesktopDeprecationBanner=41]="DesktopDeprecationBanner",n[n.LoggedOutCta=42]="LoggedOutCta",n[n.SeatBillingTermsReminder=43]="SeatBillingTermsReminder",n[n.CooperOldFileBanner=44]="CooperOldFileBanner",n[n.InteropPagesBanner=45]="InteropPagesBanner",n[n.ForceClientReload=46]="ForceClientReload",n[n.TemplatePublishingNudgeBanner=47]="TemplatePublishingNudgeBanner",n[n.DevModeDemoFileUpsellBanner=48]="DevModeDemoFileUpsellBanner",n[n.OrderFormBillingTermsBanner=49]="OrderFormBillingTermsBanner",n[n.NonAdminBillingTermsBanner=50]="NonAdminBillingTermsBanner",n[n.OrgDowngradeBanner=51]="OrgDowngradeBanner",n[n.DevModeMCPSSEDeprecationBanner=52]="DevModeMCPSSEDeprecationBanner",n[n.SlotsEnablementReload=53]="SlotsEnablementReload",n[n.SupportShareWarningBanner=54]="SupportShareWarningBanner",n[n.GuestExpirationWarningBanner=55]="GuestExpirationWarningBanner",n):null,o=1464==r.j?((l=o||{}).INFO="info",l.WARN="warn",l.SUCCESS="success",l.ERROR="error",l.WARN_SOFT="warn_soft",l.CONFIDENTIALITY="confidentiality",l.BRAND_STRONG="brand_strong",l.DANGER="danger",l.INFO_SOFT="info_soft",l.FPL_DEFAULT="fpl_default",l.FPL_DANGER="fpl_danger",l.FPL_BRAND="fpl_brand",l.FPL_SUCCESS="fpl_success",l.FPL_WARN="fpl_warn",l):null,s=1464==r.j?((a=s||{}).STRUCTURED="structured",a.CUSTOM="custom",a):null},446493(e,t,r){r.d(t,{T:()=>a});var n=r(138247),l=r(775913);function a(){let e=(0,l.I)(),t=(0,n.AG)();return e||t}},951468(e,t,r){r.d(t,{$f:()=>Z});var n=r(239976),l=r(105652),a=r(645186),i=r(130729),o=r(916290),s=r(147911),d=r(395227),c=r(497817),u=r(68278),p=r(732632),f=r(71239),_=r(297151),h=r(859978),m=r(874287),y=r(282318),E=r(412955),b=r(31551),g=r(850159),v=r(574988),x=r(865804),F=r(838719),w=r(227031),I=r(834116),T=r(848694),k=r(67892),R=r(687497),O=r(985373),S=r(38900),C=r(936652),A=r(932630),j=r(36722),P=r(487817),N=r(331850),L=r(547898),M=r(541391),D=r(308323),W=r(874937),B=r(961645),K=r(676835),U=r(360214),V=r(31287);function Y({opacity:e}){return(0,n.jsx)("div",{style:{opacity:e},children:(0,n.jsxs)("div",{...{className:"x78zum5 x6s0dn4 x1i71x30 x1vi7shn xp6roeo"},children:[(0,n.jsx)(U.Wi,{style:{width:24,height:24,borderRadius:4,flexShrink:0}}),(0,n.jsxs)("div",{...{className:"x78zum5 xdt5ytf xg2d0mh x1iyjqo2"},children:[(0,n.jsx)(U.Wi,{style:{height:14,width:120,borderRadius:2}}),(0,n.jsx)(U.Wi,{style:{height:12,width:180,borderRadius:2}})]})]})})}function H(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{...v.xk(V.g.searchContainer),children:[(0,n.jsx)("div",{...v.xk(V.g.searchBarWrapper),children:(0,n.jsx)(U.Wi,{style:{height:24,borderRadius:6,width:"100%"}})}),(0,n.jsx)(U.Wi,{style:{width:24,height:24,borderRadius:4}})]}),(0,n.jsx)("div",{...{className:"x1w4f5ud x1vamu9a x1gcgh60 x1jwbysl x78zum5 xdt5ytf x1nfngrj"},children:Array.from({length:5},(e,t)=>(0,n.jsx)(Y,{opacity:t<2?1:1-(t-2+1)/4},t))})]})}var z=r(852448),$=r(792706);let q={all:null,joined:P.ZF.USER_GROUPS_JOINED,created:P.ZF.USER_GROUPS_CREATED},G={k1xSpc:"x78zum5",kGNEyG:"x6s0dn4",kOIVth:"x883omv",khm7nJ:null,k1C7PZ:null,kzQI83:"x1iyjqo2",kmuXW:"xs83m0k",kCS8Yb:"x1t1x2f9",k7Eaqz:"xeuugli",kVQacm:"xb3r6kr",kXHlph:null,kORKVm:null,kLKAdn:"x1vi7shn",kGO01o:"xp6roeo",$$css:!0},Q={kmVPX3:"x1717udv",kg3NbH:null,kuDDbn:null,kP0aTx:null,kpe85a:null,k8WAf4:null,kLKAdn:null,kGO01o:null,kE3dHu:"x8rdmch",kZCmMZ:null,kwRFfy:null,koQZXg:"x1e38ib8",keTefX:null,k71WvV:null,kfdmCh:"x1sy0etr",kaIpWk:"x19y5rnk",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,kWkggS:"xjbqb8w xv2f06h",$$css:!0};function X({userGroup:e,onViewSharedFilesClick:t,onSettingsClick:r,onDeleteClick:l}){let{canEdit:a,canDelete:i}=(0,j.en)(j.Ls.FILE_BROWSER,{id:e.id,createdByUserId:e.createdByUser?.id});return(0,n.jsxs)($.zx,{children:[e.isMember&&(0,n.jsx)(s.q7,{onClick:()=>t(e),children:(0,g.t)("user_groups.view_shared_files")}),(0,n.jsx)(s.q7,{onClick:()=>r(e,a),children:(0,g.t)("user_groups.settings")}),i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.wv,{}),(0,n.jsx)(s.q7,{onClick:()=>l(e),children:(0,g.t)("user_groups.delete_user_group_button")})]})]})}function J({open:e,onClose:t,initialFilterOption:r,initialSortOption:w,initialSearchQuery:C,initialPlanHasUserGroups:U,onUserGroupCreated:Y}){let $=(0,a.wA)(),J=(0,A.DP)(),ee=(0,j.Q3)(),et=(0,N.S2)().unwrapOr(null),er=et?.planRecordId,en=(0,N.px)(),el=(0,N.j_)(en).unwrapOr(!1),{canCreate:ea,userGroupCreationSetting:ei}=(0,j.en)(j.Ls.FILE_BROWSER),eo=ei===P.W2.ADMINS,es=ea||eo,ed=d.hS({open:e,onClose:t}),{manager:ec,getTriggerProps:eu}=s.b({initialPosition:"bottom-end"}),[ep,ef]=l.useState(C??""),[e_,eh]=l.useState(r??"all"),[em,ey]=l.useState(w??"name_asc"),[eE,eb]=l.useState(U??null),eg=l.useCallback(e=>{ef(e)},[ef]),ev=l.useMemo(()=>(0,i.s)(eg,300),[eg]),ex="name_asc"===em||"name_desc"===em?P.z7.NAME:P.z7.LAST_ACTIVITY_AT,eF="name_asc"===em||"last_updated_asc"===em?"asc":"desc",ew=q[e_],{userGroups:eI,fetchMore:eT,status:ek}=(0,j.Qx)({firstPageSize:50,sortProperty:ex,sortOrder:eF,queryString:ep,useDBQuery:""===ep,filterProperty:ew}),eR=l.useMemo(()=>{let e=[];for(let t of eI){let r=t.userGroup;r&&e.push((0,K.c)(r))}return e},[eI]);l.useEffect(()=>{"loaded"===ek&&(eR.length>0?!0!==eE&&eb(!0):ep||"all"!==e_||eb(!1))},[ek,eE,ep,e_,eR.length]);let eO=l.useMemo(()=>[{name:(0,g.t)("user_groups.user_group"),className:v.xW(G)??"",cellComponent:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k.q,{userGroup:e,size:24}),(0,n.jsxs)("div",{...{className:"x78zum5 xdt5ytf x1iyjqo2 xs83m0k xdl72j9 xeuugli xb3r6kr"},children:[(0,n.jsx)(R.E,{fontSize:11,fontWeight:"medium",truncate:"end",showTooltipWhenTruncated:!0,children:e.name}),(0,n.jsxs)("div",{...{className:"x78zum5 x6s0dn4 xb3r6kr xuxw1ft x1jwbysl xeuugli"},children:[(0,n.jsx)(R.E,{fontSize:11,color:"secondary",children:(0,g.t)("user_group.member_count",{count:e.memberCount})}),e.description&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(R.E,{fontSize:11,color:"secondary",children:"\xa0\xb7\xa0"}),(0,n.jsx)(R.E,{fontSize:11,color:"secondary",truncate:"end",showTooltipWhenTruncated:!0,children:e.description})]})]})]})]})}],[]),eS=l.useCallback(()=>{$((0,S.AS)()),$((0,S.to)({type:Z,data:{initialFilterOption:e_,initialSortOption:em,initialSearchQuery:ep,initialPlanHasUserGroups:eE??void 0,onUserGroupCreated:Y}}))},[$,e_,em,ep,eE,Y]),eC=(0,n.jsxs)(s.bL,{manager:ec,children:[(0,n.jsx)("div",{...{0:{className:"x78zum5 x6s0dn4 xl56j7k"},1:{className:"x78zum5 x6s0dn4 xl56j7k xcr9a89 x19y5rnk"}}["all"!==e_|0],children:(0,n.jsx)(c.d,{"aria-label":(0,g.t)("user_group.filter_user_groups"),...eu(),children:"all"!==e_?(0,n.jsx)(m.S,{className:"x1aue78i"}):(0,n.jsx)(y.S,{})})}),(0,n.jsxs)(s.mc,{children:[(0,n.jsx)(s.hE,{children:(0,g.t)("user_group.filter.title")}),(0,n.jsxs)(u.z6,{title:"",value:e_,onChange:e=>eh(e),children:[(0,n.jsx)(u.CU,{value:"all",children:(0,g.t)("user_group.filter.all_user_groups")}),(0,n.jsx)(u.CU,{value:"joined",children:(0,g.t)("user_group.filter.groups_joined")}),(0,n.jsx)(u.CU,{value:"created",children:(0,g.t)("user_group.filter.groups_created")})]}),(0,n.jsx)(s.hE,{children:(0,g.t)("user_group.filter.sort_by")}),(0,n.jsxs)(u.z6,{title:"",value:em,onChange:e=>ey(e),children:[(0,n.jsx)(u.CU,{value:"name_asc",children:(0,g.t)("user_group.filter.sort.a_to_z")}),(0,n.jsx)(u.CU,{value:"name_desc",children:(0,g.t)("user_group.filter.sort.z_to_a")}),(0,n.jsx)(u.CU,{value:"last_updated_desc",children:(0,g.t)("user_group.filter.sort.most_recently_updated")}),(0,n.jsx)(u.CU,{value:"last_updated_asc",children:(0,g.t)("user_group.filter.sort.oldest_updated")})]})]})]}),eA=l.useCallback((e,t)=>{$((0,S.to)({type:B.u,data:{userGroup:e,canEdit:t,onBack:eS}}))},[$,eS]),ej=l.useCallback(e=>{$((0,S.to)({type:D.u,data:{userGroups:[e],onCancel:()=>{$((0,S.Lo)())},onCloseClick:()=>{$((0,S.Lo)())}},showModalsBeneath:!0}))},[$]),eP=l.useCallback(e=>{ee(e.id)},[ee]),eN=l.useMemo(()=>[{name:"menu-cell",cellComponent:e=>(0,n.jsx)(X,{userGroup:e,onViewSharedFilesClick:eP,onSettingsClick:eA,onDeleteClick:ej})}],[eP,eA,ej]),eL=l.useCallback(e=>{$((0,S.AS)()),$((0,S.to)({type:W.y,data:{userGroupId:e.id,onBack:eS}}))},[$,eS]);return et&&er?(0,n.jsx)(x.fu,{name:"user_groups_modal",children:(0,n.jsx)(f.bL,{manager:ed,width:"lg","data-testid":"user-groups-modal",children:(0,n.jsxs)(_.vo,{children:[(0,n.jsxs)(_.Jh,{...v.xk(V.g.customHeader),children:[(0,n.jsx)(_.hE,{children:(0,g.t)("user_groups.all_user_groups")}),(0,n.jsx)(_.Ch,{...v.xk(V.g.customClose)})]}),(0,n.jsx)(_.nB,{scrolling:"manual",padding:0,children:(0,n.jsx)("div",{...v.xk(V.g.modalBodyContainer,es&&!0===eE?V.g.modalBodyContainerWithFooter:V.g.modalBodyContainerWithoutFooter),children:null===eE?(0,n.jsx)(H,{}):(0,n.jsxs)(n.Fragment,{children:[eE&&(0,n.jsxs)("div",{...v.xk(V.g.searchContainer),children:[(0,n.jsx)("div",{...v.xk(V.g.searchBarWrapper),children:(0,n.jsx)(T.y2,{autoFocus:!0,styleOverrides:{boxSizing:"border-box",width:"100%",borderRadius:"6px"},onChange:ev,query:ep,placeholder:(0,g.t)("user_group.search_placeholder"),resultsCount:eR.length})}),eC]}),(0,n.jsx)("div",{...{className:"x1iyjqo2 xs83m0k xdl72j9 xysyzu8 x2lwn1j"},children:0===eR.length&&"loaded"===ek?(0,n.jsx)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 x1lpwdgh x1g0v9sp x8rdmch xctkrei x2b8uid x1n0bwc9"},children:"all"!==e_?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I.oW,{src:(0,F.staticAssetWithUploadsPath)("dark"===J?"40c38fef7cb51e8ecb8825f4a9a1d834d2adc783":"a70afe2b28f296873f64775063953e3ac062dbc0"),alt:(0,g.t)("user_groups.user_group_logo"),width:150}),(0,n.jsx)("div",{...{className:"x15r87gk x1n0bwc9"},children:(0,g.t)("user_groups.no_groups_match_the_current_filter")}),(0,n.jsx)("div",{...{className:"xehsoiq"},children:(0,n.jsx)(p.$n,{variant:"secondary",iconPrefix:(0,n.jsx)(E.f,{className:"x1057jvv"}),onClick:()=>eh("all"),children:(0,g.t)("user_groups.clear_filter")})})]}):ep?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I.oW,{src:(0,F.staticAssetWithUploadsPath)("dark"===J?"40c38fef7cb51e8ecb8825f4a9a1d834d2adc783":"a70afe2b28f296873f64775063953e3ac062dbc0"),alt:(0,g.t)("user_groups.user_group_logo"),width:150}),(0,n.jsx)("div",{...{className:"x15r87gk x1n0bwc9"},children:(0,g.t)("user_groups.no_groups_match_your_search")})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I.oW,{src:(0,F.staticAssetWithUploadsPath)("df36707be31e857112158776a58401aac4b43979"),alt:(0,g.t)("user_groups.user_group_logo"),width:150}),(0,n.jsx)("div",{...{className:"xehsoiq x1akne3o xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh"},children:(0,g.t)("user_groups.no_user_groups_in_plan_yet",{planName:et?.name??""})}),(0,n.jsx)("div",{...{className:"x15r87gk x1n0bwc9"},children:(0,g.t)("user_groups.create_your_first_user_group_for_quick_flexible_collaboration_short")}),es&&(0,n.jsx)("div",{...{className:"xehsoiq"},children:(0,n.jsx)(p.$n,{variant:"primary",iconPrefix:(0,n.jsx)(b.J,{}),disabled:eo,...eo&&{"data-tooltip":(0,g.t)("user_groups.create_user_group_disabled_by_admins"),"data-tooltip-type":"text","data-tooltip-show-above":!0},onClick:()=>{$((0,S.AS)()),$((0,S.to)({type:M.C,data:{source:"user_groups_modal",onBack:eS,onCancel:eS,onSuccess:e=>{Y?.(),$((0,S.AS)()),$((0,S.to)({type:W.y,data:{userGroupId:e.id,onBack:eS}}))},prefillCreatorEmail:!0}}))},children:(0,g.t)("user_groups.create_user_group")})})]})}):(0,n.jsx)(z.Cj,{columns:eO,emptyContent:null,getItemKey:e=>e.id,hideHeader:!0,isLoading:"loaded"!==ek||!!eT,itemTypeContext:{itemType:"user_group",getSelectedCountString:()=>(0,g.t)("multi_select_list.selected_count_user_groups",{numSelected:0})},items:eR,minContentWidth:0,noCheckboxColumn:!0,onFetchMore:eT,onRowClick:eL,onSelectedItemsChange:o.lQ,onSetSortState:o.lQ,rightActionColumns:eN,scrollAwayContent:eR.length>0?(0,n.jsx)("div",{...v.xk(V.g.multiSelectListScrollAwayContent),children:"all"===e_?(0,g.t)("user_group.filter.all_user_groups"):"joined"===e_?(0,g.t)("user_group.filter.groups_joined"):(0,g.t)("user_group.filter.groups_created")}):null,scrollContainerInnerClassName:v.xW(V.g.scrollContainerInner),selectAllDisabled:!0,sortState:{columnName:"",isReversed:!1},styleOverrideClassNames:{row:v.xW(Q)??""}})})]})})}),es&&!0===eE&&(0,n.jsxs)(_.wi,{children:[eo&&el&&(0,n.jsx)("span",{...{className:"x1n0bwc9"},children:(0,g.tx)("user_groups.admins_can_manage_groups_from_admin_console",{adminConsoleLink:(0,n.jsx)(h.E,{...{className:"x1quhyk7 x1ypdohk"},onClick:()=>{$((0,S.AS)()),$(O.sf({view:"orgAdminSettings",orgAdminSettingsViewTab:L.J7.MEMBERS,orgAdminSettingsViewSecondaryTab:L.M7.USER_GROUPS}))},children:(0,g.t)("user_groups.admin_console")})})}),(0,n.jsx)(_.jk,{children:(0,n.jsx)(p.$n,{variant:"primary",iconPrefix:(0,n.jsx)(b.J,{}),disabled:eo,...eo&&{"data-tooltip":(0,g.t)("user_groups.create_user_group_disabled_by_admins"),"data-tooltip-type":"text","data-tooltip-show-above":!0},onClick:()=>{$((0,S.AS)()),$((0,S.to)({type:M.C,data:{source:"user_groups_modal",onBack:eS,onCancel:eS,onSuccess:e=>{Y?.(),$((0,S.AS)()),$((0,S.to)({type:W.y,data:{userGroupId:e.id,onBack:eS}}))},prefillCreatorEmail:!0}}))},children:(0,g.t)("user_groups.create_user_group")})})]})]})})}):null}let Z=(0,C.Ju)(function(e){return(0,n.jsx)(w.u9,{label:"UserGroupsModal",children:(0,n.jsx)(J,{...e})})},"UserGroupsModal",C.ZU.YES)},864467(e,t,r){r.d(t,{Q:()=>s,R:()=>o});var n=r(105652),l=r(779757),a=r(140979),i=r(644350);function o(e){let t=e.canRead;return{canRead:t,canFavorite:e.canRead&&!e.isFavorited,canUnfavorite:e.canRead&&e.isFavorited}}function s(e,t=!0){let r=(0,n.useMemo)(()=>e.map(e=>({prototypeId:e})),[e]),d=(0,a.p)(i.vE,r,{enabled:t});return(0,n.useMemo)(()=>l.Qw.all(d.map(e=>e.result)).transform(e=>{let t={};for(let r of e){let e=r.prototype;e&&(t[e.id]=o(e))}return t}),[d])}},582036(e,t,r){r.d(t,{Cm:()=>d,gS:()=>u,xD:()=>p});var n=r(105652),l=r(832763);if(1464==r.j)var a=r(996501);var i=r(79303),o=r(864467),s=r(741405);function d(e,t=!0){return function(e,t=!0){let r=(0,i.IT)(e.fileKeys||c,t);return{files:r,repos:(0,s.k8)(e.repoIds||c,t),prototypes:(0,o.Q)(e.prototypeIds||c,t)}}(n.useMemo(()=>{let t={fileKeys:[],repoIds:[],prototypeIds:[]};return e.forEach(e=>{if(e.type===l.nb.FILE)t.fileKeys.push(l.Tf.getId(e));else if(e.type===l.nb.REPO)t.repoIds.push(l.Tf.getId(e));else if(e.type===l.nb.PROTOTYPE){let r=e.prototype.id;t.prototypeIds.push(r)}}),t},[e]),t)}let c=1464==r.j?[]:null;function u(e){return n.useMemo(()=>{let t={[a.F.FILES]:{},[a.F.PINNED_FILES]:{},[a.F.PROTOTYPES]:{},[a.F.REPOS]:{},[a.F.PROJECTS]:{},[a.F.OFFLINE_FILES]:{}};if(e)for(let r of e)t[l.YC[r.type]][l.Tf.getId(r)]=!0;return t},[e])}function p(e,{enabled:t=!0}={}){let r=u(e),l=n.useMemo(()=>[...Object.keys(r[a.F.FILES]),...Object.keys(r[a.F.PINNED_FILES])],[r]),d=n.useMemo(()=>Object.keys(r[a.F.REPOS]),[r]),c=n.useMemo(()=>Object.keys(r[a.F.PROTOTYPES]).map(e=>{if(!e.includes(","))throw Error(`Expected prototype id ${e} to be a client-side generated id`);let[t,r,n]=e.split(",");return n}),[r]),f=(0,i.IT)(l,t);return{filePermissions:f,repoPermissions:(0,s.k8)(d,t),protoPermissions:(0,o.Q)(c,t)}}},708114(e,t,r){function n(){return null}r.d(t,{A:()=>l,S:()=>a}),r(513486),r(574677),new(r(380683)).b({name:"litmus",dependencies:[],exports:{"./components":"./components.ts","./litmus_view_selector":"./litmus_view_selector.ts","./is_litmus":"./is_litmus.ts"},sideEffects:!1,friendFiles:[],routeHints:["litmus"],eslint:{rules:{"react/no-array-index-key":"off"}}});let l=n,a=n},835258(e,t,r){r.d(t,{OF:()=>l,e7:()=>n});let n=function(){return!1},l=function(){return!1}},890681(e,t,r){r.d(t,{F:()=>c});var n=r(239976),l=r(105652),a=r(850159),i=r(838719),o=r(863825),s=r(69603);let d=class e extends l.PureComponent{constructor(e){super(e),this.state={loaded:!1,error:null,isOpen:!1}}componentDidMount(){e.singleton=this}componentWillUnmount(){e.singleton=null}init(){return(0,s.L3)().then(()=>{this.state.loaded||(window.zE("webWidget","hide"),window.zE("webWidget:on","open",()=>{this.setState({isOpen:!0})}),window.zE("webWidget:on","close",()=>{this.setState({isOpen:!1}),this.close(!0)})),this.setState({loaded:!0,error:null})}).catch(e=>{throw e&&console.error("Unable to load Zendesk Web Widget:",e),this.setState({loaded:!1,error:e}),e})}open(e){let{userEmail:t,userName:r}=this.props;(0,i.isProd)()&&t?.endsWith("@figma.com")?this.props.dispatch(o.s.flash("Hello there! Sadly Figmates cannot use this feature. Please use a non-@figma.com account to test Zendesk")):this.init().then(()=>(0,s.wB)({name:r,email:t},e)).then(()=>{this.state.isOpen||(0,s.b_)()}).catch(()=>{this.props.dispatch(o.s.flash((0,a.t)("help_widget.zendesk.unavailable_error_message",{supportEmail:(0,i.supportEmail)()})))})}close(e=!1){this.state.loaded&&(this.state.isOpen||e)&&(window.zE("webWidget","hide"),window.zE("webWidget","close"))}isError(){return!!this.state.error}render(){return(0,n.jsx)("div",{className:"zendesk-web-widget"})}};d.singleton=null;let c=1464==r.j?d:null},638871(e,t,r){r.d(t,{AV:()=>u,xv:()=>f,Bm:()=>p});var n=r(239976),l=r(105652),a=r(523924),i=r(513427),o=r(224542),s=r.n(o),d=r(289886);let c="loading_page--fadeOut--vsa4j";function u({backgroundColor:e="default",children:t,loaded:r,loadingElementId:o,loadingElementClassName:u,delay:p=0}){let f=l.useRef(null),_=l.useRef(null);l.useEffect(()=>{if(f.current&&!_.current&&!(0,i.Lg)()){let e=document.getElementById(o);e&&(_.current=e.cloneNode(!0),f.current.appendChild(_.current))}},[o,f]);let h={animationDelay:`${p}ms`,backgroundColor:function(e){if("default"===e)return"var(--color-bg)";(0,a.xb)(e)}(e)};return(0,n.jsxs)(n.Fragment,{children:[r&&t,(0,n.jsx)("div",{"data-testid":`${o}-loading-skeleton`,ref:f,className:s()(u,d.s.eventsNone.absolute.top0.left0.right0.bottom0.overflowHidden.opacity1.$,{[c]:r}),style:h})]})}function p({result:e,children:t,...r}){let l="loaded"===e.status;return(0,n.jsx)(u,{...r,loaded:l,children:l?t(e.data):null})}function f({loaded:e,loadingSkeletonElement:t,showElementBeforeLoaded:r,children:a}){let i=l.useRef(e);return(0,n.jsxs)("div",{className:d.s.grid.$,children:[(e||r)&&(0,n.jsx)("div",{className:s()(d.s.gridRowEnd1.gridColumnEnd1.$),children:a}),(0,n.jsx)("div",{className:s()(d.s.eventsNone.gridRowEnd1.gridColumnEnd1.overflowHidden.$,{[c]:e,[d.s.opacity1.$]:!i.current}),children:t})]})}},388565(e,t,r){r.d(t,{e:()=>b});var n=r(239976),l=r(741542),a=r(350923),i=r(105652),o=r(946182),s=r(203574),d=r(567584),c=r(487817),u=r(206881),p=r(318131),f=r(289886);function _({thumbnailUrl:e,thumbnailType:t,clientMeta:r,lastTouchedAt:l,config:a,...o}){let[d,c]=i.useState(1),[u,p]=i.useState({x:0,y:0}),_=i.useRef(null),h=a?.get("FJZoomableThumbnailsScale",3.5)??3.5,m=i.useCallback(e=>{let t=_.current;if(!t)return;let r=t.getBoundingClientRect();p({x:e.clientX-r.left,y:e.clientY-r.top})},[p]),y=i.useCallback(()=>{c(h)},[h,c]),E=i.useCallback(()=>{c(1)},[c]);return(0,n.jsx)("div",{className:f.s.hFull.wFull.$,onMouseMove:m,onMouseEnter:y,onMouseLeave:E,onDragStart:E,children:(0,n.jsx)("div",{ref:_,className:f.s.hFull.wFull.$,children:(0,n.jsx)(s.V,{thumbnailUrl:e,thumbnailType:t,lastTouchedAt:l,clientMeta:r,addtlStyles:{transform:`scale(${d})`,transformOrigin:`${u.x}px ${u.y}px`,transition:`transform 0.4s ease ${.5*(d>1)}s`},draggable:!0,...o})})})}function h({thumbnailUrl:e,thumbnailType:t,additionalThumbnailUrls:r,clientMeta:l,lastTouchedAt:a,editorType:f,...h}){let{getConfig:m}=(0,o.I7)("exp_search_fb_thumbnail_previews"),y=m(),E=y.get("shouldAutoplay",!0),b=i.useRef(null);switch(f){case c._Y.WHITEBOARD:if(t===d.F.WHITEBOARD)break;return(0,n.jsx)(_,{thumbnailUrl:e,clientMeta:l,thumbnailType:t,lastTouchedAt:a,config:y,...h});default:let g=(r||[]).slice(0,6);if(g.length<3)break;if(E)return(0,n.jsx)(u.A,{ref:b,thumbnailUrl:e,additionalThumbnailUrls:g,clientMeta:l,thumbnailType:t,lastTouchedAt:a,...h});return(0,n.jsx)(p._,{ref:b,thumbnailUrl:e,additionalThumbnailUrls:g,clientMeta:l,thumbnailType:t,lastTouchedAt:a,...h})}return(0,n.jsx)(s.V,{thumbnailUrl:e,clientMeta:l,thumbnailType:t,lastTouchedAt:a,...h})}var m=r(427368),y=r(343902),E=r(832763);function b({tile:e,interactiveThumbnailsEnabled:t,...r}){var i;let o,u,p=E.Tf.getIsPasswordProtected(e),f=(0,a.md)((0,E.hi)({tile:e,enabled:p})),_=E.Tf.getThumbnailUrl(e),b=E.Tf.getTouchedAt(e),g=(i=e,o=E.Tf.getIsThumbnailFullWidth(i),u=E.Tf.getEditorType(i),i.type===E.nb.PROTOTYPE?d.F.PROTOTYPE:i.type===E.nb.OFFLINE_FILE?d.F.OFFLINE:u===c._Y.SLIDES?d.F.SLIDES:u===c._Y.WHITEBOARD?o?d.F.WHITEBOARD:d.F.DEFAULT_WHITEBOARD:o?d.F.DESIGN:d.F.DEFAULT_DESIGN);if(p){if("loading"===f.status)return(0,n.jsx)(y.q,{...r});if(!f.unwrapOr(!1))return(0,n.jsx)(m.N,{thumbnailType:g,...r})}let v=E.Tf.getClientMeta(e),x=E.Tf.getEditorType(e),F=E.Tf.getFileOrMainBranchKey(e);return(0,l.getFeatureFlags)().scrub_file_browser_search_results&&t&&_?(0,n.jsx)(h,{thumbnailUrl:_,thumbnailType:g,additionalThumbnailUrls:E.Tf.getPreviewThumbnailUrls(e)??[],clientMeta:v,lastTouchedAt:b,editorType:x,...r},F):(0,n.jsx)(s.V,{thumbnailUrl:_,clientMeta:v,thumbnailType:g,lastTouchedAt:b,...r},F)}},206881(e,t,r){r.d(t,{A:()=>f});var n=r(239976),l=r(105652),a=r(706354),i=r(224542),o=r.n(i),s=r(42053),d=r(203574),c=r(289886),u=r(618088),p=r(958850);let f=l.forwardRef(({thumbnailUrl:e,additionalThumbnailUrls:t,thumbnailType:r,clientMeta:i,lastTouchedAt:f,..._},h)=>{let[m,y]=l.useState(0),[E,b]=l.useState(!1),[g,v]=l.useState(!1),x=l.useRef(null),F=l.useRef(void 0),w=l.useRef(void 0),[I,T]=l.useState(!1),k=(0,u.E)(e,t,r,!0),R=k.length,O=k[m];l.useEffect(()=>{I||Promise.all(t.map(e=>(0,u.N)(e))).then(()=>{T(!0)}).catch(e=>{(0,s.x1)(a.FigmaTeam.SEARCH,"[fb-scrubber] Error: Could not pre-load fragment thumbnails",e)})},[I,t]);let S=()=>{w.current||(w.current=window.setInterval(()=>{y(e=>(e+1)%R)},800))},C=()=>{w.current&&(clearInterval(w.current),w.current=void 0)},A=()=>{clearTimeout(F.current),F.current=void 0,b(!1),v(!1),C(),y(0)},j=(e,t)=>{if(C(),0!==t.buttons){A(),y(0);return}y(e)};if(l.useEffect(()=>{clearInterval(w.current),clearTimeout(F.current)},[]),!I)return(0,n.jsx)("div",{className:c.s.hFull.wFull.$,children:(0,n.jsx)(d.V,{thumbnailUrl:e,thumbnailType:r,lastTouchedAt:f,clientMeta:i,..._})});let P=Array.from({length:k.length}).map((e,t)=>(0,n.jsx)("div",{className:p.j6,onMouseEnter:g?e=>j(t,e):void 0,onMouseMove:g?e=>j(t,e):void 0,children:(0,n.jsx)("button",{className:o()(p.Om,{[p.o]:t===m})},t)},t));return(0,n.jsx)("div",{className:c.s.hFull.wFull.$,ref:h,onMouseEnter:()=>{b(!0),S(),F.current=window.setTimeout(()=>{v(!0)},200)},onMouseLeave:A,onDragStart:A,children:(0,n.jsxs)("div",{ref:x,className:c.s.hFull.wFull.$,children:[(0,n.jsx)("div",{className:p.rR}),(0,n.jsx)(d.V,{thumbnailUrl:O,thumbnailType:r,lastTouchedAt:f,clientMeta:i,draggable:!0,..._}),(0,n.jsx)("div",{className:o()(p.r$,{[p.R]:!E}),onMouseLeave:g?()=>{S()}:void 0,children:P})]})})})},618088(e,t,r){if(r.d(t,{E:()=>a,N:()=>l}),1464==r.j)var n=r(567584);function l(e){return new Promise((t,r)=>{let n=new Image;n.src=e,n.crossOrigin="anonymous",n.onload=()=>{t(e)},n.onerror=e=>{r(e)}})}function a(e,t,r,l){return 0===t.length?[e]:l||r===n.F.SLIDES?[e,...t]:[e,...t,e]}},318131(e,t,r){r.d(t,{_:()=>h,i:()=>_});var n=r(239976),l=r(105652),a=r(706354),i=r(350923),o=r(224542),s=r.n(o),d=r(42053),c=r(203574),u=r(289886),p=r(618088),f=r(958850);let _=(0,i.eU)(new Set),h=l.forwardRef(({thumbnailUrl:e,additionalThumbnailUrls:t,thumbnailType:r,clientMeta:o,lastTouchedAt:h,showEmptyState:m,...y},E)=>{let[b,g]=l.useState(0),[v,x]=l.useState(b),[F,w]=l.useState(500),I=l.useRef(void 0),T=l.useRef(b),k=l.useRef(null);l.useEffect(()=>{T.current=b,I.current||(I.current=window.setTimeout(()=>{x(T.current),I.current=void 0,w(100)},F))},[b]);let[R,O]=l.useState(!1),S=(0,p.E)(e,t,r),C=S.length,A=S[v];l.useEffect(()=>{R||Promise.all(t.map(e=>(0,p.N)(e))).then(()=>{O(!0)}).catch(e=>{(0,d.x1)(a.FigmaTeam.SEARCH,"[fb-scrubber] Error: Could not pre-load fragment thumbnails",e)})},[R,t]);let j=l.useCallback(e=>{let t=k.current;if(!t)return;let r=t.getBoundingClientRect(),n=r.width/C;g(Math.max(0,Math.min(Math.floor((e.clientX-r.left)/n),C-1)))},[C]),P=()=>{clearTimeout(I.current),I.current=void 0,g(0),x(0),w(500)},N=(0,i.Xr)(_),L="IntersectionObserver"in window,[M,D]=l.useState(!1);return(l.useEffect(()=>{if(!L||!R||"function"==typeof E||!E?.current)return;let e=E.current,t=new IntersectionObserver(([e])=>{D(e.isIntersecting)},{threshold:1});return t.observe(e),()=>{t.unobserve(e)}},[E,t,R,L]),l.useEffect(()=>(M?N(t=>new Set(t).add(e)):N(t=>{let r=new Set(t);return r.delete(e),r}),()=>{N(t=>{let r=new Set(t);return r.delete(e),r})}),[M,e,N]),R)?(0,n.jsx)("div",{className:s()(u.s.hFull.wFull.$,f.xn),ref:E,onMouseMove:j,onMouseEnter:()=>{w(500)},onMouseLeave:P,onDragStart:P,children:(0,n.jsxs)("div",{ref:k,className:u.s.hFull.wFull.$,children:[(0,n.jsx)("div",{"data-onboarding-key":M?"scrubbable-thumbnail":void 0,className:f.rR}),(0,n.jsx)(c.V,{thumbnailUrl:A,thumbnailType:r,lastTouchedAt:h,clientMeta:o,draggable:!0,...y})]})}):(0,n.jsx)("div",{onMouseEnter:m?e=>{e.target.style.transition="opacity 0.2s ease-in-out",e.target.style.opacity="0.5",setTimeout(()=>{e.target.style.opacity="1"},200)}:void 0,className:u.s.hFull.wFull.$,children:(0,n.jsx)(c.V,{thumbnailUrl:e,thumbnailType:r,lastTouchedAt:h,clientMeta:o,...y})})})},947169(e,t,r){r.d(t,{ID:()=>n}),r(574988);let n=1464==r.j?{inputMargin:"8px",previewRowHeight:"48px",containerWidth:"380px",containerWidthDesktopNewTab:"816px",bottomPaddingDesktopNewTab:"32px",barHeight:"32px",facetedSearchHeight:"40px"}:null},96277(e,t,r){if(r.d(t,{z:()=>l}),1464==r.j)var n=r(741542);function l(){return(0,n.getFeatureFlags)().sites_beta?"BETA":"UNKNOWN"}},622531(e,t,r){r.d(t,{v:()=>a});var n=r(105652),l=r(239976);let a=(0,n.memo)(function(e){return(0,l.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,l.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M17 14.942V16.5c0 .005 0 .024-.02.063a.8.8 0 0 1-.153.198c-.183.18-.498.388-.969.584-.937.39-2.3.655-3.858.655s-2.921-.265-3.858-.655c-.47-.196-.786-.404-.969-.584a.8.8 0 0 1-.154-.198A.14.14 0 0 1 7 16.5v-1.558c.274.169.593.316.94.442 1.063.387 2.499.616 4.06.616s2.997-.23 4.06-.616a5 5 0 0 0 .94-.442m0-1.442c0 .076-.04.212-.258.4-.216.185-.558.375-1.024.544-.927.338-2.242.556-3.718.556s-2.79-.218-3.718-.556c-.466-.17-.808-.359-1.024-.545C7.041 13.712 7 13.576 7 13.5v-1.558c.274.169.593.316.94.442 1.063.387 2.499.616 4.06.616s2.997-.23 4.06-.616a5 5 0 0 0 .94-.442zm-9.742-2.6c-.217-.188-.258-.324-.258-.4V8.942c.274.169.593.316.94.442C9.003 9.771 10.439 10 12 10s2.997-.23 4.06-.616c.347-.126.666-.273.94-.442V10.5c0 .076-.04.212-.258.4-.216.185-.558.375-1.024.544-.927.338-2.242.556-3.718.556s-2.79-.218-3.718-.556c-.466-.17-.808-.359-1.024-.545M17 7.5c0-.005 0-.024-.02-.063a.8.8 0 0 0-.153-.198c-.183-.18-.498-.388-.969-.584C14.921 6.265 13.558 6 12 6s-2.921.265-3.858.655c-.47.196-.786.404-.969.584a.8.8 0 0 0-.154.198A.14.14 0 0 0 7 7.5c0 .076.04.212.258.4.216.185.558.375 1.024.544C9.209 8.782 10.524 9 12 9s2.79-.218 3.718-.556c.466-.17.808-.359 1.024-.545.217-.187.258-.323.258-.399m-11 0C6 6.12 8.686 5 12 5s6 1.12 6 2.5v9c0 1.38-2.686 2.5-6 2.5s-6-1.12-6-2.5z",clipRule:"evenodd"})})})},218896(e,t,r){r.d(t,{s:()=>a});var n=r(105652),l=r(239976);let a=(0,n.memo)(function(e){return(0,l.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,l.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M7.5 6a.5.5 0 0 1 .5.5v9.793l1.146-1.146a.5.5 0 0 1 .707.707l-2 2a.5.5 0 0 1-.707 0l-2-2-.064-.079a.5.5 0 0 1 .693-.693l.078.064L7 16.293V6.5a.5.5 0 0 1 .5-.5m10 10a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zm0-3a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zm0-3a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zm0-3a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1z"})})})},308113(e,t,r){r.d(t,{w:()=>a});var n=r(105652),l=r(239976);let a=(0,n.memo)(function(e){return(0,l.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,l.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M18 4a2 2 0 0 1 2 2v6.172l-.01.197a2 2 0 0 1-.576 1.217l-5.828 5.828-.146.133a2 2 0 0 1-1.268.453H6l-.204-.01A2 2 0 0 1 4 18V6a2 2 0 0 1 2-2zM6 5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h6v-5a2 2 0 0 1 2-2h5V6a1 1 0 0 0-1-1zm8 8a1 1 0 0 0-1 1v4.586L18.586 13z"})})})},211573(e,t,r){r.d(t,{R:()=>a});var n=r(105652),l=r(239976);let a=(0,n.memo)(function(e){return(0,l.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,l.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M18 12a6 6 0 1 1-12 0 6 6 0 0 1 12 0m1 0a7 7 0 1 1-14 0 7 7 0 0 1 14 0m-6.5-3.5a.5.5 0 0 0-1 0V12a.5.5 0 0 0 .146.354l2 2a.5.5 0 0 0 .708-.708L12.5 11.793z",clipRule:"evenodd"})})})}}]);

//# debugId=36a87e14-501a-5ac6-b3f2-1763f3410511

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/a4fb51d7a4c759d7bf3ebc1c7b1fc90e6231de84/3416-b0e117e9f97acf5d.min.js.map